{"version":3,"file":"myreact.umd.development.js","sources":["../src/share/createRef.ts","../src/dispatch/instance.ts","../src/share/env.ts","../src/share/debug.ts","../src/share/internalInstance.ts","../src/share/nodeType.ts","../src/share/internalType.ts","../src/share/isEquals.ts","../src/share/once.ts","../src/share/singleElement.ts","../src/share/symbol.ts","../src/share/flattenChildren.ts","../src/share/shouldPause.ts","../src/fiber/instance.ts","../src/fiber/context.ts","../src/fiber/queue.ts","../src/fiber/update.ts","../src/fiber/create.ts","../src/fiber/unmount.ts","../src/share/mapFiber.ts","../src/share/cannotUpdate.ts","../src/share/numberStyle.ts","../src/share/listTree.ts","../src/element/tool.ts","../src/element/instance.ts","../src/element/feature.ts","../src/children/tool.ts","../src/children/feature.ts","../src/component/instance.ts","../src/core/generate.ts","../src/core/invoke.ts","../src/core/mountLoopSync.ts","../src/core/updateLoopSync.ts","../src/core/updateLoopAsync.ts","../src/component/feature.ts","../src/dom/shared/reconcileMount.ts","../src/dom/shared/render.ts","../src/dom/shared/portal.ts","../src/dom/shared/tools.ts","../src/dom/shared/findDom.ts","../src/dom/shared/update.ts","../src/dom/client/dispatch/unmount/clearFiberDom.ts","../src/dom/client/dispatch/unmount/feature.ts","../src/dom/shared/unmount.ts","../src/dom/shared/reconcileUpdate.ts","../src/dom/shared/getFiberWithDom.ts","../src/dom/client/update/tool.ts","../src/dom/client/update/update.ts","../src/dom/client/dispatch/append/index.ts","../src/dom/client/dispatch/context/index.ts","../src/dom/client/dispatch/create/fallback.ts","../src/dom/client/dispatch/create/getHydrateDom.ts","../src/dom/client/dispatch/create/hydrateCreate.ts","../src/dom/client/dispatch/create/nativeCreate.ts","../src/dom/client/dispatch/create/validDomNesting.ts","../src/dom/client/dispatch/create/feature.ts","../src/dom/client/dispatch/effect/feature.ts","../src/dom/client/dispatch/position/append.ts","../src/dom/client/dispatch/position/getFiberWithDom.ts","../src/dom/client/dispatch/position/getInsertBeforeDom.ts","../src/dom/client/dispatch/position/insertBefore.ts","../src/dom/client/dispatch/position/feature.ts","../src/dom/client/dispatch/event/getEventName.ts","../src/dom/client/dispatch/event/addEvent.ts","../src/dom/client/dispatch/event/removeEvent.ts","../src/dom/client/dispatch/update/hydrateUpdate.ts","../src/dom/client/dispatch/update/highlight.ts","../src/dom/client/dispatch/update/nativeUpdate.ts","../src/dom/client/dispatch/update/feature.ts","../src/dom/client/dispatch/instance.ts","../src/dom/client/mount/render.ts","../src/dom/client/mount/hydrate.ts","../src/dom/server/dom/append.ts","../src/dom/server/dom/text.ts","../src/dom/server/dom/plain.ts","../src/dom/server/dom/create.ts","../src/dom/server/dom/update.ts","../src/dom/server/dispatch.ts","../src/dom/server/renderToString.ts","../src/hook/instance.ts","../src/hook/effect.ts","../src/hook/create.ts","../src/hook/feature.ts","../src/index.ts"],"sourcesContent":["export const createRef = <T = any>(value: T) => {\n  return { current: value };\n};\n","import type { MyReactFiberNode } from '../fiber';\nimport type { LinkTreeList } from '../share';\nimport type { FiberDispatch } from './interface';\n\nexport class EmptyDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    return false;\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  beginProgressList(): void {\n    void 0;\n  }\n  endProgressList(): void {\n    void 0;\n  }\n  generateUpdateList(_fiber: MyReactFiberNode | MyReactFiberNode[]): void {\n    void 0;\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    void 0;\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    void 0;\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    void 0;\n  }\n  updateAllSync(): void {\n    void 0;\n  }\n  updateAllAsync(): void {\n    void 0;\n  }\n}\n","import { EmptyDispatch } from '../dispatch';\n\nimport { createRef } from './createRef';\n\nimport type { FiberDispatch } from '../dispatch';\nimport type { PlainElement } from '../dom';\nimport type { MyReactFiberNode } from '../fiber';\nimport type { LinkTreeList } from './listTree';\n\nexport const asyncUpdateTimeLimit = 8;\n\nexport const globalLoop = createRef(false);\n\nexport const globalDispatch = createRef<FiberDispatch>(new EmptyDispatch());\n\nexport const rootFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const rootContainer = createRef<Element | PlainElement | null>(null);\n\nexport const currentRunningFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const currentFunctionFiber = createRef<MyReactFiberNode | null>(null);\n\nexport const currentHookDeepIndex = createRef(0);\n\nexport const isAppMounted = createRef(false);\n\nexport const isAppCrash = createRef(false);\n\nexport const isClientRender = createRef(false);\n\nexport const isServerRender = createRef(false);\n\nexport const isHydrateRender = createRef(false);\n\n// ==== feature ==== //\nexport const enableKeyDiff = createRef(true);\n\nexport const enableHighlight = createRef(false);\n\nexport const enableDebugLog = createRef(false);\n\nexport const enableAllCheck = createRef(true);\n\nexport const enableAsyncUpdate = createRef(true);\n\nexport const enableEventSystem = createRef(true);\n\nexport const enableControlComponent = createRef(true);\n\n// ==== running ==== //\nexport const asyncUpdateTimeStep = createRef<number | null>(null);\n\nexport const nRoundTransformFiberArray = createRef<MyReactFiberNode[]>([]);\n\nexport const cRoundTransformFiberArray = createRef<MyReactFiberNode[]>([]);\n\n// ==== update ==== //\nexport const pendingModifyFiberArray = createRef<MyReactFiberNode[]>([]);\n\nexport const pendingModifyTopLevelFiber = createRef<MyReactFiberNode | null>(\n  null\n);\n\nexport const pendingUpdateFiberListArray = createRef<\n  LinkTreeList<MyReactFiberNode>[]\n>([]);\n\nexport const pendingUpdateFiberList =\n  createRef<LinkTreeList<MyReactFiberNode> | null>(null);\n","import { currentRunningFiber, enableAllCheck, isAppCrash } from './env';\n\nimport type { MixinClassComponent, MixinFunctionComponent } from '../element';\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const getTrackDevLog = (fiber: MyReactFiberNode) => {\n  if (!enableAllCheck.current) return '';\n  const element = fiber.element;\n  const source = typeof element === 'object' ? element?._source : null;\n  const owner = typeof element === 'object' ? element?._owner : null;\n  let preString = '';\n  if (source) {\n    const { fileName, lineNumber } = source;\n    preString = `${preString} (${fileName}:${lineNumber})`;\n  }\n  if (\n    owner &&\n    !fiber.__isDynamicNode__ &&\n    typeof owner.element === 'object' &&\n    typeof owner.element?.type === 'function'\n  ) {\n    const typedType = owner.element.type as\n      | MixinClassComponent\n      | MixinFunctionComponent;\n    const name = typedType.displayName || owner.element.type.name;\n    preString = `${preString} (render dy ${name})`;\n  }\n  return preString;\n};\n\nexport const getFiberNodeName = (fiber: MyReactFiberNode) => {\n  if (fiber.__isMemo__) return `<Memo />${getTrackDevLog(fiber)}`;\n  if (fiber.__isLazy__) return `<Lazy />${getTrackDevLog(fiber)}`;\n  if (fiber.__isPortal__) return `<Portal />${getTrackDevLog(fiber)}`;\n  if (fiber.__isNullNode__) return `<null />${getTrackDevLog(fiber)}`;\n  if (fiber.__isEmptyNode__) return `<Empty />${getTrackDevLog(fiber)}`;\n  if (fiber.__isStrictNode__) return `<Strict />${getTrackDevLog(fiber)}`;\n  if (fiber.__isSuspense__) return `<Suspense />${getTrackDevLog(fiber)}`;\n  if (fiber.__isForwardRef__) return `<ForwardRef />${getTrackDevLog(fiber)}`;\n  if (fiber.__isFragmentNode__) return `<Fragment />${getTrackDevLog(fiber)}`;\n  if (fiber.__isContextProvider__)\n    return `<Provider />${getTrackDevLog(fiber)}`;\n  if (fiber.__isContextConsumer__)\n    return `<Consumer />${getTrackDevLog(fiber)}`;\n  if (typeof fiber.element === 'object' && fiber.element !== null) {\n    if (fiber.__isPlainNode__ && typeof fiber.element?.type === 'string') {\n      return `<${fiber.element.type} />${getTrackDevLog(fiber)}`;\n    }\n    if (fiber.__isDynamicNode__ && typeof fiber.element?.type === 'function') {\n      const typedType = fiber.element.type as\n        | MixinClassComponent\n        | MixinFunctionComponent;\n      let name =\n        typedType.displayName || fiber.element.type.name || 'anonymous';\n      name = fiber.__root__ ? `${name} (root)` : name;\n      return `<${name}* />${getTrackDevLog(fiber)}`;\n    }\n    return `<unknown />${getTrackDevLog(fiber)}`;\n  } else {\n    return `<text - (${fiber.element?.toString()}) />${getTrackDevLog(fiber)}`;\n  }\n};\n\nexport const getFiberTree = (fiber?: MyReactFiberNode | null) => {\n  if (fiber) {\n    const preString = ''.padEnd(4) + 'at'.padEnd(4);\n    let parent = fiber.parent;\n    let res = `${preString}${getFiberNodeName(fiber)}`;\n    while (parent) {\n      res = `${preString}${getFiberNodeName(parent)}\\n${res}`;\n      parent = parent.parent;\n    }\n    return `\\n${res}`;\n  }\n  return '';\n};\n\nexport const getHookTree = (\n  hookType: MyReactFiberNode['hookType'],\n  newType: MyReactFiberNode['hookType']\n) => {\n  let re =\n    '\\n' +\n    ''.padEnd(6) +\n    'Prev render:'.padEnd(20) +\n    'Next render:'.padEnd(10) +\n    '\\n';\n  for (const key in hookType) {\n    const c = hookType[key];\n    const n = newType[key];\n    re +=\n      (+key + 1).toString().padEnd(6) + c?.padEnd(20) + n?.padEnd(10) + '\\n';\n  }\n  re += ''.padEnd(6) + '^'.repeat(30) + '\\n';\n\n  return re;\n};\n\nconst cache: Record<string, boolean> = {};\n\ntype LogProps = {\n  message: string | Error;\n  fiber?: MyReactFiberNode;\n  triggerOnce?: boolean;\n  level?: 'warn' | 'error';\n};\n\nexport const log = ({\n  fiber,\n  message,\n  level = 'warn',\n  triggerOnce = false,\n}: LogProps) => {\n  const tree = getFiberTree(fiber || currentRunningFiber.current);\n  if (triggerOnce) {\n    if (cache[tree]) return;\n    cache[tree] = true;\n  }\n  console[level](\n    `[${level}]:`,\n    '\\n-----------------------------------------\\n',\n    `${\n      typeof message === 'string' ? message : message.stack || message.message\n    }`,\n    '\\n-----------------------------------------\\n',\n    'Render Tree:',\n    tree\n  );\n};\n\nexport const safeCall = <T extends any[] = any[], K = any>(\n  action: (...args: T) => K,\n  ...args: T\n) => {\n  try {\n    return action.call(null, ...args);\n  } catch (e) {\n    log({ message: e as Error, level: 'error' });\n    isAppCrash.current = true;\n    throw new Error((e as Error).message);\n  }\n};\n\nexport const safeCallWithFiber = <T extends any[] = any[], K = any>(\n  { action, fiber }: { action: (...args: T) => K; fiber: MyReactFiberNode },\n  ...args: T\n) => {\n  try {\n    return action.call(null, ...args);\n  } catch (e) {\n    log({ message: e as Error, level: 'error', fiber });\n    isAppCrash.current = true;\n    throw new Error((e as Error).message);\n  }\n};\n\nexport const debugWithDOM = (fiber: MyReactFiberNode) => {\n  if (fiber.dom) {\n    const debugDOM = fiber.dom as Element & {\n      __fiber__: MyReactFiberNode;\n      __element__: MyReactFiberNode['element'];\n      __children__: MyReactFiberNode['children'];\n    };\n    debugDOM['__fiber__'] = fiber;\n    debugDOM['__element__'] = fiber.element;\n    debugDOM['__children__'] = fiber.children;\n  }\n};\n","import type { MyReactFiberNode } from '../fiber';\n\nexport class MyReactInternalInstance {\n  __internal_instance_state__: {\n    __fiber__: MyReactFiberNode | null;\n    __context__: MyReactFiberNode | null;\n  } = {\n    __fiber__: null,\n    __context__: null,\n  };\n\n  __internal_instance_update__ = {\n    __pendingEffect__: false,\n  };\n\n  context: null | unknown = null;\n\n  get __fiber__() {\n    return this.__internal_instance_state__.__fiber__;\n  }\n\n  set __fiber__(v) {\n    this.__internal_instance_state__.__fiber__ = v;\n  }\n\n  get __context__() {\n    return this.__internal_instance_state__.__context__;\n  }\n\n  set __context__(v) {\n    this.__internal_instance_state__.__context__ = v;\n  }\n\n  get __pendingEffect__() {\n    return this.__internal_instance_update__.__pendingEffect__;\n  }\n\n  set __pendingEffect__(v) {\n    this.__internal_instance_update__.__pendingEffect__ = v;\n  }\n\n  setContext(context: MyReactFiberNode | null) {\n    if (this.__context__) this.__context__.removeDependence(this);\n    this.__context__ = context;\n    this.__context__?.addDependence(this);\n  }\n\n  setFiber(fiber: MyReactFiberNode) {\n    this.__fiber__ = fiber;\n  }\n\n  unmount() {\n    this.__context__?.removeDependence(this);\n  }\n}\n","export const NODE_TYPE_OBJ = {\n  __isNullNode__: false,\n  __isTextNode__: false,\n  __isEmptyNode__: false,\n  __isPlainNode__: false,\n  __isStrictNode__: false,\n  __isFragmentNode__: false,\n  // ====  object node ==== //\n  __isObjectNode__: false,\n  __isMemo__: false,\n  __isPortal__: false,\n  __isForwardRef__: false,\n  __isContextProvider__: false,\n  __isContextConsumer__: false,\n  __isLazy__: false,\n  __isSuspense__: false,\n  // ==== dynamic node ==== //\n  __isDynamicNode__: false,\n  __isClassComponent__: false,\n  __isFunctionComponent__: false,\n} as const;\n\nexport const NODE_TYPE_KEY = Object.keys(NODE_TYPE_OBJ) as Array<\n  keyof typeof NODE_TYPE_OBJ\n>;\n","import { NODE_TYPE_KEY } from './nodeType';\n\nexport class MyReactInternalType {\n  __internal_node_type__ = {\n    __isNullNode__: false,\n    __isTextNode__: false,\n    __isEmptyNode__: false,\n    __isPlainNode__: false,\n    __isStrictNode__: false,\n    __isFragmentNode__: false,\n    // ====  object node ==== //\n    __isObjectNode__: false,\n    __isForwardRef__: false,\n    __isPortal__: false,\n    __isMemo__: false,\n    __isContextProvider__: false,\n    __isContextConsumer__: false,\n    __isLazy__: false,\n    __isSuspense__: false,\n    // ==== dynamic node ==== //\n    __isDynamicNode__: false,\n    __isClassComponent__: false,\n    __isFunctionComponent__: false,\n  };\n\n  get __isNullNode__() {\n    return this.__internal_node_type__.__isNullNode__;\n  }\n\n  get __isTextNode__() {\n    return this.__internal_node_type__.__isTextNode__;\n  }\n  get __isEmptyNode__() {\n    return this.__internal_node_type__.__isEmptyNode__;\n  }\n  get __isPlainNode__() {\n    return this.__internal_node_type__.__isPlainNode__;\n  }\n  get __isStrictNode__() {\n    return this.__internal_node_type__.__isStrictNode__;\n  }\n  get __isFragmentNode__() {\n    return this.__internal_node_type__.__isFragmentNode__;\n  }\n  get __isObjectNode__() {\n    return this.__internal_node_type__.__isObjectNode__;\n  }\n  get __isForwardRef__() {\n    return this.__internal_node_type__.__isForwardRef__;\n  }\n  get __isPortal__() {\n    return this.__internal_node_type__.__isPortal__;\n  }\n  get __isMemo__() {\n    return this.__internal_node_type__.__isMemo__;\n  }\n  get __isContextProvider__() {\n    return this.__internal_node_type__.__isContextProvider__;\n  }\n  get __isContextConsumer__() {\n    return this.__internal_node_type__.__isContextConsumer__;\n  }\n  get __isLazy__() {\n    return this.__internal_node_type__.__isLazy__;\n  }\n  get __isSuspense__() {\n    return this.__internal_node_type__.__isSuspense__;\n  }\n  get __isDynamicNode__() {\n    return this.__internal_node_type__.__isDynamicNode__;\n  }\n  get __isClassComponent__() {\n    return this.__internal_node_type__.__isClassComponent__;\n  }\n  get __isFunctionComponent__() {\n    return this.__internal_node_type__.__isFunctionComponent__;\n  }\n\n  setNodeType(props?: { [key in typeof NODE_TYPE_KEY[number]]?: boolean }) {\n    Object.keys(props || {}).forEach((key) => {\n      const typeKey = key as typeof NODE_TYPE_KEY[number];\n      this.__internal_node_type__[typeKey] = props?.[typeKey] || false;\n    });\n  }\n\n  isSameType(props?: { [key in typeof NODE_TYPE_KEY[number]]?: boolean }) {\n    if (props) {\n      return NODE_TYPE_KEY.every((key) =>\n        this.__internal_node_type__[key]\n          ? Object.is(this.__internal_node_type__[key], props[key])\n          : true\n      );\n    } else {\n      return false;\n    }\n  }\n}\n","export const isNormalEquals = (\n  src: Record<string, unknown> | string | number | boolean | null,\n  target: Record<string, unknown> | string | number | boolean | null,\n  children = true\n) => {\n  if (\n    typeof src === 'object' &&\n    typeof target === 'object' &&\n    src !== null &&\n    target !== null\n  ) {\n    const srcKeys = Object.keys(src);\n    const targetKeys = Object.keys(target);\n    if (srcKeys.length !== targetKeys.length) return false;\n    let res = true;\n    for (const key in src) {\n      if (key === 'children') {\n        if (children) {\n          res = res && Object.is(src[key], target[key]);\n        } else {\n          continue;\n        }\n      } else {\n        res = res && Object.is(src[key], target[key]);\n      }\n      if (!res) return res;\n    }\n    return res;\n  }\n\n  return Object.is(src, target);\n};\n\nexport const isArrayEquals = (src: any[], target: any[]) => {\n  if (\n    Array.isArray(src) &&\n    Array.isArray(target) &&\n    src.length === target.length\n  ) {\n    let re = true;\n    for (const key in src) {\n      re = re && Object.is(src[key], target[key]);\n      if (!re) return re;\n    }\n    return re;\n  }\n  return false;\n};\n","export const once = <T extends any[], K = any>(action: (...args: T) => K) => {\n  let called = false;\n  return (...args: T) => {\n    if (called) return;\n    called = true;\n    action.call(null, ...args);\n  };\n};\n","export const IS_SINGLE_ELEMENT = {\n  br: true,\n  hr: true,\n  img: true,\n  input: true,\n  param: true,\n  meta: true,\n  link: true,\n};\n","export const My_React_Element = Symbol.for('react.element');\n\nexport const My_React_Memo = Symbol.for('react.memo');\n\nexport const My_React_ForwardRef = Symbol.for('react.forward_ref');\n\nexport const My_React_Portal = Symbol.for('react.portal');\n\nexport const My_React_Fragment = Symbol.for('react.fragment');\n\nexport const My_React_Context = Symbol.for('react.context');\n\nexport const My_React_Provider = Symbol.for('react.provider');\n\nexport const My_React_Consumer = Symbol.for('react.consumer');\n\nexport const My_React_Lazy = Symbol.for('react.lazy');\n\nexport const My_React_Suspense = Symbol.for('react.suspense');\n\nexport const My_React_Strict = Symbol.for('react.strict');\n","import type { MaybeArrayChildrenNode, ArrayChildrenNode } from '../element';\n\nexport const flattenChildren = (\n  children: MaybeArrayChildrenNode\n): ArrayChildrenNode => {\n  if (Array.isArray(children)) {\n    return children.reduce<ArrayChildrenNode>(\n      (p, c) => p.concat(flattenChildren(c)),\n      []\n    );\n  }\n  return [children];\n};\n","import { asyncUpdateTimeLimit, asyncUpdateTimeStep } from './env';\n\nexport const shouldPauseAsyncUpdate = () => {\n  if (!asyncUpdateTimeStep.current) {\n    asyncUpdateTimeStep.current = Date.now();\n    return false;\n  } else {\n    const result =\n      Date.now() - asyncUpdateTimeStep.current > asyncUpdateTimeLimit;\n    if (result) asyncUpdateTimeStep.current = null;\n    return result;\n  }\n};\n","import { getTypeFromVDom, isValidElement } from '../element';\nimport { enableAllCheck, globalDispatch, MyReactInternalType } from '../share';\n\nimport type { MyReactComponent } from '../component';\nimport type {\n  createContext,\n  forwardRef,\n  memo,\n  Props,\n  ChildrenNode,\n  Children,\n  DynamicChildrenNode,\n} from '../element';\nimport type { Action, MyReactHookNode } from '../hook';\nimport type { MyReactInternalInstance } from '../share';\n\nexport type ComponentUpdateQueue = {\n  type: 'state';\n  trigger: MyReactComponent;\n  isForce?: boolean;\n  payLoad?:\n    | Record<string, unknown>\n    | ((\n        state: Record<string, unknown>,\n        props: Record<string, unknown>\n      ) => Record<string, unknown>);\n  callback?: () => void;\n};\n\nexport type HookUpdateQueue = {\n  type: 'hook';\n  trigger: MyReactHookNode;\n  action: Action;\n};\n\nclass MyReactFiberInternal extends MyReactInternalType {\n  __internal_node_diff__: {\n    __renderedChildren__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n    __renderedChildHead__: MyReactFiberNode | null;\n    __renderedChildFoot__: MyReactFiberNode | null;\n    __renderedCount__: number;\n    __dynamicChildren__: ChildrenNode | null;\n    __isRenderDynamic__: boolean;\n    __isUpdateRender__: boolean;\n    __updateTimeStep__: number;\n    __lastUpdateTimeStep__: number;\n    __updateTimeSpace__: number;\n    __fallback__: ChildrenNode | null;\n    __root__: boolean;\n  } = {\n    __renderedChildren__: [],\n\n    __renderedChildHead__: null,\n\n    __renderedChildFoot__: null,\n\n    __renderedCount__: 1,\n\n    __isRenderDynamic__: false,\n\n    __dynamicChildren__: null,\n\n    __isUpdateRender__: false,\n\n    __updateTimeStep__: Date.now(),\n\n    __lastUpdateTimeStep__: 0,\n\n    __updateTimeSpace__: Infinity,\n\n    __fallback__: null,\n\n    __root__: false,\n  };\n\n  get __isUpdateRender__() {\n    return this.__internal_node_diff__.__isUpdateRender__;\n  }\n\n  set __isUpdateRender__(v) {\n    this.__internal_node_diff__.__isUpdateRender__ = v;\n  }\n\n  get __isRenderDynamic__() {\n    return this.__internal_node_diff__.__isRenderDynamic__;\n  }\n\n  set __isRenderDynamic__(v) {\n    this.__internal_node_diff__.__isRenderDynamic__ = v;\n  }\n\n  get __renderedCount__() {\n    return this.__internal_node_diff__.__renderedCount__;\n  }\n\n  set __renderedCount__(v) {\n    this.__internal_node_diff__.__renderedCount__ = v;\n  }\n\n  get __renderedChildren__() {\n    return this.__internal_node_diff__.__renderedChildren__;\n  }\n\n  set __renderedChildren__(v) {\n    this.__internal_node_diff__.__renderedChildren__ = v;\n  }\n\n  get __renderedChildHead__() {\n    return this.__internal_node_diff__.__renderedChildHead__;\n  }\n\n  set __renderedChildHead__(v) {\n    this.__internal_node_diff__.__renderedChildHead__ = v;\n  }\n\n  get __renderedChildFoot__() {\n    return this.__internal_node_diff__.__renderedChildFoot__;\n  }\n\n  set __renderedChildFoot__(v) {\n    this.__internal_node_diff__.__renderedChildFoot__ = v;\n  }\n\n  get __dynamicChildren__() {\n    return this.__internal_node_diff__.__dynamicChildren__;\n  }\n\n  set __dynamicChildren__(v) {\n    this.__internal_node_diff__.__dynamicChildren__ = v;\n    this.__internal_node_diff__.__isRenderDynamic__ = true;\n  }\n\n  get __updateTimeStep__() {\n    return this.__internal_node_diff__.__updateTimeStep__;\n  }\n\n  set __updateTimeStep__(v) {\n    const diff = this.__internal_node_diff__;\n    const lastTimeStep = diff.__updateTimeStep__;\n    const nowTimeStep = v;\n    diff.__lastUpdateTimeStep__ = lastTimeStep;\n    diff.__updateTimeStep__ = nowTimeStep;\n    diff.__updateTimeSpace__ = nowTimeStep - lastTimeStep;\n  }\n\n  get __fallback__() {\n    return this.__internal_node_diff__.__fallback__;\n  }\n\n  set __fallback__(v) {\n    this.__internal_node_diff__.__fallback__ = v;\n  }\n\n  get __root__() {\n    return this.__internal_node_diff__.__root__;\n  }\n\n  set __root__(v) {\n    this.__internal_node_diff__.__root__ = v;\n  }\n\n  __internal_node_state__ = {\n    __pendingCreate__: false,\n    __pendingUpdate__: false,\n    __pendingAppend__: false,\n    __pendingPosition__: false,\n    __pendingContext__: false,\n  };\n\n  get __pendingCreate__() {\n    return this.__internal_node_state__.__pendingCreate__;\n  }\n\n  set __pendingCreate__(v) {\n    this.__internal_node_state__.__pendingCreate__ = v;\n  }\n\n  get __pendingUpdate__() {\n    return this.__internal_node_state__.__pendingUpdate__;\n  }\n\n  set __pendingUpdate__(v) {\n    this.__internal_node_state__.__pendingUpdate__ = v;\n  }\n\n  get __pendingAppend__() {\n    return this.__internal_node_state__.__pendingAppend__;\n  }\n\n  set __pendingAppend__(v) {\n    this.__internal_node_state__.__pendingAppend__ = v;\n  }\n\n  get __pendingPosition__() {\n    return this.__internal_node_state__.__pendingPosition__;\n  }\n\n  set __pendingPosition__(v) {\n    this.__internal_node_state__.__pendingPosition__ = v;\n  }\n\n  get __pendingContext__() {\n    return this.__internal_node_state__.__pendingContext__;\n  }\n\n  set __pendingContext__(v) {\n    this.__internal_node_state__.__pendingContext__ = v;\n  }\n\n  __internal_node_event__: Record<\n    string,\n    ((...args: any[]) => void) & { cb?: any[] }\n  > = {};\n\n  __internal_node_context__: {\n    __dependence__: MyReactInternalInstance[];\n    __contextMap__: Record<string, MyReactFiberNode>;\n  } = {\n    __dependence__: [],\n    __contextMap__: {},\n  };\n\n  get __dependence__() {\n    return this.__internal_node_context__.__dependence__;\n  }\n\n  set __dependence__(v) {\n    this.__internal_node_context__.__dependence__ = v;\n  }\n\n  get __contextMap__() {\n    return this.__internal_node_context__.__contextMap__;\n  }\n\n  set __contextMap__(v) {\n    this.__internal_node_context__.__contextMap__ = v;\n  }\n\n  addDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    if (dependence.every((n) => n !== node)) {\n      dependence.push(node);\n    }\n  }\n\n  removeDependence(node: MyReactInternalInstance) {\n    const dependence = this.__dependence__;\n    this.__dependence__ = dependence.filter((n) => n !== node);\n  }\n\n  __internal_node_props__: {\n    __vdom__: null | DynamicChildrenNode;\n    __prevVdom__: null | DynamicChildrenNode;\n    __props__: Props;\n    __prevProps__: Props;\n    __children__: Props['children'] | null;\n  } = {\n    __vdom__: null,\n    __prevVdom__: null,\n    __props__: {},\n    __prevProps__: {},\n    __children__: null,\n  };\n\n  get __vdom__() {\n    return this.__internal_node_props__.__vdom__;\n  }\n\n  set __vdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__vdom__ = v;\n    props.__props__ = typeof v === 'object' ? v?.props || {} : {};\n    props.__children__ = typeof v === 'object' ? v?.props.children : [];\n  }\n\n  get __props__() {\n    return this.__internal_node_props__.__props__;\n  }\n\n  get __children__() {\n    return this.__internal_node_props__.__children__;\n  }\n\n  get __prevVdom__() {\n    return this.__internal_node_props__.__prevVdom__;\n  }\n\n  set __prevVdom__(v) {\n    const props = this.__internal_node_props__;\n    props.__prevVdom__ = v;\n    props.__prevProps__ = typeof v === 'object' ? v?.props || {} : {};\n  }\n\n  get __prevProps__() {\n    return this.__internal_node_props__.__prevProps__;\n  }\n\n  // __internal_node_dom__: {\n  //   dom: Element | Text | null;\n  //   nameSpace: string | null;\n  // } = {\n  //   dom: null,\n  //   nameSpace: null,\n  // };\n\n  // get dom() {\n  //   return this.__internal_node_dom__.dom;\n  // }\n\n  // set dom(v) {\n  //   this.__internal_node_dom__.dom = v;\n  // }\n\n  // get nameSpace() {\n  //   return this.__internal_node_dom__.nameSpace;\n  // }\n\n  // set nameSpace(v) {\n  //   this.__internal_node_dom__.nameSpace = v;\n  // }\n\n  __internal_node_hook__: {\n    hookHead: null | MyReactHookNode;\n    hookFoot: null | MyReactHookNode;\n    hookList: MyReactHookNode[];\n    hookType: MyReactHookNode['hookType'][];\n  } = {\n    hookHead: null,\n    hookFoot: null,\n    hookList: [],\n    hookType: [],\n  };\n\n  get hookHead() {\n    return this.__internal_node_hook__.hookHead;\n  }\n  set hookHead(v) {\n    this.__internal_node_hook__.hookHead = v;\n  }\n  get hookFoot() {\n    return this.__internal_node_hook__.hookFoot;\n  }\n  set hookFoot(v) {\n    this.__internal_node_hook__.hookFoot = v;\n  }\n  get hookList() {\n    return this.__internal_node_hook__.hookList;\n  }\n  set hookList(v) {\n    this.__internal_node_hook__.hookList = v;\n  }\n  get hookType() {\n    return this.__internal_node_hook__.hookType;\n  }\n  set hookType(v) {\n    this.__internal_node_hook__.hookType = v;\n  }\n\n  __internal_node_update__: {\n    __compUpdateQueue__: Array<ComponentUpdateQueue>;\n    __hookUpdateQueue__: Array<HookUpdateQueue>;\n  } = {\n    __compUpdateQueue__: [],\n    __hookUpdateQueue__: [],\n  };\n\n  __internal_node_effect__: {\n    __effectQueue__: Array<() => void>;\n    __layoutEffectQueue__: Array<() => void>;\n  } = {\n    __effectQueue__: [],\n    __layoutEffectQueue__: [],\n  };\n\n  __internal_node_unmount__: {\n    __unmountQueue__: Array<MyReactFiberNode | MyReactFiberNode[]>;\n  } = {\n    __unmountQueue__: [],\n  };\n\n  get __compUpdateQueue__() {\n    return this.__internal_node_update__.__compUpdateQueue__;\n  }\n\n  set __compUpdateQueue__(v) {\n    this.__internal_node_update__.__compUpdateQueue__ = v;\n  }\n\n  get __hookUpdateQueue__() {\n    return this.__internal_node_update__.__hookUpdateQueue__;\n  }\n\n  set __hookUpdateQueue__(v) {\n    this.__internal_node_update__.__hookUpdateQueue__ = v;\n  }\n\n  get __unmountQueue__() {\n    return this.__internal_node_unmount__.__unmountQueue__;\n  }\n\n  set __unmountQueue__(v) {\n    this.__internal_node_unmount__.__unmountQueue__ = v;\n  }\n\n  get __effectQueue__() {\n    return this.__internal_node_effect__.__effectQueue__;\n  }\n\n  set __effectQueue__(v) {\n    this.__internal_node_effect__.__effectQueue__ = v;\n  }\n\n  get __layoutEffectQueue__() {\n    return this.__internal_node_effect__.__layoutEffectQueue__;\n  }\n\n  set __layoutEffectQueue__(v) {\n    this.__internal_node_effect__.__layoutEffectQueue__ = v;\n  }\n}\n\nexport class MyReactFiberNode extends MyReactFiberInternal {\n  fiberIndex = 0;\n\n  mount = true;\n\n  dom: Element | Text | null = null;\n\n  nameSpace: string | null = null;\n\n  children: MyReactFiberNode[] = [];\n\n  child: MyReactFiberNode | null = null;\n\n  parent: MyReactFiberNode | null = null;\n\n  sibling: MyReactFiberNode | null = null;\n\n  instance: MyReactInternalInstance | null = null;\n\n  element: DynamicChildrenNode;\n\n  __needUpdate__ = true;\n\n  __needTrigger__ = false;\n\n  constructor(\n    index: number,\n    parent: MyReactFiberNode | null,\n    element: DynamicChildrenNode\n  ) {\n    super();\n    this.parent = parent;\n    this.fiberIndex = index;\n    this.element = element;\n    this.__vdom__ = element;\n  }\n\n  addChild(child: MyReactFiberNode) {\n    this.children.push(child);\n    if (this.__renderedChildFoot__) {\n      this.__renderedChildFoot__.sibling = child;\n      this.__renderedChildFoot__ = child;\n    } else {\n      this.child = child;\n      this.__renderedChildHead__ = child;\n      this.__renderedChildFoot__ = child;\n    }\n  }\n\n  initialParent() {\n    if (this.parent) {\n      this.parent.addChild(this);\n      if (this.parent.nameSpace) {\n        this.nameSpace = this.parent.nameSpace;\n      }\n      if (this.parent.__isSuspense__) {\n        this.__fallback__ = this.parent.__props__.fallback as ChildrenNode;\n      } else {\n        this.__fallback__ = this.parent.__fallback__;\n      }\n      const contextMap = Object.assign(\n        {},\n        this.parent.__contextMap__,\n        this.__contextMap__\n      );\n      if (\n        typeof this.element === 'object' &&\n        typeof this.element?.type === 'object' &&\n        this.__isContextProvider__\n      ) {\n        const typedElementType = this.element.type as ReturnType<\n          typeof createContext\n        >['Provider'];\n        const contextObj = typedElementType['Context'];\n        const contextId = contextObj['id'];\n        contextMap[contextId] = this;\n      }\n      this.__contextMap__ = contextMap;\n    }\n  }\n\n  installParent(newParent: MyReactFiberNode) {\n    this.parent = newParent;\n    this.sibling = null;\n    this.initialParent();\n  }\n\n  updateRenderState() {\n    if (enableAllCheck.current) {\n      this.__renderedCount__ += 1;\n      this.__updateTimeStep__ = Date.now();\n    }\n  }\n\n  beforeUpdate() {\n    this.child = null;\n    this.children = [];\n    this.__renderedChildHead__ = null;\n    this.__renderedChildFoot__ = null;\n  }\n\n  triggerUpdate() {\n    this.__needUpdate__ = true;\n    this.__needTrigger__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  prepareUpdate() {\n    this.__needUpdate__ = true;\n    this.__isUpdateRender__ = true;\n  }\n\n  afterUpdate() {\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__isUpdateRender__ = false;\n    this.__isRenderDynamic__ = false;\n  }\n\n  // when update, install new vdom\n  installVDom(vdom: DynamicChildrenNode) {\n    this.element = vdom;\n    this.__vdom__ = vdom;\n  }\n\n  // TODO\n  checkVDom() {\n    if (enableAllCheck.current) {\n      const vdom = this.element;\n      if (isValidElement(vdom)) {\n        const typedVDom = vdom;\n        if (!typedVDom._store['validType']) {\n          if (this.__isContextConsumer__) {\n            if (typeof typedVDom.props.children !== 'function') {\n              throw new Error(`Consumer need a function children`);\n            }\n          }\n          if (this.__isMemo__ || this.__isForwardRef__) {\n            const typedType = typedVDom.type as\n              | ReturnType<typeof forwardRef>\n              | ReturnType<typeof memo>;\n            if (\n              typeof typedType.render !== 'function' &&\n              typeof typedType.render !== 'object'\n            ) {\n              throw new Error('invalid render type');\n            }\n            if (\n              this.__isForwardRef__ &&\n              typeof typedType.render !== 'function'\n            ) {\n              throw new Error('forwardRef() need a function component');\n            }\n          }\n          if (typedVDom.ref) {\n            if (\n              typeof typedVDom.ref !== 'object' &&\n              typeof typedVDom.ref !== 'function'\n            ) {\n              throw new Error(\n                'unSupport ref usage, should be a function or a object like {current: any}'\n              );\n            }\n          }\n          if (typedVDom.key && typeof typedVDom.key !== 'string') {\n            throw new Error(`invalid key type, ${typedVDom.key}`);\n          }\n          if (\n            typedVDom.props.children &&\n            typedVDom.props['dangerouslySetInnerHTML']\n          ) {\n            throw new Error(\n              'can not render contain `children` and `dangerouslySetInnerHTML`'\n            );\n          }\n          if (typedVDom.props['dangerouslySetInnerHTML']) {\n            if (\n              typeof typedVDom.props['dangerouslySetInnerHTML'] !== 'object' ||\n              !Object.prototype.hasOwnProperty.call(\n                typedVDom.props['dangerouslySetInnerHTML'],\n                '__html'\n              )\n            ) {\n              throw new Error(\n                'invalid dangerouslySetInnerHTML props, should like {__html: string}'\n              );\n            }\n          }\n          typedVDom._store['validType'] = true;\n        }\n      }\n    }\n  }\n\n  initialType() {\n    const vdom = this.element;\n    const nodeType = getTypeFromVDom(vdom);\n    this.setNodeType(nodeType);\n    if (isValidElement(vdom)) {\n      if (vdom.type === 'svg') this.nameSpace = 'http://www.w3.org/2000/svg';\n    }\n  }\n\n  checkIsSameType(vdom: ChildrenNode) {\n    if (this.__needTrigger__) return true;\n    const nodeType = getTypeFromVDom(vdom);\n    const result = this.isSameType(nodeType);\n    const element = vdom as Children;\n    const currentElement = this.element as Children;\n    if (result) {\n      if (this.__isDynamicNode__ || this.__isPlainNode__) {\n        return Object.is(currentElement.type, element.type);\n      }\n      if (\n        this.__isObjectNode__ &&\n        typeof element.type === 'object' &&\n        typeof currentElement.type === 'object'\n      ) {\n        return Object.is(\n          element.type['$$typeof'],\n          currentElement.type['$$typeof']\n        );\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  addHook(hookNode: MyReactHookNode) {\n    this.hookList.push(hookNode);\n    this.hookType.push(hookNode.hookType);\n    if (!this.hookHead) {\n      this.hookHead = hookNode;\n      this.hookFoot = hookNode;\n    } else if (this.hookFoot) {\n      this.hookFoot.hookNext = hookNode;\n      hookNode.hookPrev = this.hookFoot;\n      this.hookFoot = hookNode;\n    }\n  }\n\n  checkHook(hookNode: MyReactHookNode) {\n    if (enableAllCheck.current) {\n      if (\n        hookNode.hookType === 'useMemo' ||\n        hookNode.hookType === 'useEffect' ||\n        hookNode.hookType === 'useCallback' ||\n        hookNode.hookType === 'useLayoutEffect'\n      ) {\n        if (typeof hookNode.value !== 'function') {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n      if (hookNode.hookType === 'useContext') {\n        if (typeof hookNode.value !== 'object' || hookNode.value === null) {\n          throw new Error(`${hookNode.hookType} initial error`);\n        }\n      }\n    }\n  }\n\n  applyRef() {\n    if (this.__isPlainNode__) {\n      const typedElement = this.element as Children;\n      if (this.dom) {\n        const ref = typedElement.ref;\n        if (typeof ref === 'object' && ref !== null) {\n          ref.current = this.dom;\n        } else if (typeof ref === 'function') {\n          ref(this.dom as Element);\n        }\n      } else {\n        throw new Error('do not have a dom for plain node');\n      }\n    }\n    if (this.__isClassComponent__) {\n      const typedElement = this.element as Children;\n      if (this.instance) {\n        const ref = typedElement.ref;\n        if (typeof ref === 'object' && ref !== null) {\n          ref.current = this.instance;\n        } else if (typeof ref === 'function') {\n          ref(this.instance);\n        }\n      }\n    }\n  }\n\n  applyVDom() {\n    this.__prevVdom__ = this.__isTextNode__\n      ? this.__vdom__\n      : Object.assign({}, this.__vdom__);\n  }\n\n  installInstance(instance: MyReactInternalInstance) {\n    this.instance = instance;\n  }\n\n  update() {\n    globalDispatch.current.trigger(this);\n  }\n\n  unmount() {\n    this.hookList.forEach((hook) => hook.unmount());\n    this.instance && this.instance.unmount();\n    this.mount = false;\n    this.__needUpdate__ = false;\n    this.__needTrigger__ = false;\n    this.__pendingCreate__ = false;\n    this.__pendingUpdate__ = false;\n    this.__pendingAppend__ = false;\n    this.__pendingPosition__ = false;\n  }\n}\n","import type { createContext } from '../element';\nimport type { MyReactFiberNode } from './instance';\n\nexport const getContextFiber = (\n  fiber: MyReactFiberNode | null,\n  ContextObject?: ReturnType<typeof createContext> | null\n) => {\n  if (ContextObject && fiber) {\n    const id = ContextObject.id;\n    const contextFiber = fiber.__contextMap__[id];\n    return contextFiber;\n  }\n  return null;\n};\n\nexport const getContextValue = (\n  fiber: MyReactFiberNode | null,\n  ContextObject?: ReturnType<typeof createContext> | null\n) => {\n  const contextValue = (\n    fiber ? fiber.__props__.value : ContextObject?.Provider.value\n  ) as Record<string, unknown> | null;\n\n  return contextValue;\n};\n","import type { MixinMyReactComponentType } from '../component';\nimport type { MyReactFiberNode } from './instance';\n\nexport const processComponentUpdateQueue = (fiber: MyReactFiberNode) => {\n  const allComponentUpdater = fiber.__compUpdateQueue__.slice(0);\n  fiber.__compUpdateQueue__ = [];\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const baseState = Object.assign({}, typedInstance.state);\n  const baseProps = Object.assign({}, typedInstance.props);\n  return allComponentUpdater.reduce<{\n    newState: Record<string, unknown>;\n    isForce: boolean;\n    callback: Array<() => void>;\n  }>(\n    (p, c) => ({\n      newState: {\n        ...p.newState,\n        ...(typeof c.payLoad === 'function'\n          ? c.payLoad(baseState, baseProps)\n          : c.payLoad),\n      },\n      isForce: p.isForce || c.isForce || false,\n      callback: c.callback ? p.callback.concat(c.callback) : p.callback,\n    }),\n    { newState: { ...baseState }, isForce: false, callback: [] }\n  );\n};\n\nexport const processHookUpdateQueue = (fiber: MyReactFiberNode) => {\n  const allHookUpdater = fiber.__hookUpdateQueue__.slice(0);\n  fiber.__hookUpdateQueue__ = [];\n  allHookUpdater.forEach(({ action, trigger }) => {\n    trigger.result = trigger.reducer(trigger.result, action);\n  });\n};\n","import { globalDispatch, isNormalEquals } from '../share';\n\nimport type { Children, ChildrenNode } from '../element';\nimport type { MyReactFiberNode } from './instance';\n\nexport const updateFiberNode = (\n  {\n    fiber,\n    parent,\n    prevFiber,\n  }: {\n    fiber: MyReactFiberNode;\n    parent: MyReactFiberNode;\n    prevFiber: MyReactFiberNode;\n  },\n  newChild: ChildrenNode\n) => {\n  fiber.installParent(parent);\n\n  const prevVDom = fiber.__vdom__;\n\n  fiber.installVDom(newChild);\n\n  const newVDom = fiber.__vdom__;\n\n  fiber.checkVDom();\n\n  fiber.updateRenderState();\n\n  if (prevVDom !== newVDom) {\n    if (fiber.__isMemo__) {\n      const typedPrevVDom = prevVDom as Children;\n      const typedNewVDom = newVDom as Children;\n      if (\n        !fiber.__needTrigger__ &&\n        isNormalEquals(typedPrevVDom.props, typedNewVDom.props)\n      ) {\n        fiber.afterUpdate();\n      } else {\n        fiber.prepareUpdate();\n      }\n    } else {\n      fiber.prepareUpdate();\n\n      if (fiber.__isContextProvider__) {\n        const typedPrevVDom = prevVDom as Children;\n        const typedNewVDom = newVDom as Children;\n        if (\n          !isNormalEquals(\n            typedPrevVDom.props.value as Record<string, unknown>,\n            typedNewVDom.props.value as Record<string, unknown>\n          )\n        ) {\n          globalDispatch.current.pendingContext(fiber);\n        }\n      }\n\n      if (fiber.__isPlainNode__) {\n        const typedPrevVDom = prevVDom as Children;\n        const typedNewVDom = newVDom as Children;\n        if (!isNormalEquals(typedPrevVDom.props, typedNewVDom.props, false)) {\n          globalDispatch.current.pendingUpdate(fiber);\n        }\n      }\n\n      if (fiber.__isTextNode__) {\n        globalDispatch.current.pendingUpdate(fiber);\n      }\n    }\n  }\n\n  if (fiber !== prevFiber) {\n    globalDispatch.current.pendingPosition(fiber);\n  }\n\n  return fiber;\n};\n","import { globalDispatch } from '../share';\n\nimport { MyReactFiberNode } from './instance';\n\nimport type { Children, ChildrenNode } from '../element';\n\nexport const createFiberNode = (\n  {\n    fiberIndex,\n    parent,\n    type = 'append',\n  }: {\n    fiberIndex: number;\n    parent: MyReactFiberNode | null;\n    type?: 'append' | 'position';\n  },\n  VDom: ChildrenNode\n) => {\n  const newFiberNode = new MyReactFiberNode(fiberIndex, parent, VDom);\n\n  newFiberNode.checkVDom();\n\n  newFiberNode.initialType();\n\n  newFiberNode.initialParent();\n\n  globalDispatch.current.pendingCreate(newFiberNode);\n\n  globalDispatch.current.pendingUpdate(newFiberNode);\n\n  if (type === 'append') {\n    globalDispatch.current.pendingAppend(newFiberNode);\n  } else {\n    globalDispatch.current.pendingPosition(newFiberNode);\n  }\n\n  if (newFiberNode.__isPlainNode__ || newFiberNode.__isClassComponent__) {\n    if ((VDom as Children).ref) {\n      globalDispatch.current.pendingLayoutEffect(newFiberNode, () =>\n        newFiberNode.applyRef()\n      );\n    }\n  }\n\n  return newFiberNode;\n};\n","import type { MyReactFiberNode } from './instance';\n\nexport const unmountFiber = (fiber: MyReactFiberNode) => {\n  fiber.children.forEach(unmountFiber);\n  fiber.unmount();\n};\n","import { MyReactFiberNode } from '../fiber';\n\nexport const mapFiber = (\n  arrayLike: MyReactFiberNode | MyReactFiberNode[],\n  action: (f: MyReactFiberNode) => void\n) => {\n  if (Array.isArray(arrayLike)) {\n    arrayLike.forEach((f) => mapFiber(f, action));\n  } else {\n    if (arrayLike instanceof MyReactFiberNode) {\n      action(arrayLike);\n    }\n  }\n};\n","import { isAppCrash, isHydrateRender, isServerRender } from './env';\n\nexport const cannotUpdate = () => {\n  if (isServerRender.current)\n    throw new Error('can not update component during SSR');\n  if (isHydrateRender.current)\n    throw new Error('can not update component during hydrate');\n  if (isAppCrash.current) return true;\n  if (typeof window === 'undefined') return false;\n  return true;\n};\n","export const IS_UNIT_LESS_NUMBER = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridArea: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  // SVG-related properties\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true,\n};\n","export class ListTreeNode<T> {\n  value: T;\n  prev: ListTreeNode<T> | null = null;\n  next: ListTreeNode<T> | null = null;\n\n  constructor(value: T) {\n    this.value = value;\n  }\n}\n\nexport class LinkTreeList<T> {\n  rawArray: T[] = [];\n  listArray: ListTreeNode<T>[][] = [];\n\n  length = 0;\n\n  head: ListTreeNode<T> | null = null;\n  foot: ListTreeNode<T> | null = null;\n\n  append(node: T, index: number) {\n    this.length++;\n    this.rawArray.push(node);\n    const listNode = new ListTreeNode(node);\n    this.push(listNode);\n    if (this.listArray[index]) {\n      const array = this.listArray[index];\n      array.push(listNode);\n    } else {\n      this.listArray[index] = [listNode];\n    }\n  }\n\n  unshift(node: ListTreeNode<T>) {\n    if (!this.head) {\n      this.head = node;\n      this.foot = node;\n    } else {\n      this.head.prev = node;\n      node.next = this.head;\n      this.head = node;\n    }\n  }\n\n  shift() {\n    if (this.head) {\n      const re = this.head;\n      if (this.head.next) {\n        this.head = this.head.next;\n        re.next = null;\n        this.head.prev = null;\n      } else {\n        this.head = null;\n        this.foot = null;\n      }\n      return re;\n    } else {\n      return null;\n    }\n  }\n\n  push(node: ListTreeNode<T>) {\n    if (!this.foot) {\n      this.head = node;\n      this.foot = node;\n    } else {\n      this.foot.next = node;\n      node.prev = this.foot;\n      this.foot = node;\n    }\n  }\n\n  pop() {\n    if (this.foot) {\n      const re = this.foot;\n      if (this.foot.prev) {\n        this.foot = this.foot.prev;\n        re.prev = null;\n        this.foot.next = null;\n      } else {\n        this.head = null;\n        this.foot = null;\n      }\n      return re;\n    } else {\n      return null;\n    }\n  }\n\n  pickHead() {\n    return this.head;\n  }\n\n  pickFoot() {\n    return this.foot;\n  }\n\n  listToFoot(action: (p: T) => void) {\n    let node = this.head;\n    while (node) {\n      action(node.value);\n      node = node.next;\n    }\n  }\n\n  listToHead(action: (p: T) => void) {\n    let node = this.foot;\n    while (node) {\n      action(node.value);\n      node = node.prev;\n    }\n  }\n\n  reconcile(action: (p: T) => void) {\n    for (let i = this.listArray.length - 1; i >= 0; i--) {\n      const array = this.listArray[i];\n      if (array) {\n        array.forEach((p) => action(p.value));\n      }\n    }\n  }\n\n  has() {\n    return this.head !== null;\n  }\n}\n","import {\n  log,\n  once,\n  enableAllCheck,\n  My_React_Consumer,\n  My_React_Element,\n  My_React_ForwardRef,\n  My_React_Fragment,\n  My_React_Lazy,\n  My_React_Memo,\n  My_React_Portal,\n  My_React_Provider,\n  My_React_Strict,\n  My_React_Suspense,\n} from '../share';\n\nimport type { NODE_TYPE_KEY } from '../share';\nimport type {\n  Children,\n  ChildrenNode,\n  DynamicChildrenNode,\n  MaybeArrayChildrenNode,\n} from './instance';\n\nexport function isValidElement(\n  element?: MaybeArrayChildrenNode | null\n): element is Children {\n  return (\n    typeof element === 'object' &&\n    !Array.isArray(element) &&\n    element?.$$typeof === My_React_Element\n  );\n}\n\nexport function getTypeFromVDom(element: DynamicChildrenNode) {\n  const nodeType: { [key in typeof NODE_TYPE_KEY[number]]?: boolean } = {};\n  if (isValidElement(element)) {\n    const rawType = element.type;\n    if (typeof rawType === 'object') {\n      nodeType.__isObjectNode__ = true;\n      const typedRawType = rawType as { ['$$typeof']: symbol };\n      switch (typedRawType['$$typeof']) {\n        case My_React_Provider:\n          nodeType.__isContextProvider__ = true;\n          break;\n        case My_React_Consumer:\n          nodeType.__isContextConsumer__ = true;\n          break;\n        case My_React_Portal:\n          nodeType.__isPortal__ = true;\n          break;\n        case My_React_Memo:\n          nodeType.__isMemo__ = true;\n          break;\n        case My_React_ForwardRef:\n          nodeType.__isForwardRef__ = true;\n          break;\n        case My_React_Lazy:\n          nodeType.__isLazy__ = true;\n          break;\n        default:\n          throw new Error(\n            `invalid object element type ${typedRawType['$$typeof'].toString()}`\n          );\n      }\n    } else if (typeof rawType === 'function') {\n      nodeType.__isDynamicNode__ = true;\n      if (rawType.prototype?.isMyReactComponent) {\n        nodeType.__isClassComponent__ = true;\n      } else {\n        nodeType.__isFunctionComponent__ = true;\n      }\n    } else if (typeof rawType === 'symbol') {\n      switch (rawType) {\n        case My_React_Fragment:\n          nodeType.__isFragmentNode__ = true;\n          break;\n        case My_React_Strict:\n          nodeType.__isStrictNode__ = true;\n          break;\n        case My_React_Suspense:\n          nodeType.__isSuspense__ = true;\n          break;\n        default:\n          throw new Error(`invalid symbol element type ${rawType.toString()}`);\n      }\n    } else if (typeof rawType === 'string') {\n      nodeType.__isPlainNode__ = true;\n    } else {\n      throw new Error(`invalid element type ${rawType}`);\n    }\n  } else {\n    if (typeof element === 'object' && element !== null) {\n      nodeType.__isEmptyNode__ = true;\n    } else if (element === null || element === undefined || element === false) {\n      nodeType.__isNullNode__ = true;\n    } else {\n      nodeType.__isTextNode__ = true;\n    }\n  }\n  return nodeType;\n}\n\nexport const checkValidKey = (children: ChildrenNode[]) => {\n  const obj: Record<string, boolean> = {};\n  const onceWarnDuplicate = once(log);\n  const onceWarnUndefined = once(log);\n  children.forEach((c) => {\n    if (isValidElement(c) && !c._store['validKey']) {\n      if (typeof c.key === 'string') {\n        if (obj[c.key]) {\n          onceWarnDuplicate({ message: 'array child have duplicate key' });\n        }\n        obj[c.key] = true;\n      } else {\n        onceWarnUndefined({\n          message: 'each array child must have a unique key props',\n          triggerOnce: true,\n        });\n      }\n      c._store['validKey'] = true;\n    }\n  });\n};\n\nexport const checkArrayChildrenKey = (children: ChildrenNode[]) => {\n  if (enableAllCheck.current) {\n    children.forEach((child) => {\n      if (Array.isArray(child)) {\n        checkValidKey(child);\n      } else {\n        if (isValidElement(child)) child._store['validKey'] = true;\n      }\n    });\n  }\n};\n\nexport const checkSingleChildrenKey = (children: ChildrenNode) => {\n  if (enableAllCheck.current) {\n    if (Array.isArray(children)) {\n      checkValidKey(children);\n    } else {\n      if (isValidElement(children)) children._store['validKey'] = true;\n    }\n  }\n};\n","/* eslint-disable prefer-rest-params */\nimport { currentFunctionFiber, My_React_Element } from '../share';\n\nimport {\n  checkArrayChildrenKey,\n  checkSingleChildrenKey,\n  isValidElement,\n} from './tool';\n\nimport type { MyReactComponent } from '../component';\nimport type { MyReactFiberNode } from '../fiber';\nimport type { createRef, MyReactInternalInstance } from '../share';\nimport type { createContext, forwardRef, lazy, memo } from './feature';\n\nexport type FunctionComponent<T extends any[] = any[]> = (\n  ...args: T\n) => Children;\n\nexport type ClassComponent = typeof MyReactComponent;\n\nexport type ObjectComponent =\n  | ReturnType<typeof createContext>['Consumer']\n  | ReturnType<typeof createContext>['Provider']\n  | ReturnType<typeof forwardRef>\n  | ReturnType<typeof memo>\n  | ReturnType<typeof lazy>\n  | { ['$$typeof']: symbol; [p: string]: unknown };\n\nexport type MixinClassComponent = ClassComponent & {\n  displayName?: string;\n  defaultProps?: Record<string, unknown>;\n};\n\nexport type MixinFunctionComponent = FunctionComponent & {\n  displayName?: string;\n  defaultProps?: Record<string, unknown>;\n};\n\nexport type ElementType =\n  | symbol\n  | string\n  | ObjectComponent\n  | ClassComponent\n  | FunctionComponent;\n\nexport type Children = ReturnType<typeof createVDom>;\n\nexport type ChildrenNode =\n  | Children\n  | string\n  | number\n  | boolean\n  | null\n  | undefined;\n\nexport type MaybeArrayChildrenNode = ChildrenNode | ChildrenNode[];\n\nexport type DynamicChildrenNode = ChildrenNode;\n\nexport type ArrayChildrenNode = ChildrenNode[];\n\nexport type Props = {\n  children?: MaybeArrayChildrenNode;\n  [key: string]: unknown;\n};\n\nexport type CreateVDomProps = {\n  type: ElementType;\n  key: string | null;\n  ref:\n    | ReturnType<typeof createRef>\n    | ((node?: Element | MyReactInternalInstance) => void)\n    | null;\n  props: Props;\n  _self: MyReactInternalInstance | null;\n  _source: { fileName: string; lineNumber: string } | null;\n  _owner: MyReactFiberNode | null;\n};\n\nexport type CreateElementConfig = {\n  ref?: CreateVDomProps['ref'];\n  key?: CreateVDomProps['key'];\n  __self?: CreateVDomProps['_self'];\n  __source?: CreateVDomProps['_source'];\n  [key: string]: unknown;\n};\n\nexport class MyReactVDom {\n  ['$$typeof'] = My_React_Element;\n\n  _store: Record<string, unknown> = {};\n\n  constructor(\n    readonly type: CreateVDomProps['type'],\n    readonly key: CreateVDomProps['key'],\n    readonly ref: CreateVDomProps['ref'],\n    readonly props: CreateVDomProps['props'],\n    readonly _self: CreateVDomProps['_self'],\n    readonly _source: CreateVDomProps['_source'],\n    readonly _owner: CreateVDomProps['_owner']\n  ) {}\n}\n\nconst createVDom = ({\n  type,\n  key,\n  ref,\n  props,\n  _self,\n  _source,\n  _owner,\n}: CreateVDomProps) => {\n  return {\n    ['$$typeof']: My_React_Element,\n    type,\n    key,\n    ref,\n    props,\n\n    _owner,\n    _self,\n    _source,\n    _store: {} as Record<string, unknown>,\n  };\n};\n\nexport function createElement(\n  type: CreateVDomProps['type'],\n  config: CreateElementConfig,\n  children?: Props['children']\n) {\n  let key: CreateVDomProps['key'] = null;\n  let ref: CreateVDomProps['ref'] = null;\n  let self: CreateVDomProps['_self'] = null;\n  let source: CreateVDomProps['_source'] = null;\n\n  const props: CreateVDomProps['props'] = {};\n\n  if (config !== null && config !== undefined) {\n    const { ref: _ref, key: _key, __self, __source, ...resProps } = config;\n    ref = _ref === undefined ? null : _ref;\n    key = _key === undefined ? null : _key + '';\n    self = __self === undefined ? null : __self;\n    source = __source === undefined ? null : __source;\n    Object.keys(resProps).forEach((key) => (props[key] = resProps[key]));\n  }\n\n  if (typeof type === 'function' || typeof type === 'object') {\n    const typedType = type as MixinClassComponent | MixinFunctionComponent;\n    Object.keys(typedType?.defaultProps || {}).forEach((key) => {\n      props[key] =\n        props[key] === undefined ? typedType.defaultProps?.[key] : props[key];\n    });\n  }\n\n  const childrenLength = arguments.length - 2;\n\n  if (childrenLength > 1) {\n    children = Array.from(arguments).slice(2);\n    checkArrayChildrenKey(children);\n    props.children = children;\n  } else if (childrenLength === 1) {\n    checkSingleChildrenKey(children as ChildrenNode);\n    props.children = children;\n  }\n\n  return createVDom({\n    type,\n    key,\n    ref,\n    props,\n    _self: self,\n    _source: source,\n    _owner: currentFunctionFiber.current,\n  });\n}\n\nexport function cloneElement(\n  element: ChildrenNode,\n  config?: CreateElementConfig,\n  children?: Props['children']\n) {\n  if (isValidElement(element)) {\n    const props = Object.assign({}, element.props);\n    let key = element.key;\n    let ref = element.ref;\n    const type = element.type;\n    const self = element._self;\n    const source = element._source;\n    let owner = element._owner;\n    if (config !== null && config !== undefined) {\n      const { ref: _ref, key: _key, __self, __source, ...resProps } = config;\n      if (_ref !== undefined) {\n        ref = _ref;\n        owner = currentFunctionFiber.current;\n      }\n      if (_key !== undefined) {\n        key = _key + '';\n      }\n      let defaultProps: Record<string, unknown> | undefined = {};\n      if (\n        typeof element.type === 'function' ||\n        typeof element.type === 'object'\n      ) {\n        const typedType = element.type as\n          | MixinClassComponent\n          | MixinFunctionComponent;\n        defaultProps = typedType?.defaultProps;\n      }\n      for (const key in resProps) {\n        if (Object.prototype.hasOwnProperty.call(resProps, key)) {\n          if (resProps[key] === undefined && defaultProps) {\n            props[key] = defaultProps[key];\n          } else {\n            props[key] = resProps[key];\n          }\n        }\n      }\n    }\n\n    const childrenLength = arguments.length - 2;\n\n    if (childrenLength > 1) {\n      children = Array.from(arguments).slice(2);\n      checkArrayChildrenKey(children);\n      props.children = children;\n    } else if (childrenLength === 1) {\n      checkSingleChildrenKey(children as ChildrenNode);\n      props.children = children;\n    }\n\n    const clonedElement = createVDom({\n      type,\n      key,\n      ref,\n      props,\n      _self: self,\n      _source: source,\n      _owner: owner,\n    });\n\n    clonedElement._store['clonedEle'] = true;\n\n    return clonedElement;\n  } else {\n    throw new Error('cloneElement() need valid element as args');\n  }\n}\n","import {\n  MyReactInternalInstance,\n  My_React_Consumer,\n  My_React_Context,\n  My_React_ForwardRef,\n  My_React_Lazy,\n  My_React_Memo,\n  My_React_Provider,\n} from '../share';\n\nimport type { ClassComponent, FunctionComponent } from '.';\n\nlet contextId = 0;\n\nexport const createContext = <T = any>(value: T) => {\n  const ContextObject = {\n    ['$$typeof']: My_React_Context,\n    id: contextId++,\n    Provider: {} as typeof Provider,\n    Consumer: {} as typeof Consumer,\n  };\n\n  const Provider = {\n    ['$$typeof']: My_React_Provider,\n    value,\n    Context: { id: 0 },\n  };\n\n  const Consumer = {\n    ['$$typeof']: My_React_Consumer,\n    Internal: MyReactInternalInstance,\n    Context: { id: 0 },\n  };\n\n  Object.defineProperty(Provider, 'Context', {\n    get() {\n      return ContextObject;\n    },\n    enumerable: false,\n    configurable: false,\n  });\n\n  Object.defineProperty(Consumer, 'Context', {\n    get() {\n      return ContextObject;\n    },\n    enumerable: false,\n    configurable: false,\n  });\n\n  ContextObject.Provider = Provider;\n  ContextObject.Consumer = Consumer;\n\n  return ContextObject;\n};\n\nexport const forwardRef = (\n  render: FunctionComponent | { ['$$typeof']: symbol; [p: string]: unknown }\n) => {\n  return {\n    ['$$typeof']: My_React_ForwardRef,\n    render,\n  };\n};\n\nexport const memo = (\n  render:\n    | FunctionComponent\n    | ClassComponent\n    | {\n        ['$$typeof']: symbol;\n        render: FunctionComponent | ClassComponent;\n        [p: string]: unknown;\n      }\n) => {\n  return { ['$$typeof']: My_React_Memo, render };\n};\n\nexport const lazy = (\n  loader: () => Promise<{ default: FunctionComponent | ClassComponent }>\n) => {\n  return {\n    ['$$typeof']: My_React_Lazy,\n    loader,\n    _loading: false,\n    _loaded: false,\n    render: null,\n  } as {\n    ['$$typeof']: typeof My_React_Lazy;\n    loader: () => Promise<\n      | { default: FunctionComponent | ClassComponent }\n      | FunctionComponent\n      | ClassComponent\n    >;\n    _loading: boolean;\n    _loaded: boolean;\n    render:\n      | null\n      | FunctionComponent\n      | ClassComponent\n      | { ['$$typeof']: symbol; [p: string]: unknown };\n  };\n};\n","import { flattenChildren } from '../share';\n\nimport type {\n  Children,\n  ChildrenNode,\n  ArrayChildrenNode,\n  MaybeArrayChildrenNode,\n} from '../element';\n\nexport const mapByJudge = <T extends MaybeArrayChildrenNode>(\n  arrayLike: T,\n  judge: (t: ChildrenNode) => boolean,\n  action: (v: Children, index: number, array: ArrayChildrenNode) => Children\n) => {\n  const arrayChildren = flattenChildren(arrayLike);\n\n  return arrayChildren.map((v, index) => {\n    if (judge(v)) {\n      return action.call(null, v as Children, index, arrayChildren);\n    } else {\n      return v;\n    }\n  });\n};\n","import { cloneElement, isValidElement } from '../element';\n\nimport { mapByJudge } from './tool';\n\nimport type { MaybeArrayChildrenNode, Children } from '../element';\n\nexport const map = (\n  arrayLike: MaybeArrayChildrenNode,\n  action: (child: Children, index: number) => Children\n) => mapByJudge(arrayLike, (v) => v !== undefined && v !== null, action);\n\nexport const toArray = (arrayLike: MaybeArrayChildrenNode) =>\n  map(arrayLike, (element, index) =>\n    cloneElement(element, {\n      key: element?.key !== undefined ? `.$${element.key}` : `.${index}`,\n    })\n  );\n\nexport const forEach = (\n  arrayLike: MaybeArrayChildrenNode,\n  action: (\n    child: Children,\n    index: number,\n    children: MaybeArrayChildrenNode\n  ) => Children\n) => {\n  mapByJudge(arrayLike, (v) => v !== undefined && v !== null, action);\n};\n\nexport const count = (arrayLike: MaybeArrayChildrenNode): number => {\n  if (Array.isArray(arrayLike)) {\n    return arrayLike.reduce<number>((p, c) => p + count(c), 0);\n  }\n  return 1;\n};\n\nexport const only = (child: MaybeArrayChildrenNode) => {\n  if (isValidElement(child)) return child;\n  if (\n    typeof child === 'string' ||\n    typeof child === 'number' ||\n    typeof child === 'boolean'\n  )\n    return true;\n\n  throw new Error(\n    'Children.only() expected to receive a single MyReact element child.'\n  );\n};\n","import { isNormalEquals, MyReactInternalInstance } from '../share';\n\nimport type { DynamicChildrenNode, createContext } from '../element';\nimport type { ComponentUpdateQueue } from '../fiber';\n\ninterface MyReactComponentType<P, S, C> {\n  render(this: MyReactComponent): DynamicChildrenNode;\n  componentDidMount?(this: MyReactComponent): void;\n  shouldComponentUpdate?(\n    this: MyReactComponent,\n    nextProps: P,\n    nextState: S,\n    nextContext: C\n  ): boolean;\n  componentDidUpdate?(\n    this: MyReactComponent,\n    prevProps: P,\n    prevState: S,\n    prevContext: C\n  ): void;\n  componentWillUnmount?(): void;\n}\n\nexport type MyReactComponentStaticType<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any\n> = {\n  contextType: null | ReturnType<typeof createContext>;\n  getDerivedStateFromProps(props: P, state: S): S;\n};\n\nexport type MixinMyReactComponentType<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> = MyReactComponent<P, S, C> & MyReactComponentType<P, S, C>;\n\nexport class MyReactComponent<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> extends MyReactInternalInstance {\n  state: S | null = null;\n  props: P | null = null;\n  context: C | null = null;\n\n  constructor(props?: P, context?: C | null) {\n    super();\n    this.props = props || null;\n    this.context = context || null;\n  }\n\n  get isReactComponent() {\n    return true;\n  }\n\n  get isMyReactComponent() {\n    return true;\n  }\n\n  setState = (\n    payLoad: ComponentUpdateQueue['payLoad'],\n    callback: ComponentUpdateQueue['callback']\n  ) => {\n    const updater: ComponentUpdateQueue = {\n      type: 'state',\n      payLoad,\n      callback,\n      trigger: this,\n    };\n\n    this.__fiber__?.__compUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n\n  forceUpdate = () => {\n    const updater: ComponentUpdateQueue = {\n      type: 'state',\n      isForce: true,\n      trigger: this,\n    };\n\n    this.__fiber__?.__compUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n\n  unmount() {\n    super.unmount();\n    const instance = this as unknown as MixinMyReactComponentType;\n    instance.componentWillUnmount?.();\n  }\n}\n\nexport class MyReactPureComponent<\n  P extends Record<string, unknown> = any,\n  S extends Record<string, unknown> = any,\n  C extends Record<string, unknown> = any\n> extends MyReactComponent<P, S, C> {\n  shouldComponentUpdate(nextProps: P, nextState: S, nextContext: C) {\n    return (\n      !isNormalEquals(nextProps, this.props) ||\n      !isNormalEquals(nextState, this.state) ||\n      !isNormalEquals(nextContext, this.context)\n    );\n  }\n}\n","import { isValidElement } from '../element';\nimport { MyReactFiberNode, createFiberNode, updateFiberNode } from '../fiber';\nimport {\n  enableKeyDiff,\n  globalDispatch,\n  isAppMounted,\n  isServerRender,\n  isHydrateRender,\n} from '../share';\n\nimport type {\n  Children,\n  ChildrenNode,\n  ArrayChildrenNode,\n  MaybeArrayChildrenNode,\n} from '../element';\n\nconst getKeyMatchedChildren = (\n  newChildren: ArrayChildrenNode,\n  prevFiberChildren: Array<MyReactFiberNode | MyReactFiberNode[]>\n) => {\n  if (!isAppMounted.current) return prevFiberChildren;\n  if (isServerRender.current) return prevFiberChildren;\n  if (isHydrateRender.current) return prevFiberChildren;\n  if (!enableKeyDiff.current) return prevFiberChildren;\n  if (!prevFiberChildren) return prevFiberChildren;\n  if (prevFiberChildren.length === 0) return prevFiberChildren;\n\n  const tempChildren = prevFiberChildren.slice(0);\n  const assignPrevChildren: Array<MyReactFiberNode | MyReactFiberNode[]> =\n    Array(tempChildren.length).fill(null);\n\n  newChildren.forEach((element, index) => {\n    if (tempChildren.length) {\n      if (isValidElement(element)) {\n        if (typeof element.key === 'string') {\n          const targetIndex = tempChildren.findIndex(\n            (fiber) =>\n              fiber instanceof MyReactFiberNode &&\n              typeof fiber.element === 'object' &&\n              fiber.element?.key === element.key\n          );\n          if (targetIndex !== -1) {\n            assignPrevChildren[index] = tempChildren[targetIndex];\n            tempChildren.splice(targetIndex, 1);\n          }\n        } else {\n          // TODO\n        }\n      }\n    }\n  });\n\n  return assignPrevChildren.map((v) => {\n    if (v) return v;\n    return tempChildren.shift();\n  });\n};\n\nconst getIsSameTypeNode = (\n  newChild: MaybeArrayChildrenNode,\n  prevFiberChild?: MyReactFiberNode | MyReactFiberNode[]\n) => {\n  if (!isAppMounted.current) return false;\n  const newChildIsArray = Array.isArray(newChild);\n  const prevElementChildIsArray = Array.isArray(prevFiberChild);\n  if (newChildIsArray && prevElementChildIsArray) return true;\n  if (newChildIsArray) return false;\n  if (prevElementChildIsArray) return false;\n\n  const typedPrevFiberChild = prevFiberChild as MyReactFiberNode;\n  const typedNewChild = newChild as ChildrenNode;\n\n  const prevRenderedChild = typedPrevFiberChild?.element;\n  const result = typedPrevFiberChild?.checkIsSameType(typedNewChild);\n  if (\n    result &&\n    enableKeyDiff.current &&\n    !typedPrevFiberChild.__isTextNode__ &&\n    !typedPrevFiberChild.__isNullNode__\n  ) {\n    return (\n      (typedNewChild as Children).key === (prevRenderedChild as Children).key\n    );\n  } else {\n    return result;\n  }\n};\n\nconst getNewFiberWithUpdate = (\n  newChild: MaybeArrayChildrenNode,\n  parentFiber: MyReactFiberNode,\n  prevFiberChild?: MyReactFiberNode | MyReactFiberNode[],\n  assignPrevFiberChild?: MyReactFiberNode | MyReactFiberNode[]\n): MyReactFiberNode | MyReactFiberNode[] => {\n  const isSameType = getIsSameTypeNode(newChild, assignPrevFiberChild);\n  if (isSameType) {\n    if (\n      Array.isArray(newChild) &&\n      Array.isArray(prevFiberChild) &&\n      Array.isArray(assignPrevFiberChild)\n    ) {\n      const assignPrevFiberChildren = getKeyMatchedChildren(\n        newChild,\n        assignPrevFiberChild\n      ) as MyReactFiberNode[];\n      if (newChild.length < assignPrevFiberChildren.length) {\n        globalDispatch.current.pendingUnmount(\n          parentFiber,\n          assignPrevFiberChildren.slice(newChild.length)\n        );\n      }\n      return newChild.map((v, index) =>\n        getNewFiberWithUpdate(\n          v,\n          parentFiber,\n          prevFiberChild[index],\n          assignPrevFiberChildren[index]\n        )\n      ) as MyReactFiberNode[];\n    }\n\n    return updateFiberNode(\n      {\n        fiber: assignPrevFiberChild as MyReactFiberNode,\n        parent: parentFiber,\n        prevFiber: prevFiberChild as MyReactFiberNode,\n      },\n      newChild as ChildrenNode\n    );\n  } else {\n    if (assignPrevFiberChild) {\n      globalDispatch.current.pendingUnmount(parentFiber, assignPrevFiberChild);\n    }\n\n    if (Array.isArray(newChild)) {\n      return newChild.map((v) =>\n        getNewFiberWithUpdate(v, parentFiber)\n      ) as MyReactFiberNode[];\n    }\n\n    return createFiberNode(\n      {\n        fiberIndex: parentFiber.fiberIndex + 1,\n        parent: parentFiber,\n        type: 'position',\n      },\n      newChild\n    );\n  }\n};\n\nconst getNewFiberWithInitial = (\n  newChild: MaybeArrayChildrenNode,\n  parentFiber: MyReactFiberNode\n): MyReactFiberNode | MyReactFiberNode[] => {\n  if (Array.isArray(newChild)) {\n    return newChild.map((v) =>\n      getNewFiberWithInitial(v, parentFiber)\n    ) as MyReactFiberNode[];\n  }\n\n  return createFiberNode(\n    { fiberIndex: parentFiber.fiberIndex + 1, parent: parentFiber },\n    newChild\n  );\n};\n\nexport const transformChildrenFiber = (\n  parentFiber: MyReactFiberNode,\n  children: MaybeArrayChildrenNode | null | undefined\n) => {\n  let index = 0;\n\n  const isUpdate = parentFiber.__isUpdateRender__;\n\n  const newChildren = Array.isArray(children) ? children : [children];\n\n  const prevFiberChildren = isUpdate ? parentFiber.__renderedChildren__ : [];\n\n  const assignPrevFiberChildren = getKeyMatchedChildren(\n    newChildren,\n    prevFiberChildren\n  );\n\n  parentFiber.__renderedChildren__ = [];\n\n  parentFiber.beforeUpdate();\n\n  while (index < newChildren.length || index < assignPrevFiberChildren.length) {\n    const newChild = newChildren[index];\n    const prevFiberChild = prevFiberChildren[index];\n    const assignPrevFiberChild = assignPrevFiberChildren[index];\n\n    const newFiber = isUpdate\n      ? getNewFiberWithUpdate(\n          newChild,\n          parentFiber,\n          prevFiberChild,\n          assignPrevFiberChild\n        )\n      : getNewFiberWithInitial(newChild, parentFiber);\n\n    parentFiber.__renderedChildren__.push(newFiber);\n\n    index++;\n  }\n\n  parentFiber.afterUpdate();\n\n  return parentFiber.children;\n};\n","import { classComponentMount, classComponentUpdate } from '../component';\nimport { createElement } from '../element';\nimport {\n  getContextFiber,\n  getContextValue,\n  processHookUpdateQueue,\n} from '../fiber';\nimport {\n  isServerRender,\n  currentRunningFiber,\n  currentHookDeepIndex,\n  currentFunctionFiber,\n  pendingModifyTopLevelFiber,\n} from '../share';\n\nimport { transformChildrenFiber } from './generate';\n\nimport type {\n  lazy,\n  memo,\n  Children,\n  forwardRef,\n  createContext,\n  ClassComponent,\n  FunctionComponent,\n} from '../element';\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const nextWorkCommon = (fiber: MyReactFiberNode) => {\n  if (fiber.__isRenderDynamic__) {\n    return transformChildrenFiber(fiber, fiber.__dynamicChildren__);\n  } else {\n    return transformChildrenFiber(fiber, fiber.__children__);\n  }\n};\n\nconst nextWorkClassComponent = (fiber: MyReactFiberNode) => {\n  if (!fiber.instance) {\n    return classComponentMount(fiber);\n  } else {\n    return classComponentUpdate(fiber);\n  }\n};\n\nconst nextWorkFunctionComponent = (fiber: MyReactFiberNode) => {\n  processHookUpdateQueue(fiber);\n\n  currentHookDeepIndex.current = 0;\n\n  currentFunctionFiber.current = fiber;\n\n  const typedElement = fiber.element as Children;\n\n  const children = (typedElement.type as FunctionComponent)(fiber.__props__);\n\n  currentFunctionFiber.current = null;\n\n  currentHookDeepIndex.current = 0;\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkComponent = (fiber: MyReactFiberNode) => {\n  if (fiber.__isFunctionComponent__) {\n    return nextWorkFunctionComponent(fiber);\n  } else {\n    return nextWorkClassComponent(fiber);\n  }\n};\n\nconst nextWorkMemo = (fiber: MyReactFiberNode) => {\n  const { type, ref } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof memo>;\n\n  const render = typedType.render;\n\n  let isForwardRefRender = false;\n\n  const targetRender =\n    typeof render === 'object'\n      ? ((isForwardRefRender = true), render.render)\n      : render;\n\n  const isClassComponent = targetRender?.prototype?.isMyReactComponent;\n\n  if (isClassComponent) {\n    return nextWorkClassComponent(fiber);\n  } else {\n    processHookUpdateQueue(fiber);\n\n    currentHookDeepIndex.current = 0;\n\n    currentFunctionFiber.current = fiber;\n\n    const typedRender = targetRender as FunctionComponent;\n\n    const children = isForwardRefRender\n      ? typedRender(fiber.__props__, ref)\n      : typedRender(fiber.__props__);\n\n    currentFunctionFiber.current = null;\n\n    currentHookDeepIndex.current = 0;\n\n    fiber.__dynamicChildren__ = children;\n\n    return nextWorkCommon(fiber);\n  }\n};\n\nconst nextWorkLazy = (fiber: MyReactFiberNode) => {\n  const { type } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof lazy>;\n\n  if (typedType._loaded === true) {\n    const render = typedType.render as ClassComponent | FunctionComponent;\n\n    fiber.__dynamicChildren__ = createElement(render, fiber.__props__);\n\n    return nextWorkCommon(fiber);\n  } else if (typedType._loading === false) {\n    if (!isServerRender.current) {\n      typedType._loading = true;\n      Promise.resolve()\n        .then(() => typedType.loader())\n        .then((re) => {\n          const render =\n            typeof re === 'object' && typeof re?.default === 'function'\n              ? re.default\n              : re;\n          typedType._loaded = true;\n          typedType._loading = false;\n          typedType.render = render as ClassComponent | FunctionComponent;\n          fiber.update();\n        });\n    }\n  }\n\n  fiber.__dynamicChildren__ = fiber.__fallback__;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkForwardRef = (fiber: MyReactFiberNode) => {\n  processHookUpdateQueue(fiber);\n\n  const { type, ref } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof forwardRef>;\n\n  const typedRender = typedType.render as FunctionComponent;\n\n  currentHookDeepIndex.current = 0;\n\n  currentFunctionFiber.current = fiber;\n\n  const children = typedRender(fiber.__props__, ref);\n\n  currentFunctionFiber.current = null;\n\n  currentHookDeepIndex.current = 0;\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkProvider = (fiber: MyReactFiberNode) => nextWorkCommon(fiber);\n\nconst nextWorkConsumer = (fiber: MyReactFiberNode) => {\n  const { type, props } = fiber.element as Children;\n\n  const typedType = type as ReturnType<typeof createContext>['Consumer'];\n\n  fiber.instance = fiber.instance || new typedType.Internal();\n\n  fiber.instance.setFiber(fiber);\n\n  const Context = typedType.Context as ReturnType<typeof createContext>;\n\n  if (!fiber.instance.__context__ || !fiber.instance.__context__.mount) {\n    const ProviderFiber = getContextFiber(fiber, Context);\n\n    const context = getContextValue(ProviderFiber, Context);\n\n    fiber.instance.context = context;\n\n    fiber.instance.setContext(ProviderFiber);\n  } else {\n    const context = getContextValue(fiber.instance.__context__, Context);\n\n    fiber.instance.context = context;\n  }\n\n  const typedChildren = props.children as unknown as FunctionComponent;\n\n  const children = typedChildren(fiber.instance.context);\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst nextWorkObject = (fiber: MyReactFiberNode) => {\n  if (fiber.__isMemo__) return nextWorkMemo(fiber);\n  if (fiber.__isLazy__) return nextWorkLazy(fiber);\n  if (fiber.__isPortal__) return nextWorkCommon(fiber);\n  if (fiber.__isSuspense__) return nextWorkCommon(fiber);\n  if (fiber.__isForwardRef__) return nextWorkForwardRef(fiber);\n  if (fiber.__isContextProvider__) return nextWorkProvider(fiber);\n  if (fiber.__isContextConsumer__) return nextWorkConsumer(fiber);\n  throw new Error(`unknown element ${fiber.element}`);\n};\n\nexport const nextWorkSync = (fiber: MyReactFiberNode) => {\n  if (!fiber.mount) return [];\n\n  if (!fiber.__needUpdate__ && !fiber.__needTrigger__) return [];\n\n  currentRunningFiber.current = fiber;\n\n  let children: MyReactFiberNode[] = [];\n\n  if (fiber.__isDynamicNode__) children = nextWorkComponent(fiber);\n  else if (fiber.__isObjectNode__) children = nextWorkObject(fiber);\n  else children = nextWorkCommon(fiber);\n\n  currentRunningFiber.current = null;\n\n  return children;\n};\n\nexport const nextWorkAsync = (fiber: MyReactFiberNode) => {\n  if (!fiber.mount) return null;\n\n  if (fiber.__needUpdate__ || fiber.__needTrigger__) {\n    currentRunningFiber.current = fiber;\n\n    if (fiber.__isDynamicNode__) nextWorkComponent(fiber);\n    else if (fiber.__isObjectNode__) nextWorkObject(fiber);\n    else nextWorkCommon(fiber);\n\n    currentRunningFiber.current = null;\n\n    if (fiber.children.length) {\n      return fiber.child;\n    }\n  }\n\n  let nextFiber: MyReactFiberNode | null = fiber;\n\n  while (nextFiber && nextFiber !== pendingModifyTopLevelFiber.current) {\n    if (nextFiber.sibling) {\n      return nextFiber.sibling;\n    }\n    nextFiber = nextFiber.parent;\n  }\n\n  return null;\n};\n","import { cRoundTransformFiberArray, nRoundTransformFiberArray } from '../share';\n\nimport { nextWorkSync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nconst loopStart = (fiber: MyReactFiberNode) => {\n  cRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n};\n\nconst loopCurrent = () => {\n  while (cRoundTransformFiberArray.current.length) {\n    const fiber = cRoundTransformFiberArray.current.shift();\n    if (fiber) {\n      nRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n    }\n  }\n};\n\nconst loopNext = () => {\n  while (nRoundTransformFiberArray.current.length) {\n    const fiber = nRoundTransformFiberArray.current.shift();\n    if (fiber) {\n      cRoundTransformFiberArray.current.push(...nextWorkSync(fiber));\n    }\n  }\n};\n\nconst loopToEnd = () => {\n  loopCurrent();\n  loopNext();\n  if (cRoundTransformFiberArray.current.length) {\n    loopToEnd();\n  }\n};\n\nconst loopAll = (fiber: MyReactFiberNode) => {\n  loopStart(fiber);\n  loopToEnd();\n};\n\nexport const mountLoopSync = (fiber: MyReactFiberNode) => loopAll(fiber);\n","import { safeCall } from '../share';\n\nimport { nextWorkAsync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const updateLoopSync = (\n  loopController: {\n    hasNext: () => boolean;\n    getNext: () => MyReactFiberNode | null;\n    getUpdateList: (f: MyReactFiberNode) => void;\n    setYield: (f: MyReactFiberNode | null) => void;\n  },\n  reconcileUpdate: () => void\n) => {\n  if (loopController.hasNext()) {\n    let fiber = loopController.getNext();\n    while (fiber) {\n      const _fiber = fiber as MyReactFiberNode;\n      fiber = safeCall(() => nextWorkAsync(_fiber));\n      loopController.getUpdateList(_fiber);\n      loopController.setYield(fiber);\n    }\n  }\n  reconcileUpdate();\n};\n","import { safeCall } from '../share';\n\nimport { nextWorkAsync } from './invoke';\n\nimport type { MyReactFiberNode } from '../fiber';\n\nexport const updateLoopAsync = (\n  loopController: {\n    setYield: (f: MyReactFiberNode | null) => void;\n    getNext: () => MyReactFiberNode | null;\n    getUpdateList: (f: MyReactFiberNode) => void;\n    hasNext: () => boolean;\n    doesPause: () => boolean;\n  },\n  shouldPause: () => boolean,\n  reconcileUpdate: () => void\n) => {\n  while (loopController.hasNext() && !shouldPause()) {\n    const fiber = loopController.getNext();\n    if (fiber) {\n      const nextFiber = safeCall(() => nextWorkAsync(fiber));\n      loopController.getUpdateList(fiber);\n      loopController.setYield(nextFiber);\n    }\n  }\n  if (!loopController.doesPause()) {\n    reconcileUpdate();\n  }\n};\n","import { nextWorkCommon } from '../core';\nimport {\n  getContextFiber,\n  getContextValue,\n  processComponentUpdateQueue,\n} from '../fiber';\nimport { globalDispatch } from '../share';\n\nimport type { Children, ClassComponent, memo } from '../element';\nimport type { MyReactFiberNode } from '../fiber';\nimport type {\n  MixinMyReactComponentType,\n  MyReactComponentStaticType,\n} from './instance';\n\nconst processComponentStateFromProps = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const props = Object.assign({}, typedElement.props);\n  const state = Object.assign({}, typedInstance.state);\n\n  if (typeof typedComponent.getDerivedStateFromProps === 'function') {\n    const payloadState = typedComponent.getDerivedStateFromProps(props, state);\n    if (payloadState) {\n      typedInstance.state = Object.assign(\n        {},\n        typedInstance.state,\n        payloadState\n      );\n    }\n  }\n};\n\nconst processComponentInstanceOnMount = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  const ProviderFiber = getContextFiber(fiber, typedComponent.contextType);\n\n  const context = getContextValue(ProviderFiber, typedComponent.contextType);\n\n  const props = Object.assign({}, typedElement.props);\n\n  const instance = new typedComponent(props, context);\n\n  instance.props = props;\n\n  instance.context = context;\n\n  fiber.installInstance(instance);\n\n  instance.setFiber(fiber);\n\n  instance.setContext(ProviderFiber);\n};\n\nconst processComponentFiberOnUpdate = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  typedInstance.setFiber(fiber);\n};\n\nconst processComponentRenderOnMountAndUpdate = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const children = typedInstance.render();\n\n  fiber.__dynamicChildren__ = children;\n\n  return nextWorkCommon(fiber);\n};\n\nconst processComponentDidMountOnMount = (fiber: MyReactFiberNode) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  if (typedInstance.componentDidMount && !typedInstance.__pendingEffect__) {\n    typedInstance.__pendingEffect__ = true;\n    globalDispatch.current.pendingLayoutEffect(fiber, () => {\n      typedInstance.__pendingEffect__ = false;\n      typedInstance.componentDidMount?.();\n    });\n  }\n};\n\nconst processComponentContextOnUpdate = (fiber: MyReactFiberNode) => {\n  const typedElement = fiber.element as Children;\n\n  const Component = fiber.__isDynamicNode__\n    ? typedElement.type\n    : (typedElement.type as ReturnType<typeof memo>).render;\n\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  const typedComponent = Component as ClassComponent &\n    MyReactComponentStaticType;\n\n  if (!typedInstance?.__context__ || !typedInstance.__context__.mount) {\n    const ProviderFiber = getContextFiber(fiber, typedComponent.contextType);\n\n    const context = getContextValue(ProviderFiber, typedComponent.contextType);\n\n    typedInstance?.setContext(ProviderFiber);\n\n    return context;\n  } else {\n    const context = getContextValue(\n      typedInstance.__context__,\n      typedComponent.contextType\n    );\n\n    return context;\n  }\n};\n\nconst processComponentShouldUpdateOnUpdate = (\n  fiber: MyReactFiberNode,\n  {\n    nextState,\n    nextProps,\n    nextContext,\n  }: { nextState: unknown; nextProps: unknown; nextContext: unknown }\n) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n\n  if (fiber.__needTrigger__) return true;\n\n  if (typedInstance.shouldComponentUpdate) {\n    return typedInstance.shouldComponentUpdate(\n      nextProps,\n      nextState,\n      nextContext\n    );\n  }\n\n  return true;\n};\n\nconst processComponentDidUpdateOnUpdate = (\n  fiber: MyReactFiberNode,\n  {\n    baseState,\n    baseProps,\n    baseContext,\n    callback,\n  }: {\n    baseState: unknown;\n    baseProps: unknown;\n    baseContext: unknown;\n    callback: Array<() => void>;\n  }\n) => {\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const hasEffect = typedInstance.componentDidUpdate || callback.length;\n\n  // TODO it is necessary to use __pendingEffect__ field ?\n  if (hasEffect && !typedInstance.__pendingEffect__) {\n    typedInstance.__pendingEffect__ = true;\n    globalDispatch.current.pendingLayoutEffect(fiber, () => {\n      typedInstance.__pendingEffect__ = false;\n      callback.forEach((c) => c.call(null));\n      typedInstance.componentDidUpdate?.(baseProps, baseState, baseContext);\n    });\n  }\n};\n\nexport const classComponentMount = (fiber: MyReactFiberNode) => {\n  processComponentInstanceOnMount(fiber);\n  processComponentStateFromProps(fiber);\n  const children = processComponentRenderOnMountAndUpdate(fiber);\n  processComponentDidMountOnMount(fiber);\n  return children;\n};\n\nexport const classComponentUpdate = (fiber: MyReactFiberNode) => {\n  processComponentFiberOnUpdate(fiber);\n  processComponentStateFromProps(fiber);\n  const { newState, isForce, callback } = processComponentUpdateQueue(fiber);\n  const typedInstance = fiber.instance as MixinMyReactComponentType;\n  const baseState = typedInstance.state;\n  const baseProps = typedInstance.props;\n  const baseContext = typedInstance.context;\n  const nextState = Object.assign({}, baseState, newState);\n  const nextProps = Object.assign({}, fiber.__props__);\n  const nextContext = processComponentContextOnUpdate(fiber);\n  let shouldUpdate = isForce;\n  if (!shouldUpdate) {\n    shouldUpdate = processComponentShouldUpdateOnUpdate(fiber, {\n      nextState,\n      nextProps,\n      nextContext,\n    });\n  }\n  typedInstance.state = nextState;\n  typedInstance.props = nextProps;\n  typedInstance.context = nextContext;\n  if (shouldUpdate) {\n    const children = processComponentRenderOnMountAndUpdate(fiber);\n    processComponentDidUpdateOnUpdate(fiber, {\n      baseContext,\n      baseProps,\n      baseState,\n      callback,\n    });\n    return children;\n  } else {\n    return [];\n  }\n};\n","import { globalDispatch } from '../../share';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nexport const reconcileMount = (fiber: MyReactFiberNode, hydrate: boolean) => {\n  globalDispatch.current.reconcileCommit(fiber, hydrate, fiber);\n};\n","import { mountLoopSync } from '../../core';\nimport { globalLoop, isAppMounted, safeCall } from '../../share';\n\nimport { reconcileMount } from './reconcileMount';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nexport const startRender = (fiber: MyReactFiberNode, hydrate = false) => {\n  globalLoop.current = true;\n\n  safeCall(() => mountLoopSync(fiber));\n\n  reconcileMount(fiber, hydrate);\n\n  isAppMounted.current = true;\n\n  globalLoop.current = false;\n};\n","import { createElement } from '../../element';\nimport { My_React_Portal } from '../../share';\n\nimport type { Children } from '../../element';\n\nexport const createPortal = (element: Children, container: HTMLElement) => {\n  return createElement(\n    { ['$$typeof']: My_React_Portal },\n    { container },\n    element\n  );\n};\n","export const isInternal = (key: string) => key.startsWith('_');\n\nexport const isChildren = (key: string) =>\n  key === 'children' || key === 'dangerouslySetInnerHTML';\n\nexport const isEvent = (key: string) => key.startsWith('on');\n\nexport const isStyle = (key: string) => key === 'style';\n\nexport const isProperty = (key: string) =>\n  !isChildren(key) && !isEvent(key) && !isStyle(key) && !isInternal(key);\n\nexport const isNew =\n  (oldProps: Record<string, unknown>, newProps: Record<string, unknown>) =>\n  (key: string) =>\n    oldProps[key] !== newProps[key];\n\nexport const isGone = (newProps: Record<string, unknown>) => (key: string) =>\n  !(key in newProps);\n","import { MyReactComponent } from '../../component';\n\nimport type { MyReactFiberNode } from '../../fiber';\nimport type { MyReactInternalInstance } from '../../share';\n\nconst findDOMFromFiber = (fiber: MyReactFiberNode) => {\n  const currentArray = [fiber];\n  while (currentArray.length) {\n    const next = currentArray.shift();\n    if (next?.dom) return next.dom;\n    currentArray.push(...(next?.children || []));\n  }\n  return null;\n};\n\nconst findDOMFromComponentFiber = (fiber: MyReactFiberNode) => {\n  if (fiber) {\n    if (fiber.dom) return fiber.dom;\n    for (let i = 0; i < fiber.children.length; i++) {\n      const dom = findDOMFromFiber(fiber.children[i]);\n      if (dom) return dom;\n    }\n  }\n  return null;\n};\n\nexport const findDOMNode = (instance: MyReactInternalInstance) => {\n  if (instance instanceof MyReactComponent && instance.__fiber__) {\n    return findDOMFromComponentFiber(instance.__fiber__);\n  } else {\n    return null;\n  }\n};\n","import {\n  cannotUpdate,\n  enableAsyncUpdate,\n  globalDispatch,\n  globalLoop,\n  pendingModifyFiberArray,\n} from '../../share';\n\nimport type { MyReactFiberNode } from '../../fiber';\n\nconst updateEntry = () => {\n  if (globalLoop.current) return;\n  if (enableAsyncUpdate.current) {\n    globalDispatch.current.updateAllAsync();\n  } else {\n    globalDispatch.current.updateAllSync();\n  }\n};\n\nconst asyncUpdate = () => Promise.resolve().then(updateEntry);\n\nexport const triggerUpdate = (fiber: MyReactFiberNode) => {\n  const canUpdate = cannotUpdate();\n  if (canUpdate) {\n    fiber.triggerUpdate();\n    pendingModifyFiberArray.current.push(fiber);\n    asyncUpdate();\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const clearFiberDom = (fiber: MyReactFiberNode) => {\n  if (fiber.dom) {\n    if (!fiber.__isPortal__ && !fiber.__root__) {\n      fiber.dom?.remove();\n    } else {\n      fiber.children.forEach(clearFiberDom);\n    }\n  } else {\n    fiber.children.forEach(clearFiberDom);\n  }\n};\n","import { unmountFiber } from '../../../../fiber';\nimport { mapFiber } from '../../../../share';\n\nimport { clearFiberDom } from './clearFiberDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const _unmount = (fiber: MyReactFiberNode) => {\n  unmountFiber(fiber);\n  clearFiberDom(fiber);\n};\n\nexport const unmount = (fiber: MyReactFiberNode) => {\n  const allUnmountFiber = fiber.__unmountQueue__.slice(0);\n\n  if (allUnmountFiber.length) {\n    mapFiber(allUnmountFiber as MyReactFiberNode | MyReactFiberNode[], (f) =>\n      _unmount(f)\n    );\n  }\n\n  fiber.__unmountQueue__ = [];\n};\n","import { MyReactFiberNode } from '../../fiber';\nimport { _unmount } from '../client/dispatch/unmount';\n\nexport const unmountComponentAtNode = (\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  const fiber = container.__fiber__;\n  if (fiber instanceof MyReactFiberNode) {\n    _unmount(fiber);\n  }\n};\n","import { globalDispatch, pendingUpdateFiberListArray } from '../../share';\n\nexport const reconcileUpdate = () => {\n  const allPendingList = pendingUpdateFiberListArray.current.slice(0);\n\n  allPendingList.forEach((l) => globalDispatch.current.reconcileCreate(l));\n\n  allPendingList.forEach((l) => globalDispatch.current.reconcileUpdate(l));\n\n  pendingUpdateFiberListArray.current = [];\n};\n","import type { MyReactFiberNode } from '../../fiber';\n\nexport const getFiberWithDom = (\n  fiber: MyReactFiberNode | null,\n  transform: (f: MyReactFiberNode) => MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (fiber) {\n    if (fiber.dom) return fiber;\n    return getFiberWithDom(transform(fiber), transform);\n  }\n  return null;\n};\n","import {\n  isAppCrash,\n  pendingModifyTopLevelFiber,\n  pendingModifyFiberArray,\n  globalDispatch,\n} from '../../../share';\n\nimport type { MyReactFiberNode } from '../../../fiber';\n\nlet currentYield: MyReactFiberNode | null = null;\n\nexport const updateFiberController = {\n  setYield: (fiber: MyReactFiberNode | null) => {\n    if (fiber) {\n      currentYield = fiber;\n    } else {\n      currentYield = null;\n      globalDispatch.current.endProgressList();\n    }\n  },\n  getNext: () => {\n    if (isAppCrash.current) return null;\n    const yieldFiber = currentYield;\n    currentYield = null;\n    if (yieldFiber) return yieldFiber;\n    while (pendingModifyFiberArray.current.length) {\n      const newProgressFiber = pendingModifyFiberArray.current.shift();\n      if (newProgressFiber?.mount) {\n        globalDispatch.current.beginProgressList();\n        pendingModifyTopLevelFiber.current = newProgressFiber;\n        return newProgressFiber;\n      }\n    }\n    return null;\n  },\n  getUpdateList: (fiber: MyReactFiberNode) => {\n    globalDispatch.current.generateUpdateList(fiber);\n  },\n  hasNext: () => {\n    if (isAppCrash.current) return false;\n    return currentYield !== null || pendingModifyFiberArray.current.length > 0;\n  },\n  doesPause: () => currentYield !== null,\n};\n","import { updateLoopAsync, updateLoopSync } from '../../../core';\nimport { globalLoop, shouldPauseAsyncUpdate } from '../../../share';\nimport { reconcileUpdate } from '../../shared';\n\nimport { updateFiberController } from './tool';\n\nexport const updateAllSync = () => {\n  globalLoop.current = true;\n\n  updateLoopSync(updateFiberController, reconcileUpdate);\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllSync();\n    }\n  });\n};\n\nexport const updateAllAsync = () => {\n  globalLoop.current = true;\n\n  updateLoopAsync(\n    updateFiberController,\n    shouldPauseAsyncUpdate,\n    reconcileUpdate\n  );\n\n  globalLoop.current = false;\n\n  Promise.resolve().then(() => {\n    if (updateFiberController.hasNext()) {\n      updateAllAsync();\n    }\n  });\n};\n","import { IS_SINGLE_ELEMENT } from '../../../../share';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const append = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingAppend__) {\n    if (!fiber.dom || !parentFiberWithDom.dom)\n      throw new Error('append error, dom not exist');\n    const parentDom = parentFiberWithDom.dom as Element;\n    if (\n      !Object.prototype.hasOwnProperty.call(\n        IS_SINGLE_ELEMENT,\n        parentDom.tagName.toLowerCase()\n      )\n    ) {\n      parentDom.appendChild(fiber.dom);\n    }\n    fiber.__pendingAppend__ = false;\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const context = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingContext__) {\n    const allListeners = fiber.__dependence__.slice(0);\n    Promise.resolve().then(() => {\n      allListeners\n        .map((f) => f.__fiber__)\n        .forEach((f) => f?.mount && f.update());\n    });\n    fiber.__pendingContext__ = false;\n  }\n};\n","export const fallback = (dom: ChildNode | null) => {\n  const pendingRemove = [];\n  while (dom) {\n    pendingRemove.push(dom);\n    dom = dom.nextSibling;\n  }\n  pendingRemove.forEach((m) => m.remove());\n};\n","import { IS_SINGLE_ELEMENT, log } from '../../../../share';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\ntype HydrateDOM = Element & {\n  __hydrate__: boolean;\n};\n\nconst getNextHydrateDom = (parentDom: Element) => {\n  const children = Array.from(parentDom.childNodes);\n\n  return children.find(\n    (dom) =>\n      dom.nodeType !== document.COMMENT_NODE && !(dom as HydrateDOM).__hydrate__\n  );\n};\n\nconst checkHydrateDom = (fiber: MyReactFiberNode, dom?: ChildNode) => {\n  if (!dom) {\n    log({\n      fiber,\n      level: 'error',\n      message: 'hydrate error, dom not render from server',\n    });\n    return false;\n  }\n  if (fiber.__isTextNode__) {\n    if (dom.nodeType !== Node.TEXT_NODE) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${\n          fiber.element\n        }`,\n      });\n      return false;\n    }\n    return true;\n  }\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (dom.nodeType !== Node.ELEMENT_NODE) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${typedElement.type.toString()}`,\n      });\n      return false;\n    }\n    if (typedElement.type.toString() !== dom.nodeName.toLowerCase()) {\n      log({\n        fiber,\n        level: 'error',\n        message: `hydrate error, dom not match from server. server: ${dom.nodeName.toLowerCase()}, client: ${typedElement.type.toString()}`,\n      });\n      return false;\n    }\n    return true;\n  }\n  throw new Error('hydrate error, look like a bug');\n};\n\nexport const getHydrateDom = (fiber: MyReactFiberNode, parentDom: Element) => {\n  if (\n    Object.prototype.hasOwnProperty.call(\n      IS_SINGLE_ELEMENT,\n      parentDom.tagName.toLowerCase()\n    )\n  )\n    return { result: true };\n  const dom = getNextHydrateDom(parentDom);\n  const result = checkHydrateDom(fiber, dom);\n  if (result) {\n    const typedDom = dom as HydrateDOM;\n    typedDom.__hydrate__ = true;\n    fiber.dom = typedDom;\n    return { dom: typedDom, result };\n  } else {\n    return { dom, result };\n  }\n};\n","import { fallback } from './fallback';\nimport { getHydrateDom } from './getHydrateDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const hydrateCreate = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n): boolean => {\n  if (fiber.__isTextNode__ || fiber.__isPlainNode__) {\n    const { dom, result } = getHydrateDom(\n      fiber,\n      parentFiberWithDom.dom as Element\n    );\n    if (result) {\n      return true;\n    } else if (dom) {\n      fallback(dom);\n    }\n    return false;\n  }\n  throw new Error('hydrate error, portal element can not hydrate');\n};\n","import type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const nativeCreate = (fiber: MyReactFiberNode) => {\n  if (fiber.__isTextNode__) {\n    fiber.dom = document.createTextNode(fiber.element as string);\n  } else if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (fiber.nameSpace) {\n      fiber.dom = document.createElementNS(\n        fiber.nameSpace,\n        typedElement.type as string\n      );\n    } else {\n      fiber.dom = document.createElement(typedElement.type as string);\n    }\n  } else {\n    fiber.dom = fiber.__props__.container as Element;\n  }\n};\n","// for invalid dom structure\n\nimport { enableAllCheck, log } from '../../../../share';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\n// TODO\nexport const validDomNesting = (fiber: MyReactFiberNode) => {\n  if (!enableAllCheck.current) return;\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    if (typedElement.type === 'p') {\n      let parent = fiber.parent;\n      while (parent && parent.__isPlainNode__) {\n        const typedParentElement = parent.element as Children;\n        if (typedParentElement.type === 'p') {\n          log({\n            fiber,\n            level: 'warn',\n            triggerOnce: true,\n            message: `invalid dom nesting: <p> cannot appear as a child of <p>`,\n          });\n        }\n        parent = parent.parent;\n      }\n    }\n  }\n};\n","import { hydrateCreate } from './hydrateCreate';\nimport { nativeCreate } from './nativeCreate';\nimport { validDomNesting } from './validDomNesting';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const create = (\n  fiber: MyReactFiberNode,\n  hydrate: boolean,\n  parentFiberWithDom: MyReactFiberNode\n): boolean => {\n  if (fiber.__pendingCreate__) {\n    let re = false;\n    validDomNesting(fiber);\n    if (hydrate) {\n      const result = hydrateCreate(fiber, parentFiberWithDom);\n      if (!result) {\n        nativeCreate(fiber);\n      }\n      re = result;\n    } else {\n      nativeCreate(fiber);\n    }\n    fiber.__pendingCreate__ = false;\n    return re;\n  }\n  return hydrate;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const layoutEffect = (fiber: MyReactFiberNode) => {\n  const allLayoutEffect = fiber.__layoutEffectQueue__.slice(0);\n\n  allLayoutEffect.forEach((layoutEffect) => layoutEffect.call(null));\n\n  fiber.__layoutEffectQueue__ = [];\n};\n\nexport const effect = (fiber: MyReactFiberNode) => {\n  const allEffect = fiber.__effectQueue__.slice(0);\n\n  allEffect.forEach((effect) => effect.call(null));\n\n  fiber.__effectQueue__ = [];\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const append = (fiber: MyReactFiberNode, parentDOM: Element) => {\n  if (!fiber) throw new Error('position error, look like a bug');\n  fiber.__pendingAppend__ = false;\n  fiber.__pendingPosition__ = false;\n  if (fiber.__isPortal__) return;\n  if (fiber.__isPlainNode__ || fiber.__isTextNode__) {\n    parentDOM.appendChild(fiber.dom as Element);\n    return;\n  }\n  let child = fiber.child;\n  while (child) {\n    append(child, parentDOM);\n    child = child.sibling;\n  }\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const getFiberWithDom = (\n  fiber: MyReactFiberNode | null,\n  transform: (\n    f: MyReactFiberNode\n  ) => MyReactFiberNode | MyReactFiberNode[] | null = (f) => f.parent\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  if (fiber.__isPortal__) return null;\n  if (fiber.dom) return fiber;\n  const nextFibers = transform(fiber);\n  if (Array.isArray(nextFibers)) {\n    return nextFibers.reduce<MyReactFiberNode | null>((p, c) => {\n      if (p) return p;\n      p = getFiberWithDom(c, transform);\n      return p;\n    }, null);\n  } else {\n    return getFiberWithDom(nextFibers, transform);\n  }\n};\n","import { getFiberWithDom } from './getFiberWithDom';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst getInsertBeforeDomFromSibling = (\n  fiber: MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  const sibling = fiber.sibling;\n  if (sibling) {\n    return (\n      getFiberWithDom(sibling, (f) => f.children) ||\n      getInsertBeforeDomFromSibling(sibling)\n    );\n  } else {\n    return null;\n  }\n};\n\nexport const getInsertBeforeDomFromSiblingAndParent = (\n  fiber: MyReactFiberNode | null,\n  parentFiber: MyReactFiberNode | null\n): MyReactFiberNode | null => {\n  if (!fiber) return null;\n  if (fiber === parentFiber) return null;\n  const beforeDom = getInsertBeforeDomFromSibling(fiber);\n  if (beforeDom) return beforeDom;\n  return getInsertBeforeDomFromSiblingAndParent(\n    fiber.parent,\n    parentFiber\n  ) as MyReactFiberNode | null;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\nexport const insertBefore = (\n  fiber: MyReactFiberNode,\n  beforeDOM: Element,\n  parentDOM: Element\n) => {\n  if (!fiber) throw new Error('position error, look like a bug');\n  fiber.__pendingAppend__ = false;\n  fiber.__pendingPosition__ = false;\n  if (fiber.__isPortal__) return;\n  if (fiber.__isPlainNode__ || fiber.__isTextNode__) {\n    parentDOM.insertBefore(fiber.dom as Element, beforeDOM);\n    return;\n  }\n  let child = fiber.child;\n  while (child) {\n    insertBefore(child, beforeDOM, parentDOM);\n    child = child.sibling;\n  }\n  // fiber.children.forEach((f) => insertBefore(f, beforeDOM, parentDOM));\n};\n","import { append } from './append';\nimport { getInsertBeforeDomFromSiblingAndParent } from './getInsertBeforeDom';\nimport { insertBefore } from './insertBefore';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const position = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingPosition__) {\n    const beforeFiberWithDom = getInsertBeforeDomFromSiblingAndParent(\n      fiber,\n      parentFiberWithDom\n    );\n    if (beforeFiberWithDom) {\n      insertBefore(\n        fiber,\n        beforeFiberWithDom.dom as Element,\n        parentFiberWithDom.dom as Element\n      );\n    } else {\n      append(fiber, parentFiberWithDom.dom as Element);\n    }\n    fiber.__pendingPosition__ = false;\n  }\n};\n","export const getNativeEventName = (\n  eventName: string,\n  tagName: string,\n  props: Record<string, unknown>\n) => {\n  let isCapture = false;\n  let nativeName = eventName;\n  if (eventName.endsWith('Capture')) {\n    isCapture = true;\n    nativeName = eventName.split('Capture')[0];\n  }\n  if (nativeName === 'DoubleClick') {\n    nativeName = 'dblclick';\n  } else if (nativeName === 'Change') {\n    if (tagName === 'input') {\n      if (props.type === 'radio' || props.type === 'checkbox') {\n        nativeName = 'click';\n      } else {\n        nativeName = 'input';\n      }\n    } else {\n      nativeName = 'change';\n    }\n  } else {\n    nativeName = nativeName.toLowerCase();\n  }\n\n  return { nativeName, isCapture };\n};\n","import {\n  enableControlComponent,\n  enableEventSystem,\n  safeCallWithFiber,\n} from '../../../../share';\n\nimport { getNativeEventName } from './getEventName';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst controlElementTag: Record<string, boolean> = {\n  input: true,\n  // textarea: true,\n  // select: true,\n};\n\nexport const addEventListener = (\n  fiber: MyReactFiberNode,\n  dom: Element,\n  key: string\n) => {\n  const typedElement = fiber.element as Children;\n  const callback = typedElement.props[key] as (...args: any[]) => void;\n  const { nativeName, isCapture } = getNativeEventName(\n    key.slice(2),\n    typedElement.type as string,\n    typedElement.props\n  );\n  if (enableEventSystem.current) {\n    const eventState = fiber.__internal_node_event__;\n    const eventName = `${nativeName}_${isCapture}`;\n    if (eventState[eventName]) {\n      eventState[eventName].cb?.push(callback);\n    } else {\n      const handler: ((...args: any[]) => void) & { cb?: any[] } = (\n        ...args: any[]\n      ) => {\n        const e = args[0];\n        e.nativeEvent = e;\n        safeCallWithFiber({\n          action: () =>\n            handler.cb?.forEach(\n              (cb) => typeof cb === 'function' && cb.call(null, ...args)\n            ),\n          fiber,\n        });\n        if (enableControlComponent) {\n          if (\n            controlElementTag[typedElement.type as string] &&\n            typeof typedElement.props['value'] !== 'undefined'\n          ) {\n            (dom as unknown as HTMLInputElement)['value'] = typedElement.props[\n              'value'\n            ] as string;\n            dom.setAttribute('value', typedElement.props['value'] as string);\n          }\n        }\n      };\n      handler.cb = [callback];\n      eventState[eventName] = handler;\n      dom.addEventListener(nativeName, handler, isCapture);\n    }\n  } else {\n    dom.addEventListener(nativeName, callback, isCapture);\n  }\n};\n","import { enableEventSystem } from '../../../../share';\n\nimport { getNativeEventName } from './getEventName';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const removeEventListener = (\n  fiber: MyReactFiberNode,\n  dom: Element,\n  key: string\n) => {\n  const typedElement = fiber.__prevVdom__ as Children;\n  const callback = typedElement.props[key] as (...args: any[]) => void;\n  const { nativeName, isCapture } = getNativeEventName(\n    key.slice(2),\n    typedElement.type as string,\n    typedElement.props\n  );\n  if (enableEventSystem.current) {\n    const eventState = fiber.__internal_node_event__;\n    const eventName = `${nativeName}_${isCapture}`;\n    if (!eventState[eventName]) return;\n    eventState[eventName].cb = eventState[eventName].cb?.filter(\n      (c) => c !== callback || typeof c !== 'function'\n    );\n  } else {\n    dom.removeEventListener(nativeName, callback, isCapture);\n  }\n};\n","import { debugWithDOM, IS_UNIT_LESS_NUMBER, log } from '../../../../share';\nimport { isEvent, isProperty, isStyle } from '../../../shared';\nimport { addEventListener } from '../event';\n\nimport type { Children } from '../../../../element';\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nconst domPropsHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isTextNode__) {\n    if (dom.textContent !== String(fiber.element)) {\n      if (dom.textContent === ' ' && fiber.element === '') {\n        dom.textContent = '';\n      } else {\n        log({\n          fiber,\n          message: `hydrate warning, text not match from server. server: ${dom.textContent}, client: ${fiber.element}`,\n        });\n        dom.textContent = fiber.element as string;\n      }\n    }\n  } else if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isProperty)\n      .forEach((key) => {\n        if (\n          props[key] !== null &&\n          props[key] !== false &&\n          props[key] !== undefined\n        ) {\n          if (key === 'className') {\n            if (fiber.nameSpace) {\n              const v = dom.getAttribute('class')?.toString();\n              if (v !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} not match from server. server: ${v}, client: ${props[key]}`,\n                });\n                dom.setAttribute('class', props[key] as string);\n              }\n            } else {\n              if (dom[key].toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} not match from server. server: ${dom[key]}, client: ${props[key]}`,\n                });\n                dom[key] == (props[key] as string);\n              }\n            }\n          } else {\n            if (key in dom && !fiber.nameSpace) {\n              if ((dom as any)[key].toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${key} props not match from server. server: ${\n                    (dom as any)[key]\n                  }, client: ${props[key]}`,\n                });\n                (dom as any)[key] = props[key] as string;\n              }\n            } else {\n              const v = dom.getAttribute(key);\n              if (v?.toString() !== String(props[key])) {\n                log({\n                  fiber,\n                  message: `hydrate warning, dom ${v} attr not match from server. server: ${v}, client: ${props[key]}`,\n                });\n                dom.setAttribute(key, props[key] as string);\n              }\n            }\n          }\n        }\n      });\n  }\n};\n\nconst domStyleHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        const typedProps = (props[styleKey] as Record<string, unknown>) || {};\n        Object.keys(typedProps).forEach((styleName) => {\n          if (\n            Object.prototype.hasOwnProperty.call(\n              IS_UNIT_LESS_NUMBER,\n              styleName\n            ) &&\n            typeof typedProps[styleName] === 'number'\n          ) {\n            (dom as any)[styleKey][styleName] = `${typedProps[styleName]}px`;\n            return;\n          }\n          if (\n            typedProps[styleName] !== null &&\n            typedProps[styleName] !== undefined\n          ) {\n            (dom as any)[styleKey][styleName] = typedProps[styleName];\n          }\n        });\n      });\n  }\n};\n\nconst domEventHydrate = (fiber: MyReactFiberNode, dom: Element) => {\n  if (fiber.__isPlainNode__) {\n    const typedElement = fiber.element as Children;\n    const props = typedElement.props;\n    Object.keys(props)\n      .filter(isEvent)\n      .forEach((key) => {\n        addEventListener(fiber, dom, key);\n      });\n  }\n};\n\nexport const hydrateUpdate = (fiber: MyReactFiberNode) => {\n  const dom = fiber.dom as Element;\n\n  // for now it is necessary to judge\n  if (dom) {\n    domPropsHydrate(fiber, dom);\n    domStyleHydrate(fiber, dom);\n    domEventHydrate(fiber, dom);\n\n    debugWithDOM(fiber);\n  }\n\n  fiber.__pendingCreate__ = false;\n\n  fiber.__pendingUpdate__ = false;\n\n  fiber.__pendingAppend__ = false;\n\n  fiber.__pendingPosition__ = false;\n};\n","import type { MyReactFiberNode } from '../../../../fiber';\n\ntype HighlightDOM = HTMLElement & {\n  __pendingHighLight__: boolean;\n};\n\nexport class HighLight {\n  /**\n   * @type HighLight\n   */\n  static instance: HighLight | undefined = undefined;\n\n  /**\n   *\n   * @returns HighLight\n   */\n  static getHighLightInstance = () => {\n    HighLight.instance = HighLight.instance || new HighLight();\n    return HighLight.instance;\n  };\n\n  map: HTMLElement[] = [];\n\n  container: HTMLElement | null = null;\n\n  range = document.createRange();\n\n  __pendingUpdate__: MyReactFiberNode[] = [];\n\n  constructor() {\n    this.container = document.createElement('div');\n    this.container.style.cssText = `\n      position: absolute;\n      z-index: 999999;\n      width: 100%;\n      left: 0;\n      top: 0;\n      pointer-events: none;\n      `;\n    document.body.append(this.container);\n  }\n\n  createHighLight = () => {\n    const element = document.createElement('div');\n    this.container?.append(element);\n    return element;\n  };\n\n  getHighLight = () => {\n    if (this.map.length > 0) {\n      return this.map.shift() as HTMLElement;\n    }\n    return this.createHighLight();\n  };\n\n  highLight = (fiber: MyReactFiberNode) => {\n    if (fiber.dom) {\n      const typedDom = fiber.dom as HighlightDOM;\n      if (!typedDom.__pendingHighLight__) {\n        typedDom.__pendingHighLight__ = true;\n        this.startHighLight(fiber);\n      }\n    }\n  };\n\n  startHighLight = (fiber: MyReactFiberNode) => {\n    this.__pendingUpdate__.push(fiber);\n    this.flashPending();\n  };\n\n  flashPending = () => {\n    Promise.resolve().then(() => {\n      const allFiber = this.__pendingUpdate__.slice(0);\n      this.__pendingUpdate__ = [];\n      const allWrapper: HTMLElement[] = [];\n      allFiber.forEach((f) => {\n        const wrapperDom = this.getHighLight();\n        allWrapper.push(wrapperDom);\n        f.__isTextNode__\n          ? this.range.selectNodeContents(f.dom as Text)\n          : this.range.selectNode(f.dom as HTMLElement);\n        const rect = this.range.getBoundingClientRect();\n        const left = rect.left + (document.scrollingElement?.scrollLeft || 0);\n        const top = rect.top + (document.scrollingElement?.scrollTop || 0);\n        const width = rect.width + 4;\n        const height = rect.height + 4;\n        const positionLeft = left - 2;\n        const positionTop = top - 2;\n        wrapperDom.style.cssText = `\n          position: absolute;\n          width: ${width}px;\n          height: ${height}px;\n          left: ${positionLeft}px;\n          top: ${positionTop}px;\n          pointer-events: none;\n          box-shadow: 0.0625rem 0.0625rem 0.0625rem red, -0.0625rem -0.0625rem 0.0625rem red;\n          `;\n      });\n      setTimeout(() => {\n        allWrapper.forEach((wrapperDom) => {\n          wrapperDom.style.boxShadow = 'none';\n          this.map.push(wrapperDom);\n        });\n        allFiber.forEach(\n          (f) => ((f.dom as HighlightDOM).__pendingHighLight__ = false)\n        );\n      }, 100);\n    });\n  };\n}\n","import {\n  debugWithDOM,\n  enableHighlight,\n  isAppMounted,\n  isHydrateRender,\n  isServerRender,\n  IS_UNIT_LESS_NUMBER,\n} from '../../../../share';\nimport { isEvent, isGone, isNew, isProperty, isStyle } from '../../../shared';\nimport { addEventListener, removeEventListener } from '../event';\n\nimport { HighLight } from './highlight';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const nativeUpdate = (fiber: MyReactFiberNode) => {\n  if (!fiber.dom) throw new Error('update error, dom not exist');\n  if (fiber.__isTextNode__) {\n    if (fiber.__vdom__ !== fiber.__prevVdom__) {\n      fiber.dom.textContent = fiber.element as string;\n    }\n  } else {\n    const dom = fiber.dom as HTMLElement;\n    const oldProps = fiber.__prevProps__ || {};\n    const newProps = fiber.__props__ || {};\n    Object.keys(oldProps)\n      .filter(isEvent)\n      .filter((key) => isGone(newProps)(key) || isNew(oldProps, newProps)(key))\n      .forEach((key) => removeEventListener(fiber, dom, key));\n    Object.keys(oldProps)\n      .filter(isProperty)\n      .filter(isGone(newProps))\n      .forEach((key) => {\n        if (key === 'className') {\n          if (fiber.nameSpace) {\n            dom.removeAttribute('class');\n          } else {\n            dom[key] = '';\n          }\n        } else {\n          if (key in dom && !fiber.nameSpace) {\n            (dom as any)[key] = '';\n          } else {\n            dom.removeAttribute(key);\n          }\n        }\n      });\n    Object.keys(oldProps)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        Object.keys((oldProps[styleKey] as Record<string, unknown>) || {})\n          .filter(isGone((newProps[styleKey] as Record<string, unknown>) || {}))\n          .forEach((styleName) => {\n            (dom.style as any)[styleName] = '';\n          });\n      });\n    Object.keys(newProps)\n      .filter(isEvent)\n      .filter(isNew(oldProps, newProps))\n      .forEach((key) => addEventListener(fiber, dom, key));\n    Object.keys(newProps)\n      .filter(isProperty)\n      .filter(isNew(oldProps, newProps))\n      .forEach((key) => {\n        if (key === 'className') {\n          if (fiber.nameSpace) {\n            dom.setAttribute('class', (newProps[key] as string) || '');\n          } else {\n            dom[key] = (newProps[key] as string) || '';\n          }\n        } else {\n          if (key in dom && !fiber.nameSpace) {\n            if (\n              newProps[key] !== null &&\n              newProps[key] !== false &&\n              newProps[key] !== undefined\n            ) {\n              (dom as any)[key] = newProps[key];\n            } else {\n              (dom as any)[key] = '';\n            }\n          } else {\n            if (\n              newProps[key] !== null &&\n              newProps[key] !== false &&\n              newProps[key] !== undefined\n            ) {\n              dom.setAttribute(key, String(newProps[key]));\n            } else {\n              dom.removeAttribute(key);\n            }\n          }\n          if ((key === 'autofocus' || key === 'autoFocus') && newProps[key]) {\n            Promise.resolve().then(() => dom.focus());\n          }\n        }\n      });\n    Object.keys(newProps)\n      .filter(isStyle)\n      .forEach((styleKey) => {\n        const typedNewProps = newProps[styleKey] as Record<string, unknown>;\n        const typedOldProps = oldProps[styleKey] as Record<string, unknown>;\n        Object.keys(typedNewProps || {})\n          .filter(isNew(typedOldProps || {}, typedNewProps))\n          .forEach((styleName) => {\n            if (\n              !Object.prototype.hasOwnProperty.call(\n                IS_UNIT_LESS_NUMBER,\n                styleName\n              ) &&\n              typeof typedNewProps[styleName] === 'number'\n            ) {\n              (dom as any)[styleKey][\n                styleName\n              ] = `${typedNewProps[styleName]}px`;\n              return;\n            }\n            if (\n              typedNewProps[styleName] !== null &&\n              typedNewProps[styleName] !== undefined\n            ) {\n              (dom as any)[styleKey][styleName] = typedNewProps[styleName];\n            } else {\n              (dom as any)[styleKey][styleName] = '';\n            }\n          });\n      });\n    if (\n      newProps['dangerouslySetInnerHTML'] &&\n      newProps['dangerouslySetInnerHTML'] !==\n        oldProps['dangerouslySetInnerHTML']\n    ) {\n      const typedProps = newProps['dangerouslySetInnerHTML'] as Record<\n        string,\n        unknown\n      >;\n      dom.innerHTML = typedProps.__html as string;\n    }\n  }\n\n  debugWithDOM(fiber);\n\n  fiber.applyVDom();\n\n  if (\n    isAppMounted.current &&\n    !isHydrateRender.current &&\n    !isServerRender.current &&\n    (enableHighlight.current || (window as any).__highlight__)\n  ) {\n    HighLight.getHighLightInstance().highLight(fiber);\n  }\n};\n","import { hydrateUpdate } from './hydrateUpdate';\nimport { nativeUpdate } from './nativeUpdate';\n\nimport type { MyReactFiberNode } from '../../../../fiber';\n\nexport const update = (fiber: MyReactFiberNode, hydrate: boolean) => {\n  if (fiber.__pendingUpdate__) {\n    if (hydrate) {\n      hydrateUpdate(fiber);\n    } else {\n      nativeUpdate(fiber);\n    }\n    fiber.__pendingUpdate__ = false;\n  }\n};\n","import {\n  safeCallWithFiber,\n  pendingUpdateFiberList,\n  LinkTreeList,\n  pendingUpdateFiberListArray,\n} from '../../../share';\nimport { getFiberWithDom, triggerUpdate } from '../../shared';\nimport { updateAllAsync, updateAllSync } from '../update';\n\nimport { append } from './append';\nimport { context } from './context';\nimport { create } from './create';\nimport { effect, layoutEffect } from './effect';\nimport { position } from './position';\nimport { unmount } from './unmount';\nimport { update } from './update';\n\nimport type { FiberDispatch } from '../../../dispatch';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport class ClientDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    triggerUpdate(_fiber);\n  }\n  beginProgressList(): void {\n    pendingUpdateFiberList.current = new LinkTreeList();\n  }\n  endProgressList(): void {\n    if (pendingUpdateFiberList.current?.length) {\n      pendingUpdateFiberListArray.current.push(pendingUpdateFiberList.current);\n    }\n    pendingUpdateFiberList.current = null;\n  }\n  generateUpdateList(_fiber: MyReactFiberNode): void {\n    if (_fiber) {\n      if (pendingUpdateFiberList.current) {\n        if (\n          _fiber.__pendingCreate__ ||\n          _fiber.__pendingUpdate__ ||\n          _fiber.__pendingAppend__ ||\n          _fiber.__pendingContext__ ||\n          _fiber.__pendingPosition__ ||\n          _fiber.__effectQueue__.length ||\n          _fiber.__unmountQueue__.length ||\n          _fiber.__layoutEffectQueue__.length\n        ) {\n          pendingUpdateFiberList.current.append(_fiber, _fiber.fiberIndex);\n        }\n      } else {\n        throw new Error('error');\n      }\n    }\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    const _result = safeCallWithFiber({\n      fiber: _fiber,\n      action: () => create(_fiber, _hydrate, _parentFiberWithDom),\n    });\n\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => update(_fiber, _result),\n    });\n\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => append(_fiber, _parentFiberWithDom),\n    });\n\n    let _final = _hydrate;\n\n    if (_fiber.child) {\n      _final = this.reconcileCommit(\n        _fiber.child,\n        _result,\n        _fiber.dom ? _fiber : _parentFiberWithDom\n      );\n    }\n\n    safeCallWithFiber({ fiber: _fiber, action: () => layoutEffect(_fiber) });\n\n    Promise.resolve().then(() =>\n      safeCallWithFiber({ fiber: _fiber, action: () => effect(_fiber) })\n    );\n\n    if (_fiber.sibling) {\n      this.reconcileCommit(\n        _fiber.sibling,\n        _fiber.dom ? _result : _final,\n        _parentFiberWithDom\n      );\n    }\n\n    if (_fiber.dom) {\n      return _result;\n    } else {\n      return _final;\n    }\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    _list.listToFoot((_fiber) => {\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => create(_fiber, false, _fiber),\n      });\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => update(_fiber, false),\n      });\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => unmount(_fiber),\n      });\n\n      safeCallWithFiber({ fiber: _fiber, action: () => context(_fiber) });\n    });\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    _list.listToHead((_fiber) => {\n      const _parentFiberWithDom = getFiberWithDom(\n        _fiber.parent,\n        (f) => f.parent\n      ) as MyReactFiberNode;\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => position(_fiber, _parentFiberWithDom),\n      });\n    });\n\n    _list.listToFoot((_fiber) => {\n      const _parentFiberWithDom = getFiberWithDom(\n        _fiber.parent,\n        (f) => f.parent\n      ) as MyReactFiberNode;\n\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => append(_fiber, _parentFiberWithDom),\n      });\n    });\n\n    _list.reconcile((_fiber) => {\n      safeCallWithFiber({\n        fiber: _fiber,\n        action: () => layoutEffect(_fiber),\n      });\n\n      Promise.resolve().then(() =>\n        safeCallWithFiber({ fiber: _fiber, action: () => effect(_fiber) })\n      );\n    });\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    if (\n      !_fiber.__isTextNode__ &&\n      !_fiber.__isPlainNode__ &&\n      !_fiber.__isPortal__\n    )\n      return;\n    _fiber.__pendingCreate__ = true;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingUpdate__ = true;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingAppend__ = true;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    _fiber.__pendingContext__ = true;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    _fiber.__pendingPosition__ = true;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    _fiber.__unmountQueue__.push(_pendingUnmount);\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    _fiber.__layoutEffectQueue__.push(_layoutEffect);\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    _fiber.__effectQueue__.push(_effect);\n  }\n  updateAllSync(): void {\n    updateAllSync();\n  }\n  updateAllAsync(): void {\n    updateAllAsync();\n  }\n}\n","import { createFiberNode, MyReactFiberNode } from '../../../fiber';\nimport {\n  globalDispatch,\n  isAppCrash,\n  rootContainer,\n  rootFiber,\n} from '../../../share';\nimport { startRender, unmountComponentAtNode } from '../../shared';\nimport { ClientDispatch } from '../dispatch';\n\nimport type { Children } from '../../../element';\n\nexport const render = (\n  element: Children,\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  globalDispatch.current = new ClientDispatch();\n\n  isAppCrash.current = false;\n\n  const containerFiber = container.__fiber__;\n  if (containerFiber instanceof MyReactFiberNode) {\n    if (containerFiber.checkIsSameType(element)) {\n      containerFiber.installVDom(element);\n      containerFiber.update();\n      return;\n    } else {\n      unmountComponentAtNode(container);\n    }\n  }\n  Array.from(container.children).forEach((n) => n.remove?.());\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  container.setAttribute?.('render', 'MyReact');\n\n  container.__fiber__ = fiber;\n\n  startRender(fiber);\n};\n","import { createFiberNode } from '../../../fiber';\nimport {\n  globalDispatch,\n  isHydrateRender,\n  rootContainer,\n  rootFiber,\n} from '../../../share';\nimport { startRender } from '../../shared';\nimport { ClientDispatch } from '../dispatch';\n\nimport type { Children } from '../../../element';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const hydrate = (\n  element: Children,\n  container: Element & { __fiber__: MyReactFiberNode }\n) => {\n  globalDispatch.current = new ClientDispatch();\n\n  isHydrateRender.current = true;\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  container.setAttribute?.('hydrate', 'MyReact');\n\n  container.__fiber__ = fiber;\n\n  startRender(fiber, true);\n\n  isHydrateRender.current = false;\n};\n","import type { MyReactFiberNode } from '../../../fiber';\n\nexport const append = (\n  fiber: MyReactFiberNode,\n  parentFiberWithDom: MyReactFiberNode\n) => {\n  if (fiber.__pendingAppend__) {\n    if (!fiber.dom || !parentFiberWithDom.dom) throw new Error('append error');\n    const parentDom = parentFiberWithDom.dom as Element;\n    if (fiber.dom) {\n      parentDom.appendChild(fiber.dom);\n    }\n    fiber.__pendingAppend__ = false;\n  }\n};\n","export class TextElement {\n  content = '';\n  constructor(content: string) {\n    this.content = content === '' ? ' ' : content;\n  }\n\n  toString() {\n    return this.content.toString();\n  }\n}\n","import { IS_SINGLE_ELEMENT } from '../../../share';\n\nimport { TextElement } from './text';\n\nexport class PlainElement {\n  type: string;\n  className: string | null = null;\n  // attrs\n  style: Record<string, string | null | undefined> = {};\n  attrs: Record<string, string | boolean | null | undefined> = {};\n  children: Array<TextElement | PlainElement | string> = [];\n  constructor(type: string) {\n    this.type = type;\n  }\n\n  addEventListener() {\n    void 0;\n  }\n\n  removeEventListener() {\n    void 0;\n  }\n\n  removeAttribute(key: string) {\n    delete this.attrs[key];\n  }\n  setAttribute(\n    key: string,\n    value: string | boolean | null | undefined | number\n  ) {\n    if (value !== false && value !== null && value !== undefined) {\n      this.attrs[key] = value.toString();\n    }\n  }\n\n  /**\n   *\n   * @param {Element} dom\n   */\n  append(...dom: Array<TextElement | PlainElement>) {\n    dom.forEach((d) => this.appendChild(d));\n  }\n\n  appendChild(dom: PlainElement | TextElement | string) {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type))\n      return;\n    if (\n      dom instanceof PlainElement ||\n      dom instanceof TextElement ||\n      typeof dom === 'string'\n    ) {\n      this.children.push(dom);\n      return dom;\n    } else {\n      throw new Error('element instance error');\n    }\n  }\n\n  serializeStyle() {\n    const styleKeys = Object.keys(this.style).filter(\n      (key) => this.style[key] !== null && this.style[key] !== undefined\n    );\n    if (styleKeys.length) {\n      return `style=\"${styleKeys\n        .map((key) => `${key}: ${this.style[key]?.toString()};`)\n        .reduce((p, c) => p + c, '')}\"`;\n    }\n    return '';\n  }\n\n  serializeAttrs() {\n    const attrsKeys = Object.keys(this.attrs);\n    if (attrsKeys.length) {\n      return attrsKeys\n        .map((key) => `${key}='${this.attrs[key]?.toString()}'`)\n        .reduce((p, c) => `${p} ${c}`, '');\n    } else {\n      return '';\n    }\n  }\n\n  serializeProps() {\n    let props = '';\n    if (this.className !== undefined && this.className !== null) {\n      props += ` class=\"${this.className}\"`;\n    }\n    return props;\n  }\n\n  serialize() {\n    return `${this.serializeProps()} ${this.serializeStyle()} ${this.serializeAttrs()}`;\n  }\n\n  toString(): string {\n    if (Object.prototype.hasOwnProperty.call(IS_SINGLE_ELEMENT, this.type)) {\n      return `<${this.type} ${this.serialize()} />`;\n    } else {\n      if (this.type) {\n        return `<${this.type} ${this.serialize()} >${this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (\n              p.length &&\n              c instanceof TextElement &&\n              p[p.length - 1] instanceof TextElement\n            ) {\n              p.push('<!-- -->');\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, '')}</${this.type}>`;\n      } else {\n        return this.children\n          .reduce<Array<TextElement | string | PlainElement>>((p, c) => {\n            if (\n              p.length &&\n              c instanceof TextElement &&\n              p[p.length - 1] instanceof TextElement\n            ) {\n              p.push('<!-- -->');\n              p.push(c);\n            } else {\n              p.push(c);\n            }\n            return p;\n          }, [])\n          .map((dom) => dom.toString())\n          .reduce((p, c) => p + c, '');\n      }\n    }\n  }\n}\n","import { PlainElement } from './plain';\nimport { TextElement } from './text';\n\nimport type { Children } from '../../../element';\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const create = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingCreate__) {\n    if (fiber.__isTextNode__) {\n      fiber.dom = new TextElement(\n        fiber.element as string\n      ) as unknown as Element;\n    } else if (fiber.__isPlainNode__) {\n      const typedElement = fiber.element as Children;\n      fiber.dom = new PlainElement(\n        typedElement.type as string\n      ) as unknown as Element;\n    } else {\n      throw new Error('createPortal() can not call on the server');\n    }\n    fiber.__pendingCreate__ = false;\n  }\n};\n","import { IS_UNIT_LESS_NUMBER } from '../../../share';\nimport { isProperty, isStyle } from '../../shared';\n\nimport type { MyReactFiberNode } from '../../../fiber';\n\nexport const update = (fiber: MyReactFiberNode) => {\n  if (fiber.__pendingUpdate__) {\n    if (fiber.__isPlainNode__) {\n      const dom = fiber.dom as HTMLElement;\n      const props = fiber.__props__ || {};\n      Object.keys(props)\n        .filter(isProperty)\n        .forEach((key) => {\n          if (key === 'className') {\n            dom[key] = props[key] as string;\n          } else {\n            dom.setAttribute(key, props[key] as string);\n          }\n        });\n      Object.keys(props)\n        .filter(isStyle)\n        .forEach((styleKey) => {\n          const typedProps = (props[styleKey] as Record<string, unknown>) || {};\n          Object.keys(typedProps).forEach((styleName) => {\n            if (\n              !Object.prototype.hasOwnProperty.call(\n                IS_UNIT_LESS_NUMBER,\n                styleName\n              ) &&\n              typeof typedProps[styleName] === 'number'\n            ) {\n              (dom as any)[styleKey][styleName] = `${typedProps[styleName]}px`;\n              return;\n            }\n            (dom as any)[styleKey][styleName] = typedProps[styleName];\n          });\n        });\n      if (props['dangerouslySetInnerHTML']) {\n        const typedProps = props['dangerouslySetInnerHTML'] as Record<\n          string,\n          unknown\n        >;\n        dom.append(typedProps.__html as string);\n      }\n    }\n    fiber.__pendingUpdate__ = false;\n  }\n};\n","import { safeCallWithFiber } from '../../share';\n\nimport { append, create, update } from './dom';\n\nimport type { FiberDispatch } from '../../dispatch';\nimport type { MyReactFiberNode } from '../../fiber';\nimport type { LinkTreeList } from '../../share';\n\nexport class ServerDispatch implements FiberDispatch {\n  trigger(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  reconcileCommit(\n    _fiber: MyReactFiberNode,\n    _hydrate: boolean,\n    _parentFiberWithDom: MyReactFiberNode\n  ): boolean {\n    safeCallWithFiber({ fiber: _fiber, action: () => create(_fiber) });\n    safeCallWithFiber({ fiber: _fiber, action: () => update(_fiber) });\n    safeCallWithFiber({\n      fiber: _fiber,\n      action: () => append(_fiber, _parentFiberWithDom),\n    });\n    if (_fiber.child) {\n      this.reconcileCommit(\n        _fiber.child,\n        _hydrate,\n        _fiber.dom ? _fiber : _parentFiberWithDom\n      );\n    }\n    if (_fiber.sibling) {\n      this.reconcileCommit(_fiber.sibling, _hydrate, _parentFiberWithDom);\n    }\n    return true;\n  }\n  reconcileCreate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  reconcileUpdate(_list: LinkTreeList<MyReactFiberNode>): void {\n    void 0;\n  }\n  beginProgressList(): void {\n    void 0;\n  }\n  endProgressList(): void {\n    void 0;\n  }\n  generateUpdateList(\n    _fiber: MyReactFiberNode | MyReactFiberNode[] | null\n  ): void {\n    void 0;\n  }\n  pendingCreate(_fiber: MyReactFiberNode): void {\n    if (_fiber.__isPortal__) {\n      throw new Error('should not use portal element on the server');\n    }\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingCreate__ = true;\n  }\n  pendingUpdate(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingUpdate__ = true;\n  }\n  pendingAppend(_fiber: MyReactFiberNode): void {\n    if (!_fiber.__isTextNode__ && !_fiber.__isPlainNode__) return;\n    _fiber.__pendingAppend__ = true;\n  }\n  pendingContext(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingPosition(_fiber: MyReactFiberNode): void {\n    void 0;\n  }\n  pendingUnmount(\n    _fiber: MyReactFiberNode,\n    _pendingUnmount: MyReactFiberNode | MyReactFiberNode[]\n  ): void {\n    void 0;\n  }\n  pendingLayoutEffect(\n    _fiber: MyReactFiberNode,\n    _layoutEffect: () => void\n  ): void {\n    void 0;\n  }\n  pendingEffect(_fiber: MyReactFiberNode, _effect: () => void): void {\n    void 0;\n  }\n  updateAllSync(): void {\n    void 0;\n  }\n  updateAllAsync(): void {\n    void 0;\n  }\n}\n","import { createFiberNode } from '../../fiber';\nimport {\n  globalDispatch,\n  isServerRender,\n  rootContainer,\n  rootFiber,\n} from '../../share';\nimport { startRender } from '../shared';\n\nimport { ServerDispatch } from './dispatch';\nimport { PlainElement } from './dom';\n\nimport type { Children } from '../../element';\n\n// TODO should create global scope for every render\nexport const renderToString = (element: Children) => {\n  globalDispatch.current = new ServerDispatch();\n\n  isServerRender.current = true;\n\n  const container = new PlainElement('');\n\n  const fiber = createFiberNode({ fiberIndex: 0, parent: null }, element);\n\n  fiber.dom = container as unknown as Element;\n\n  fiber.__root__ = true;\n\n  rootFiber.current = fiber;\n\n  rootContainer.current = container;\n\n  startRender(fiber, false);\n\n  isServerRender.current = false;\n\n  return container.toString();\n};\n","import { getContextFiber, getContextValue } from '../fiber';\nimport { MyReactInternalInstance, isArrayEquals } from '../share';\n\nimport type { HookUpdateQueue } from '../fiber';\n\nexport type HOOK_TYPE =\n  | 'useRef'\n  | 'useMemo'\n  | 'useState'\n  | 'useEffect'\n  | 'useContext'\n  | 'useReducer'\n  | 'useCallback'\n  | 'useDebugValue'\n  | 'useLayoutEffect'\n  | 'useImperativeHandle';\n\nexport type Action = (s: any) => any | { type: string; payload: any };\n\nexport type Reducer = (state?: any, action?: Action) => any;\n\nexport class MyReactHookNode extends MyReactInternalInstance {\n  hookIndex = 0;\n\n  hookNext: MyReactHookNode | null = null;\n\n  hookPrev: MyReactHookNode | null = null;\n\n  hookType: HOOK_TYPE | null = null;\n\n  cancel: (() => void) | null = null;\n\n  effect = false;\n\n  value: any = null;\n\n  reducer: Reducer;\n\n  deps: any[] = [];\n\n  result: any = null;\n\n  constructor(\n    hookIndex: number,\n    hookType: HOOK_TYPE,\n    value: any,\n    reducer: Reducer,\n    deps: any[]\n  ) {\n    super();\n    this.deps = deps;\n    this.value = value;\n    this.reducer = reducer;\n    this.hookType = hookType;\n    this.hookIndex = hookIndex;\n  }\n\n  initialResult() {\n    if (\n      this.hookType === 'useMemo' ||\n      this.hookType === 'useState' ||\n      this.hookType === 'useReducer'\n    ) {\n      this.result = this.value.call(null);\n      return;\n    }\n\n    if (\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      this.effect = true;\n      return;\n    }\n\n    if (this.hookType === 'useRef' || this.hookType === 'useCallback') {\n      this.result = this.value;\n      return;\n    }\n\n    if (this.hookType === 'useContext') {\n      const ProviderFiber = getContextFiber(this.__fiber__, this.value);\n      this.setContext(ProviderFiber);\n      this.result = getContextValue(ProviderFiber, this.value);\n      return;\n    }\n  }\n\n  updateResult(newValue: any, newReducer: Reducer, newDeps: any[]) {\n    if (\n      this.hookType === 'useMemo' ||\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useCallback' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      if (newDeps && !this.deps) {\n        throw new Error('deps state change');\n      }\n      if (!newDeps && this.deps) {\n        throw new Error('deps state change');\n      }\n    }\n\n    if (\n      this.hookType === 'useEffect' ||\n      this.hookType === 'useLayoutEffect' ||\n      this.hookType === 'useImperativeHandle'\n    ) {\n      if (!newDeps) {\n        this.value = newValue;\n        this.reducer = newReducer || this.reducer;\n        this.deps = newDeps;\n        this.effect = true;\n      } else if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.reducer = newReducer || this.reducer;\n        this.deps = newDeps;\n        this.effect = true;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useCallback') {\n      if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.result = newValue;\n        this.deps = newDeps;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useMemo') {\n      if (!isArrayEquals(this.deps, newDeps)) {\n        this.value = newValue;\n        this.result = newValue.call(null);\n        this.deps = newDeps;\n      }\n      return;\n    }\n\n    if (this.hookType === 'useContext') {\n      if (\n        !this.__context__ ||\n        !this.__context__.mount ||\n        !Object.is(this.value, newValue)\n      ) {\n        this.value = newValue;\n        const ProviderFiber = getContextFiber(this.__fiber__, this.value);\n        this.setContext(ProviderFiber);\n        this.result = getContextValue(ProviderFiber, this.value);\n      } else {\n        this.result = getContextValue(this.__context__, this.value);\n      }\n      return;\n    }\n\n    if (this.hookType === 'useReducer') {\n      this.value = newValue;\n      this.reducer = newReducer;\n    }\n  }\n\n  unmount() {\n    if (this.hookType === 'useEffect' || this.hookType === 'useLayoutEffect') {\n      this.effect = false;\n      this.cancel && this.cancel();\n      return;\n    }\n    if (this.hookType === 'useContext') {\n      this.__context__?.removeDependence(this);\n    }\n  }\n\n  dispatch = (action: Action) => {\n    const updater: HookUpdateQueue = {\n      type: 'hook',\n      trigger: this,\n      action,\n    };\n\n    this.__fiber__?.__hookUpdateQueue__.push(updater);\n\n    Promise.resolve().then(() => {\n      this.__fiber__?.update();\n    });\n  };\n}\n","import { globalDispatch } from '../share';\n\nimport type { MyReactFiberNode } from '../fiber';\nimport type { MyReactHookNode } from './instance';\n\nexport const effect = (fiber: MyReactFiberNode, hookNode: MyReactHookNode) => {\n  if (hookNode.effect && !hookNode.__pendingEffect__) {\n    hookNode.__pendingEffect__ = true;\n\n    if (hookNode.hookType === 'useEffect') {\n      globalDispatch.current.pendingEffect(fiber, () => {\n        hookNode.cancel && hookNode.cancel();\n\n        if (hookNode.__fiber__?.mount) hookNode.cancel = hookNode.value();\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n\n    if (hookNode.hookType === 'useLayoutEffect') {\n      globalDispatch.current.pendingLayoutEffect(fiber, () => {\n        hookNode.cancel && hookNode.cancel();\n\n        if (hookNode.__fiber__?.mount) hookNode.cancel = hookNode.value();\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n\n    if (hookNode.hookType === 'useImperativeHandle') {\n      globalDispatch.current.pendingLayoutEffect(fiber, () => {\n        if (hookNode.value && typeof hookNode.value === 'object')\n          hookNode.value.current = hookNode.reducer.call(null);\n\n        hookNode.effect = false;\n\n        hookNode.__pendingEffect__ = false;\n      });\n    }\n  }\n};\n","import { getHookTree } from '../share';\n\nimport { effect } from './effect';\nimport { MyReactHookNode } from './instance';\n\nimport type { MyReactFiberNode } from '../fiber';\nimport type { Reducer, Action, HOOK_TYPE } from './instance';\n\nconst defaultReducer: Reducer = (state?: unknown, action?: Action) => {\n  return typeof action === 'function' ? action(state) : action;\n};\n\ntype CreateHookParams = {\n  hookIndex: number;\n  hookType: HOOK_TYPE;\n  value: unknown;\n  reducer: Reducer | null;\n  deps: unknown[];\n};\n\nexport const createHookNode = (\n  { hookIndex, hookType, value, reducer, deps }: CreateHookParams,\n  fiber: MyReactFiberNode\n) => {\n  const newHookNode = new MyReactHookNode(\n    hookIndex,\n    hookType,\n    value,\n    reducer || defaultReducer,\n    deps\n  );\n\n  newHookNode.setFiber(fiber);\n\n  fiber.addHook(newHookNode);\n\n  fiber.checkHook(newHookNode);\n\n  newHookNode.initialResult();\n\n  return newHookNode;\n};\n\nexport const getHookNode = (\n  { hookIndex, hookType, value, reducer, deps }: CreateHookParams,\n  fiber: MyReactFiberNode | null\n) => {\n  if (!fiber) throw new Error('can not use hook out of component');\n\n  let currentHook: null | MyReactHookNode = null;\n\n  if (fiber.hookList.length > hookIndex) {\n    currentHook = fiber.hookList[hookIndex];\n\n    if (currentHook.hookType !== hookType) {\n      const array = fiber.hookType.slice(0, hookIndex);\n      throw new Error(\n        getHookTree([...array, currentHook.hookType], [...array, hookType])\n      );\n    }\n\n    currentHook.setFiber(fiber);\n\n    currentHook.updateResult(value, reducer || defaultReducer, deps);\n  } else if (!fiber.__isUpdateRender__) {\n    currentHook = createHookNode(\n      { hookIndex, hookType, value, reducer, deps },\n      fiber\n    );\n  } else {\n    throw new Error(\n      getHookTree([...fiber.hookType], [...fiber.hookType, hookType])\n    );\n  }\n\n  effect(fiber, currentHook);\n\n  return currentHook;\n};\n","import {\n  createRef,\n  currentFunctionFiber,\n  currentHookDeepIndex,\n  enableDebugLog,\n  getFiberTree,\n} from '../share';\n\nimport { getHookNode } from './create';\n\nimport type { createContext } from '../element';\nimport type { Reducer } from './instance';\n\nexport const useState = <T = any>(initial: T | (() => T)) => {\n  const currentHookNode = getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useState',\n      value: typeof initial === 'function' ? initial : () => initial,\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  );\n\n  return [currentHookNode.result, currentHookNode.dispatch];\n};\n\nexport const useEffect = (action: () => any, deps: any[]) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useEffect',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useLayoutEffect = (action: () => any, deps: any[]) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useLayoutEffect',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useCallback = <\n  T extends (...args: any[]) => any = (...args: any[]) => any\n>(\n  callback: T,\n  deps: any[]\n) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useCallback',\n      value: callback,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useMemo = <T extends () => any = () => any>(\n  action: T,\n  deps: any[]\n) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useMemo',\n      value: action,\n      reducer: null,\n      deps,\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useRef = <T = any>(value: T) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useRef',\n      value: createRef(value),\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useContext = (Context: ReturnType<typeof createContext>) => {\n  return getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useContext',\n      value: Context,\n      reducer: null,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  ).result;\n};\n\nexport const useReducer = (\n  reducer: Reducer,\n  initialArgs: any,\n  init?: (...args: any) => any\n) => {\n  const currentHookNode = getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useReducer',\n      value:\n        typeof init === 'function'\n          ? () => init(initialArgs)\n          : () => initialArgs,\n      reducer,\n      deps: [],\n    },\n    currentFunctionFiber.current\n  );\n\n  return [currentHookNode.result, currentHookNode.dispatch];\n};\n\nexport const useImperativeHandle = (\n  ref: any,\n  createHandle: Reducer,\n  deps: any[]\n) => {\n  getHookNode(\n    {\n      hookIndex: currentHookDeepIndex.current++,\n      hookType: 'useImperativeHandle',\n      value: ref,\n      reducer: createHandle,\n      deps,\n    },\n    currentFunctionFiber.current\n  );\n};\n\nexport const useDebugValue = (...args: any[]) => {\n  if (enableDebugLog.current) {\n    console.log(\n      `[debug]: `,\n      ...args,\n      getFiberTree(currentFunctionFiber.current)\n    );\n  }\n};\n","import { count, forEach, map, only, toArray } from './children';\nimport { MyReactComponent, MyReactPureComponent } from './component';\nimport {\n  render,\n  renderToString,\n  hydrate,\n  createPortal,\n  findDOMNode,\n  unmountComponentAtNode,\n} from './dom';\nimport {\n  createElement,\n  cloneElement,\n  isValidElement,\n  forwardRef,\n  createContext,\n  memo,\n  lazy,\n} from './element';\nimport {\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n} from './hook';\nimport {\n  My_React_Portal as Portal,\n  My_React_Element as Element,\n  My_React_Strict as StrictMode,\n  My_React_Fragment as Fragment,\n  My_React_Provider as Provider,\n  My_React_Consumer as Consumer,\n  My_React_Suspense as Suspense,\n  My_React_ForwardRef as ForwardRef,\n  createRef,\n  safeCall,\n} from './share';\n\nconst unstable_batchedUpdates = safeCall;\n\nconst Component = MyReactComponent;\nconst PureComponent = MyReactPureComponent;\n\nconst Children = {\n  map,\n  only,\n  count,\n  toArray,\n  forEach,\n};\n\nconst React = {\n  Component,\n  PureComponent,\n\n  createElement,\n  cloneElement,\n  isValidElement,\n\n  lazy,\n  memo,\n  createRef,\n  forwardRef,\n  createContext,\n\n  Portal,\n  Element,\n  Provider,\n  Consumer,\n  Fragment,\n  Suspense,\n  StrictMode,\n  ForwardRef,\n\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n\n  Children,\n\n  version: '0.0.1',\n};\n\nconst ReactDOM = {\n  render,\n  hydrate,\n  findDOMNode,\n  createPortal,\n  renderToString,\n  unmountComponentAtNode,\n  unstable_batchedUpdates,\n\n  version: '0.0.1',\n};\n\nconst mixin = { ...React, ...ReactDOM };\n\n(globalThis as any).React = React;\n\n(globalThis as any).ReactDOM = ReactDOM;\n\nexport { React, ReactDOM };\n\nexport {\n  Component,\n  PureComponent,\n  createElement,\n  cloneElement,\n  isValidElement,\n  lazy,\n  memo,\n  createRef,\n  forwardRef,\n  createContext,\n  Portal,\n  Element,\n  Provider,\n  Consumer,\n  Fragment,\n  Suspense,\n  StrictMode,\n  ForwardRef,\n  useRef,\n  useMemo,\n  useState,\n  useEffect,\n  useReducer,\n  useContext,\n  useCallback,\n  useDebugValue,\n  useLayoutEffect,\n  useImperativeHandle,\n  Children,\n  render,\n  hydrate,\n  findDOMNode,\n  createPortal,\n  renderToString,\n  unmountComponentAtNode,\n  unstable_batchedUpdates,\n};\n\nexport default mixin;\n"],"names":["createRef","value","current","EmptyDispatch","trigger","_fiber","reconcileCommit","_hydrate","_parentFiberWithDom","reconcileCreate","_list","reconcileUpdate","beginProgressList","endProgressList","generateUpdateList","pendingCreate","pendingUpdate","pendingAppend","pendingContext","pendingPosition","pendingUnmount","_pendingUnmount","pendingLayoutEffect","_layoutEffect","pendingEffect","_effect","updateAllSync","updateAllAsync","asyncUpdateTimeLimit","globalLoop","globalDispatch","currentRunningFiber","currentFunctionFiber","currentHookDeepIndex","isAppMounted","isAppCrash","isServerRender","isHydrateRender","enableKeyDiff","enableHighlight","enableDebugLog","enableAllCheck","enableAsyncUpdate","enableEventSystem","enableControlComponent","asyncUpdateTimeStep","nRoundTransformFiberArray","cRoundTransformFiberArray","pendingModifyFiberArray","pendingModifyTopLevelFiber","pendingUpdateFiberListArray","pendingUpdateFiberList","getTrackDevLog","fiber","element","source","_source","owner","_owner","preString","fileName","lineNumber","__isDynamicNode__","type","typedType","name","displayName","getFiberNodeName","__isMemo__","__isLazy__","__isPortal__","__isNullNode__","__isEmptyNode__","__isStrictNode__","__isSuspense__","__isForwardRef__","__isFragmentNode__","__isContextProvider__","__isContextConsumer__","__isPlainNode__","__root__","toString","getFiberTree","padEnd","parent","res","getHookTree","hookType","newType","re","key","c","n","repeat","cache","log","message","level","triggerOnce","tree","console","stack","safeCall","action","args","call","e","Error","safeCallWithFiber","debugWithDOM","dom","debugDOM","children","MyReactInternalInstance","__fiber__","__context__","__pendingEffect__","setContext","context","removeDependence","addDependence","setFiber","unmount","__internal_instance_state__","v","__internal_instance_update__","NODE_TYPE_OBJ","__isTextNode__","__isObjectNode__","__isClassComponent__","__isFunctionComponent__","NODE_TYPE_KEY","Object","keys","MyReactInternalType","setNodeType","props","forEach","typeKey","__internal_node_type__","isSameType","every","is","isNormalEquals","src","target","srcKeys","targetKeys","length","isArrayEquals","Array","isArray","once","called","IS_SINGLE_ELEMENT","br","hr","img","input","param","meta","link","My_React_Element","Symbol","My_React_Memo","My_React_ForwardRef","My_React_Portal","My_React_Fragment","My_React_Context","My_React_Provider","My_React_Consumer","My_React_Lazy","My_React_Suspense","My_React_Strict","flattenChildren","reduce","p","concat","shouldPauseAsyncUpdate","Date","now","result","MyReactFiberInternal","__renderedChildren__","__renderedChildHead__","__renderedChildFoot__","__renderedCount__","__isRenderDynamic__","__dynamicChildren__","__isUpdateRender__","__updateTimeStep__","__lastUpdateTimeStep__","__updateTimeSpace__","Infinity","__fallback__","__pendingCreate__","__pendingUpdate__","__pendingAppend__","__pendingPosition__","__pendingContext__","__dependence__","__contextMap__","__vdom__","__prevVdom__","__props__","__prevProps__","__children__","hookHead","hookFoot","hookList","__compUpdateQueue__","__hookUpdateQueue__","__effectQueue__","__layoutEffectQueue__","__unmountQueue__","node","dependence","push","filter","__internal_node_diff__","diff","lastTimeStep","nowTimeStep","__internal_node_state__","__internal_node_context__","__internal_node_props__","__internal_node_hook__","__internal_node_update__","__internal_node_unmount__","__internal_node_effect__","MyReactFiberNode","index","fiberIndex","addChild","child","sibling","initialParent","nameSpace","fallback","contextMap","assign","typedElementType","contextObj","contextId","installParent","newParent","updateRenderState","beforeUpdate","triggerUpdate","__needUpdate__","__needTrigger__","prepareUpdate","afterUpdate","installVDom","vdom","checkVDom","isValidElement","typedVDom","_store","render","ref","prototype","hasOwnProperty","initialType","nodeType","getTypeFromVDom","checkIsSameType","currentElement","addHook","hookNode","hookNext","hookPrev","checkHook","applyRef","typedElement","instance","applyVDom","installInstance","update","hook","mount","getContextFiber","ContextObject","id","contextFiber","getContextValue","contextValue","Provider","processComponentUpdateQueue","allComponentUpdater","slice","typedInstance","baseState","state","baseProps","newState","payLoad","isForce","callback","processHookUpdateQueue","allHookUpdater","reducer","updateFiberNode","newChild","prevFiber","prevVDom","newVDom","typedPrevVDom","typedNewVDom","createFiberNode","VDom","newFiberNode","unmountFiber","mapFiber","arrayLike","f","cannotUpdate","window","IS_UNIT_LESS_NUMBER","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","ListTreeNode","LinkTreeList","append","rawArray","listNode","listArray","array","unshift","head","foot","prev","next","shift","pop","pickHead","pickFoot","listToFoot","listToHead","reconcile","i","has","$$typeof","rawType","typedRawType","isMyReactComponent","undefined","checkValidKey","obj","onceWarnDuplicate","onceWarnUndefined","checkArrayChildrenKey","checkSingleChildrenKey","createVDom","_self","createElement","config","self","_ref","_key","__self","__source","resProps","defaultProps","childrenLength","arguments","from","cloneElement","clonedElement","createContext","Consumer","Context","Internal","defineProperty","get","enumerable","configurable","forwardRef","memo","lazy","loader","_loading","_loaded","mapByJudge","judge","arrayChildren","map","toArray","count","only","MyReactComponent","updater","Promise","resolve","then","componentWillUnmount","MyReactPureComponent","shouldComponentUpdate","nextProps","nextState","nextContext","getKeyMatchedChildren","newChildren","prevFiberChildren","tempChildren","assignPrevChildren","fill","targetIndex","findIndex","splice","getIsSameTypeNode","prevFiberChild","newChildIsArray","prevElementChildIsArray","typedPrevFiberChild","typedNewChild","prevRenderedChild","getNewFiberWithUpdate","parentFiber","assignPrevFiberChild","assignPrevFiberChildren","getNewFiberWithInitial","transformChildrenFiber","isUpdate","newFiber","nextWorkCommon","nextWorkClassComponent","classComponentMount","classComponentUpdate","nextWorkFunctionComponent","nextWorkComponent","nextWorkMemo","isForwardRefRender","targetRender","isClassComponent","typedRender","nextWorkLazy","nextWorkForwardRef","nextWorkProvider","nextWorkConsumer","ProviderFiber","typedChildren","nextWorkObject","nextWorkSync","nextWorkAsync","nextFiber","loopStart","loopCurrent","loopNext","loopToEnd","loopAll","mountLoopSync","updateLoopSync","loopController","hasNext","getNext","getUpdateList","setYield","updateLoopAsync","shouldPause","doesPause","processComponentStateFromProps","Component","typedComponent","getDerivedStateFromProps","payloadState","processComponentInstanceOnMount","contextType","processComponentFiberOnUpdate","processComponentRenderOnMountAndUpdate","processComponentDidMountOnMount","componentDidMount","processComponentContextOnUpdate","processComponentShouldUpdateOnUpdate","processComponentDidUpdateOnUpdate","baseContext","hasEffect","componentDidUpdate","shouldUpdate","reconcileMount","hydrate","startRender","createPortal","container","isInternal","startsWith","isChildren","isEvent","isStyle","isProperty","isNew","oldProps","newProps","isGone","findDOMFromFiber","currentArray","findDOMFromComponentFiber","findDOMNode","updateEntry","asyncUpdate","canUpdate","clearFiberDom","remove","_unmount","allUnmountFiber","unmountComponentAtNode","allPendingList","l","getFiberWithDom","transform","currentYield","updateFiberController","yieldFiber","newProgressFiber","parentFiberWithDom","parentDom","tagName","toLowerCase","appendChild","allListeners","pendingRemove","nextSibling","m","getNextHydrateDom","childNodes","find","document","COMMENT_NODE","__hydrate__","checkHydrateDom","Node","TEXT_NODE","nodeName","ELEMENT_NODE","getHydrateDom","typedDom","hydrateCreate","nativeCreate","createTextNode","createElementNS","validDomNesting","typedParentElement","create","layoutEffect","allLayoutEffect","effect","allEffect","parentDOM","nextFibers","getInsertBeforeDomFromSibling","getInsertBeforeDomFromSiblingAndParent","beforeDom","insertBefore","beforeDOM","position","beforeFiberWithDom","getNativeEventName","eventName","isCapture","nativeName","endsWith","split","controlElementTag","addEventListener","eventState","__internal_node_event__","cb","handler","nativeEvent","setAttribute","removeEventListener","domPropsHydrate","textContent","String","getAttribute","domStyleHydrate","styleKey","typedProps","styleName","domEventHydrate","hydrateUpdate","HighLight","createRange","createHighLight","__pendingHighLight__","startHighLight","flashPending","allFiber","allWrapper","wrapperDom","getHighLight","range","selectNodeContents","selectNode","rect","getBoundingClientRect","left","scrollingElement","scrollLeft","top","scrollTop","width","height","positionLeft","positionTop","style","cssText","setTimeout","boxShadow","body","nativeUpdate","removeAttribute","focus","typedNewProps","typedOldProps","innerHTML","__html","__highlight__","getHighLightInstance","highLight","ClientDispatch","_result","_final","containerFiber","TextElement","content","PlainElement","attrs","d","serializeStyle","styleKeys","serializeAttrs","attrsKeys","serializeProps","className","serialize","ServerDispatch","renderToString","MyReactHookNode","hookIndex","deps","initialResult","updateResult","newValue","newReducer","newDeps","cancel","defaultReducer","createHookNode","newHookNode","getHookNode","currentHook","useState","initial","currentHookNode","dispatch","useEffect","useLayoutEffect","useCallback","useMemo","useRef","useContext","useReducer","initialArgs","init","useImperativeHandle","createHandle","useDebugValue","unstable_batchedUpdates","PureComponent","Children","React","Portal","Element","Fragment","Suspense","StrictMode","ForwardRef","version","ReactDOM","mixin","globalThis"],"mappings":"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"}