"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{51641:function(e,t,n){n.r(t),n.d(t,{DefaultDiffExpansionStep:function(){return E},DiffFile:function(){return Oe},DiffFileLineType:function(){return Te},DiffHunk:function(){return h},DiffHunkExpansionType:function(){return i},DiffHunkHeader:function(){return m},DiffLine:function(){return L},DiffLineType:function(){return w},DiffModeEnum:function(){return Ze},DiffParser:function(){return _},DiffView:function(){return kn},DiffViewContext:function(){return Ge},File:function(){return q},HiddenBidiCharsRegex:function(){return W},NewLineSymbol:function(){return l},SplitSide:function(){return En},_cacheMap:function(){return J},assertNever:function(){return y},checkDiffLineIncludeChange:function(){return N},composeLen:function(){return je},diffFontSizeName:function(){return Nn},getDiffRange:function(){return F},getFile:function(){return X},getHunkHeaderExpansionType:function(){return I},getLang:function(){return H},getLargestLineNumber:function(){return k},getSplitContentLines:function(){return Be},getSplitLines:function(){return Ue},getUnifiedContentLine:function(){return Pe},getUnifiedLines:function(){return ze},hasRelativeChange:function(){return b},highlighter:function(){return B},numIterator:function(){return S},parseInstance:function(){return D},processAST:function(){return j},relativeChanges:function(){return v},useDiffViewContext:function(){return qe},version:function(){return In},versions:function(){return Ve}});var i,l,d=n(78524),a=n(84092),s=n(91616),r=n(36095),o=n(13528),f=n(31178),u=n(45759);function c(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}"function"===typeof SuppressedError&&SuppressedError,function(e){e.None="None",e.Up="Up",e.Down="Down",e.Both="Both",e.Short="Short"}(i||(i={}));class h{constructor(e,t,n,i,l){this.header=e,this.lines=t,this.unifiedDiffStart=n,this.unifiedDiffEnd=i,this.expansionType=l}equals(e){return this===e||this.header.equals(e.header)&&this.unifiedDiffStart===e.unifiedDiffStart&&this.unifiedDiffEnd===e.unifiedDiffEnd&&this.expansionType===e.expansionType&&this.lines.length===e.lines.length&&this.lines.every(((t,n)=>t.equals(e.lines[n])))}}class m{constructor(e,t,n,i){this.oldStartLine=e,this.oldLineCount=t,this.newStartLine=n,this.newLineCount=i}toDiffLineRepresentation(){return`@@ -${this.oldStartLine},${this.oldLineCount} +${this.newStartLine},${this.newLineCount} @@`}equals(e){return this.oldStartLine===e.oldStartLine&&this.oldLineCount===e.oldLineCount&&this.newStartLine===e.newStartLine&&this.oldStartLine===e.oldStartLine}}!function(e){e[e.CRLF=1]="CRLF",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.NEWLINE=4]="NEWLINE"}(l||(l={}));function p(e){return e.location+e.length}function g(e,t,n,i,l){const d=Math.min(t.length,i.length),a=l?p(t)-1:t.location,s=l?p(i)-1:i.location,r=l?-1:1;let o=0;for(;Math.abs(o)<d&&e[a+o]===n[s+o];)o+=r;return Math.abs(o)}function x(e){return 0===e.trim().length||e.length>=1e3}function v(e,t){const n=e.text,i=t.text;let d={location:0,length:i.length},a={location:0,length:n.length};const s=n.trimEnd(),r=i.trimEnd(),o=n.slice(-2),f=i.slice(-2),u=e.noTrailingNewLine!==t.noTrailingNewLine,c="\r\n"===o?l.CRLF:o.endsWith("\r")?l.CR:l.LF,h="\r\n"===f?l.CRLF:f.endsWith("\r")?l.CR:l.LF;if(s===r&&(u||c!==h))return{stringARange:{location:s.length,length:n.length-s.length,newLineSymbol:u?l.NEWLINE:c},stringBRange:{location:r.length,length:i.length-r.length,newLineSymbol:u?l.NEWLINE:h}};if(x(n)||x(i))return a.length=0,d.length=0,{stringARange:a,stringBRange:d};const m=g(i,d,n,a,!1);d={location:d.location+m,length:d.length-m},a={location:a.location+m,length:a.length-m};const p=g(i,d,n,a,!0);return d.length-=p,a.length-=p,{stringARange:a,stringBRange:d}}function b(e,t){const n=e.text.trim(),i=t.text.trim(),l=e.clone(n),d=t.clone(i),{stringARange:a,stringBRange:s}=v(l,d);return a.location>0||s.location>0||a.length<n.length||s.length<i.length}var w;!function(e){e[e.Context=0]="Context",e[e.Add=1]="Add",e[e.Delete=2]="Delete",e[e.Hunk=3]="Hunk"}(w||(w={}));class L{constructor(e,t,n,i,l,d=!1,a=!1,s){this.text=e,this.type=t,this.originalLineNumber=n,this.oldLineNumber=i,this.newLineNumber=l,this.noTrailingNewLine=d,this.needRematch=a,this.range=s}withNoTrailingNewLine(e){return new L(this.text,this.type,this.originalLineNumber,this.oldLineNumber,this.newLineNumber,e)}isIncludeableLine(){return this.type===w.Add||this.type===w.Delete}get content(){return this.text.substring(1)}equals(e){return this.text===e.text&&this.type===e.type&&this.originalLineNumber===e.originalLineNumber&&this.oldLineNumber===e.oldLineNumber&&this.newLineNumber===e.newLineNumber&&this.noTrailingNewLine===e.noTrailingNewLine}clone(e){return new L(e,this.type,this.originalLineNumber,this.oldLineNumber,this.newLineNumber)}}const N=e=>!!e&&(e.type===w.Add||e.type===w.Delete),E=40;function y(e,t){throw new Error(t)}function k(e){var t,n;if(0===e.length)return 0;for(let i=e.length-1;i>=0;i--){const l=e[i];for(let e=l.lines.length-1;e>=0;e--){const i=l.lines[e];if(i.type===w.Hunk)continue;const d=null!==(t=i.newLineNumber)&&void 0!==t?t:0,a=null!==(n=i.oldLineNumber)&&void 0!==n?n:0;return d>a?d:a}}return 0}function I(e,t,n){const l=null===n?1/0:t.oldStartLine-n.header.oldStartLine-n.header.oldLineCount;return 0===e?t.oldStartLine>1&&t.newStartLine>1?i.Up:i.None:l<=E?i.Short:i.Both}const S=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},H=e=>{const t=e.lastIndexOf(".");return e.slice(t+1)},F=(e,t)=>{if(e.length===t.length){const n=e.length;for(let i=0;i<n;i++){const n=e[i],l=t[i];if(b(n,l)){const{stringARange:e,stringBRange:t}=v(n,l);n.needRematch=!0,n.range=e,l.needRematch=!0,l.range=t}}}},C=/^@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/,W=/[\u202A-\u202E]|[\u2066-\u2069]/,$=new Set(["+","-"," ","\\"]);class _{constructor(){Object.defineProperty(this,"__v_skip",{value:!0}),this.reset()}reset(){this.ls=0,this.le=-1,this.text=""}nextLine(){return this.ls=this.le+1,!(this.ls>=this.text.length)&&(this.le=this.text.indexOf("\n",this.ls),-1===this.le&&(this.le=this.text.length),this.ls!==this.le)}readLine(e){return e?this.nextLine()?this.text.substring(this.ls,this.le):null:this.nextLine()?this.text.substring(this.ls+1,this.le+1):null}lineStartsWith(e){return this.text.startsWith(e,this.ls)}lineEndsWith(e){return this.text.endsWith(e,this.le)}peek(){const e=this.le+1;return e<this.text.length?this.text[e]:null}parseDiffHeader(){for(;this.nextLine();){if(this.lineStartsWith("Binary files ")&&this.lineEndsWith("differ"))return{isBinary:!0};if(this.lineStartsWith("+++"))return{isBinary:!1}}return null}numberFromGroup(e,t,n=null){const i=e[t];if(!i){if(!n)throw new Error(`Group ${t} missing from regexp match and no defaultValue was provided`);return n}const l=parseInt(i,10);if(isNaN(l))throw new Error(`Could not parse capture group ${t} into number: ${i}`);return l}parseHunkHeader(e){const t=C.exec(e);if(!t)throw new Error("Invalid hunk header format");const n=this.numberFromGroup(t,1),i=this.numberFromGroup(t,2,1),l=this.numberFromGroup(t,3),d=this.numberFromGroup(t,4,1);return new m(n,i,l,d)}parseLinePrefix(e){return e&&e.length&&$.has(e[0])?e[0]:null}parseHunk(e,t,n){const i=this.readLine(!0);if(!i)throw new Error("Expected hunk header but reached end of diff");const l=this.parseHunkHeader(i),d=new Array;let a;d.push(new L(i,w.Hunk,1,null,null));let s=l.oldStartLine,r=l.newStartLine,o=e;for(;a=this.parseLinePrefix(this.peek());){const e=this.readLine(!1);if(o++,!e)throw new Error("Expected unified diff line but reached end of diff");if("\\"===a){if(e.length<12)throw new Error('Expected "no newline at end of file" marker to be at least 12 bytes long');const t=d.length-1,n=d[t];d[t]=n.withNoTrailingNewLine(!0);continue}let t;if("+"===a)t=new L(e,w.Add,o,null,r++);else if("-"===a)t=new L(e,w.Delete,o,s++,null);else{if(" "!==a)return y(0,`Unknown DiffLinePrefix: ${a}`);t=new L(e,w.Context,o,s++,r++)}d.push(t)}if(1===d.length)throw new Error("Malformed diff, empty hunk");return new h(l,d,e,e+d.length-1,I(t,l,n))}parse(e){this.text=e;try{const t=this.parseDiffHeader(),n=this.le,i=this.text.substring(0,n);if(!t)return{header:i,contents:"",hunks:[],isBinary:!1,maxLineNumber:0,hasHiddenBidiChars:!1};if(t.isBinary)return{header:i,contents:"",hunks:[],isBinary:!0,maxLineNumber:0,hasHiddenBidiChars:!1};const l=new Array;let d=0,a=null;do{const e=this.parseHunk(d,l.length,a);l.push(e),a=e,d+=e.lines.length}while(this.peek());return{header:i,contents:this.text.substring(n+1,this.le).replace(/\n\\ No newline at end of file/g,""),hunks:l,isBinary:t.isBinary,maxLineNumber:k(l),hasHiddenBidiChars:W.test(e)}}finally{this.reset()}}}const D=new _;function A(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function M(e,t,n,i,l){if("function"===typeof t?e!==t||!l:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}"function"===typeof SuppressedError&&SuppressedError;const j=e=>{let t=1;const n={},i=(e,l)=>{e.forEach((e=>{if("text"!==e.type)e.children&&(i(e.children,e),e.lineNumber=t);else{if(-1===e.value.indexOf("\n")){const i=e.value.length;if(n[t])e.startIndex=n[t].valueLength,e.endIndex=e.startIndex+i-1,n[t].value+=e.value,n[t].valueLength+=i,n[t].nodeList.push({node:e,wrapper:l});else{e.startIndex=0,e.endIndex=i-1;const d={value:e.value,lineNumber:t,valueLength:i,nodeList:[{node:e,wrapper:l}]};n[t]=d}return void(e.lineNumber=t)}const i=e.value.split("\n");e.children=e.children||[];for(let d=0;d<i.length;d++){const a=d===i.length-1?i[d]:i[d]+"\n",s=0===d?t:++t,r=a.length,o={type:"text",value:a,startIndex:1/0,endIndex:1/0,lineNumber:s};if(n[s])o.startIndex=n[s].valueLength,o.endIndex=o.startIndex+r-1,n[s].value+=a,n[s].valueLength+=r,n[s].nodeList.push({node:o,wrapper:l});else{o.startIndex=0,o.endIndex=r-1;const e={value:a,lineNumber:s,valueLength:r,nodeList:[{node:o,wrapper:l}]};n[s]=e}e.children.push(o)}e.lineNumber=t}}))};return i(e.children),{syntaxFileObject:n,syntaxFileLineNumber:t}},R=(0,d.B)(a.y);R.register("vue",(function(e){return{subLanguage:"xml",contains:[e.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:/^(\s*)(<script>)/gm,end:/^(\s*)(<\/script>)/gm,subLanguage:"javascript",excludeBegin:!0,excludeEnd:!0},{begin:/^(?:\s*)(?:<script\s+lang=(["'])ts\1>)/gm,end:/^(\s*)(<\/script>)/gm,subLanguage:"typescript",excludeBegin:!0,excludeEnd:!0},{begin:/^(\s*)(<style(\s+scoped)?>)/gm,end:/^(\s*)(<\/style>)/gm,subLanguage:"css",excludeBegin:!0,excludeEnd:!0},{begin:/^(?:\s*)(?:<style(?:\s+scoped)?\s+lang=(["'])(?:s[ca]ss)\1(?:\s+scoped)?>)/gm,end:/^(\s*)(<\/style>)/gm,subLanguage:"scss",excludeBegin:!0,excludeEnd:!0},{begin:/^(?:\s*)(?:<style(?:\s+scoped)?\s+lang=(["'])stylus\1(?:\s+scoped)?>)/gm,end:/^(\s*)(<\/style>)/gm,subLanguage:"stylus",excludeBegin:!0,excludeEnd:!0}]}}));const O={name:"lowlight"};let T=2e3;const U=[];Object.defineProperty(O,"maxLineToIgnoreSyntax",{get:()=>T}),Object.defineProperty(O,"setMaxLineToIgnoreSyntax",{value:e=>{T=e}}),Object.defineProperty(O,"ignoreSyntaxHighlightList",{get:()=>U}),Object.defineProperty(O,"setIgnoreSyntaxHighlightList",{value:e=>{U.length=0,U.push(...e)}}),Object.defineProperty(O,"getAST",{value:(e,t,n)=>{let i=!0;if(R.registered(n)||(i=!1),!t||!B.ignoreSyntaxHighlightList.some((e=>e instanceof RegExp?e.test(t):t===e)))return i?R.highlight(n,e):R.highlightAuto(e)}}),Object.defineProperty(O,"processAST",{value:e=>j(e)}),Object.defineProperty(O,"hasRegisteredCurrentLang",{value:e=>R.registered(e)});const B=O;var z,P,V;class Z extends Map{constructor(){super(...arguments),z.set(this,[]),P.set(this,30)}setMaxLength(e){M(this,P,e),this._checkLength()}set(e,t){return this.has(e)?this:(A(this,z,"f").push(e),this._checkLength(),super.set(e,t))}_checkLength(){for(;A(this,z,"f").length>A(this,P,"f");){const e=A(this,z,"f").shift();this.delete(e)}}}z=new WeakMap,P=new WeakMap;const G=new Z;G.setMaxLength(50),G.name="@git-diff-view/core";class q{static createInstance(e){const t=new q(null===e||void 0===e?void 0:e.raw,null===e||void 0===e?void 0:e.lang,null===e||void 0===e?void 0:e.fileName);return t.ast=null===e||void 0===e?void 0:e.ast,t.rawFile=null===e||void 0===e?void 0:e.rawFile,t.hasDoRaw=null===e||void 0===e?void 0:e.hasDoRaw,t.rawLength=null===e||void 0===e?void 0:e.rawLength,t.syntaxFile=null===e||void 0===e?void 0:e.syntaxFile,t.hasDoSyntax=null===e||void 0===e?void 0:e.hasDoSyntax,t.syntaxLength=null===e||void 0===e?void 0:e.syntaxLength,t.highlighterName=null===e||void 0===e?void 0:e.highlighterName,t.maxLineNumber=null===e||void 0===e?void 0:e.maxLineNumber,t}constructor(e,t,n){V.add(this),this.raw=e,this.lang=t,this.fileName=n,this.rawFile={},this.hasDoRaw=!1,this.syntaxFile={},this.hasDoSyntax=!1,this.maxLineNumber=0,Object.defineProperty(this,"__v_skip",{value:!0})}doSyntax({registerHighlighter:e}){if(!this.raw||this.hasDoSyntax)return;const t=e||B;if(this.syntaxLength)return;if(this.rawLength>t.maxLineToIgnoreSyntax)return;if(this.ast=t.getAST(this.raw,this.fileName,this.lang),!this.ast)return;const{syntaxFileObject:n,syntaxFileLineNumber:i}=t.processAST(this.ast);this.syntaxFile=n,this.syntaxLength=i,this.highlighterName=t.name,this.hasDoSyntax=!0}doRaw(){if(!this.raw||this.hasDoRaw)return;const e=this.raw.split("\n");this.rawLength=e.length,this.maxLineNumber=e.length,this.rawFile={};for(let t=0;t<e.length;t++)this.rawFile[t+1]=t<e.length-1?e[t]+"\n":e[t];this.hasDoRaw=!0}}V=new WeakSet;const X=(e,t,n)=>{const i=e+"--0.0.13--"+t;if(G.has(i))return G.get(i);const l=new q(e,t,n);return G.set(i,l),l},J=G;var K,Q,Y,ee,te,ne,ie,le,de,ae,se,re,oe,fe,ue,ce,he,me,pe,ge,xe,ve,be,we,Le,Ne,Ee,ye,ke,Ie,Se,He,Fe,Ce,We,$e,_e,De,Ae,Me;const je=40,Re=new Set;class Oe{static createInstance(e,t){var n,i,l,d,a,s;const r=new Oe((null===(n=null===e||void 0===e?void 0:e.oldFile)||void 0===n?void 0:n.fileName)||"",(null===(i=null===e||void 0===e?void 0:e.oldFile)||void 0===i?void 0:i.content)||"",(null===(l=null===e||void 0===e?void 0:e.newFile)||void 0===l?void 0:l.fileName)||"",(null===(d=null===e||void 0===e?void 0:e.newFile)||void 0===d?void 0:d.content)||"",(null===e||void 0===e?void 0:e.hunks)||[],(null===(a=null===e||void 0===e?void 0:e.oldFile)||void 0===a?void 0:a.fileLang)||"",(null===(s=null===e||void 0===e?void 0:e.newFile)||void 0===s?void 0:s.fileLang)||"");return t&&(t.isFullMerge?r._mergeFullBundle(t):r.mergeBundle(t)),r}constructor(e,t,n,i,l,d,a){K.add(this),this._oldFileName=e,this._newFileName=n,this._diffList=l,Q.set(this,void 0),Y.set(this,void 0),ee.set(this,void 0),te.set(this,void 0),ne.set(this,void 0),ie.set(this,void 0),le.set(this,void 0),de.set(this,void 0),ae.set(this,void 0),se.set(this,void 0),re.set(this,void 0),oe.set(this,void 0),fe.set(this,[]),ue.set(this,[]),ce.set(this,void 0),he.set(this,[]),me.set(this,void 0),pe.set(this,[]),ge.set(this,!1),xe.set(this,!1),ve.set(this,!1),be.set(this,!1),we.set(this,0),Le.set(this,!1),Ne.set(this,!1),Ee.set(this,!1),ye.set(this,void 0),this._version_="0.0.13",this._oldFileContent="",this._oldFileLang="",this._newFileContent="",this._newFileLang="",this.diffLineLength=0,this.splitLineLength=0,this.unifiedLineLength=0,this.fileLineLength=0,this.hasExpandSplitAll=!1,this.hasExpandUnifiedAll=!1,this.hasSomeLineCollapsed=!1,ke.set(this,""),Ie.set(this,new Map),this.getSplitLeftLine=e=>A(this,fe,"f")[e],this.getSplitRightLine=e=>A(this,ue,"f")[e],this.getSplitHunkLine=e=>{var t;return null===(t=A(this,ce,"f"))||void 0===t?void 0:t[e]},this.onSplitHunkExpand=(e,t,n=!0)=>{var i,l;const d=null===(i=A(this,ce,"f"))||void 0===i?void 0:i[t];if(d&&d.splitInfo&&!A(this,Le,"f")){if("all"===e){for(let e=d.splitInfo.startHiddenIndex;e<d.splitInfo.endHiddenIndex;e++){const t=A(this,fe,"f")[e],n=A(this,ue,"f")[e];(null===t||void 0===t?void 0:t.isHidden)&&(t.isHidden=!1),(null===n||void 0===n?void 0:n.isHidden)&&(n.isHidden=!1)}d.splitInfo=Object.assign(Object.assign(Object.assign({},d.splitInfo),d.hunkInfo),{plainText:d.text,startHiddenIndex:d.splitInfo.endHiddenIndex})}else if("down"===e){for(let e=d.splitInfo.startHiddenIndex;e<d.splitInfo.startHiddenIndex+je;e++){const t=A(this,fe,"f")[e],n=A(this,ue,"f")[e];(null===t||void 0===t?void 0:t.isHidden)&&(t.isHidden=!1),(null===n||void 0===n?void 0:n.isHidden)&&(n.isHidden=!1)}d.isLast?d.splitInfo=Object.assign(Object.assign({},d.splitInfo),{startHiddenIndex:d.splitInfo.startHiddenIndex+je}):d.splitInfo=Object.assign(Object.assign({},d.splitInfo),{startHiddenIndex:d.splitInfo.startHiddenIndex+je,plainText:`@@ -${d.splitInfo.oldStartIndex},${d.splitInfo.oldLength} +${d.splitInfo.newStartIndex},${d.splitInfo.newLength}`})}else{if(d.isLast)return;for(let t=d.splitInfo.endHiddenIndex-je;t<d.splitInfo.endHiddenIndex;t++){const e=A(this,fe,"f")[t],n=A(this,ue,"f")[t];(null===e||void 0===e?void 0:e.isHidden)&&(e.isHidden=!1),(null===n||void 0===n?void 0:n.isHidden)&&(n.isHidden=!1)}const e=d.splitInfo.oldStartIndex-je,n=d.splitInfo.oldLength+je,i=d.splitInfo.newStartIndex-je,a=d.splitInfo.newLength+je;d.splitInfo=Object.assign(Object.assign({},d.splitInfo),{endHiddenIndex:d.splitInfo.endHiddenIndex-je,oldStartIndex:e,oldLength:n,newStartIndex:i,newLength:a,plainText:`@@ -${e},${n} +${i},${a}`}),null===(l=A(this,ce,"f"))||void 0===l||delete l[t],A(this,ce,"f")[d.splitInfo.endHiddenIndex]=d}n&&this.notifyAll()}},this.getUnifiedLine=e=>A(this,he,"f")[e],this.getUnifiedHunkLine=e=>{var t;return null===(t=A(this,me,"f"))||void 0===t?void 0:t[e]},this.onUnifiedHunkExpand=(e,t,n=!0)=>{var i,l,d;const a=null===(i=A(this,me,"f"))||void 0===i?void 0:i[t];if(a&&a.unifiedInfo&&!A(this,Le,"f")){if("all"===e){for(let e=a.unifiedInfo.startHiddenIndex;e<a.unifiedInfo.endHiddenIndex;e++){const t=null===(l=A(this,he,"f"))||void 0===l?void 0:l[e];(null===t||void 0===t?void 0:t.isHidden)&&(t.isHidden=!1)}a.unifiedInfo=Object.assign(Object.assign(Object.assign({},a.unifiedInfo),a.hunkInfo),{plainText:a.text,startHiddenIndex:a.unifiedInfo.endHiddenIndex})}else if("down"===e){for(let e=a.unifiedInfo.startHiddenIndex;e<a.unifiedInfo.startHiddenIndex+je;e++){const t=A(this,he,"f")[e];(null===t||void 0===t?void 0:t.isHidden)&&(t.isHidden=!1)}a.isLast?a.unifiedInfo=Object.assign(Object.assign({},a.unifiedInfo),{startHiddenIndex:a.unifiedInfo.startHiddenIndex+je}):a.unifiedInfo=Object.assign(Object.assign({},a.unifiedInfo),{startHiddenIndex:a.unifiedInfo.startHiddenIndex+je,plainText:`@@ -${a.unifiedInfo.oldStartIndex},${a.unifiedInfo.oldLength} +${a.unifiedInfo.newStartIndex},${a.unifiedInfo.newLength}`})}else{if(a.isLast)return;for(let t=a.unifiedInfo.endHiddenIndex-je;t<a.unifiedInfo.endHiddenIndex;t++){const e=A(this,he,"f")[t];(null===e||void 0===e?void 0:e.isHidden)&&(e.isHidden=!1)}const e=a.unifiedInfo.oldStartIndex-je,n=a.unifiedInfo.oldLength+je,i=a.unifiedInfo.newStartIndex-je,l=a.unifiedInfo.newLength+je;a.unifiedInfo=Object.assign(Object.assign({},a.unifiedInfo),{endHiddenIndex:a.unifiedInfo.endHiddenIndex-je,oldStartIndex:e,oldLength:n,newStartIndex:i,newLength:l,plainText:`@@ -${e},${n} +${i},${l}`}),null===(d=A(this,me,"f"))||void 0===d||delete d[t],A(this,me,"f")[a.unifiedInfo.endHiddenIndex]=a}n&&this.notifyAll()}},this.onAllExpand=e=>{A(this,Le,"f")||("split"===e?(Object.keys(A(this,ce,"f")||{}).forEach((e=>{this.onSplitHunkExpand("all",+e,!1)})),this.hasExpandSplitAll=!0):(Object.keys(A(this,me,"f")||{}).forEach((e=>{this.onUnifiedHunkExpand("all",+e,!1)})),this.hasExpandUnifiedAll=!0),this.notifyAll())},this.onAllCollapse=e=>{A(this,Le,"f")||("split"===e?(Object.values(A(this,fe,"f")||{}).forEach((e=>{!e.isHidden&&e._isHidden&&(e.isHidden=e._isHidden)})),Object.values(A(this,ue,"f")||{}).forEach((e=>{!e.isHidden&&e._isHidden&&(e.isHidden=e._isHidden)})),Object.values(A(this,ce,"f")||{}).forEach((e=>{e.splitInfo&&(e.splitInfo=Object.assign(Object.assign({},e.splitInfo),{oldStartIndex:e.splitInfo._oldStartIndex,oldLength:e.splitInfo._oldLength,newStartIndex:e.splitInfo._newStartIndex,newLength:e.splitInfo._newLength,startHiddenIndex:e.splitInfo._startHiddenIndex,endHiddenIndex:e.splitInfo._endHiddenIndex,plainText:e.splitInfo._plainText}))})),Object.keys(A(this,ce,"f")||{}).forEach((e=>{const t=A(this,ce,"f")[e];t.splitInfo&&t.splitInfo.endHiddenIndex!==+e&&(delete A(this,ce,"f")[e],A(this,ce,"f")[t.splitInfo.endHiddenIndex]=t)})),this.hasExpandSplitAll=!1):(Object.values(A(this,he,"f")||{}).forEach((e=>{!e.isHidden&&e._isHidden&&(e.isHidden=e._isHidden)})),Object.values(A(this,me,"f")||{}).forEach((e=>{e.unifiedInfo&&(e.unifiedInfo=Object.assign(Object.assign({},e.unifiedInfo),{oldStartIndex:e.unifiedInfo._oldStartIndex,oldLength:e.unifiedInfo._oldLength,newStartIndex:e.unifiedInfo._newStartIndex,newLength:e.unifiedInfo._newLength,startHiddenIndex:e.unifiedInfo._startHiddenIndex,endHiddenIndex:e.unifiedInfo._endHiddenIndex,plainText:e.unifiedInfo._plainText}))})),Object.keys(A(this,me,"f")||{}).forEach((e=>{const t=A(this,me,"f")[e];t.unifiedInfo&&t.unifiedInfo.endHiddenIndex!==+e&&(delete A(this,me,"f")[e],A(this,me,"f")[t.unifiedInfo.endHiddenIndex]=t)})),this.hasExpandUnifiedAll=!1),this.notifyAll())},this.getOldSyntaxLine=e=>{var t;return null===(t=A(this,ae,"f"))||void 0===t?void 0:t[e]},this.getNewSyntaxLine=e=>{var t;return null===(t=A(this,se,"f"))||void 0===t?void 0:t[e]},this.subscribe=e=>(A(this,pe,"f").push(e),()=>{A(this,pe,"f").filter((t=>t!==e))}),this.notifyAll=e=>{var t;M(this,we,(t=A(this,we,"f"),++t)),A(this,pe,"f").forEach((t=>{e&&t.isSyncExternal||t()})),A(this,Ie,"f").forEach(((e,t)=>{t.notifyAll(!0)}))},this.getUpdateCount=()=>A(this,we,"f"),this.getExpandEnabled=()=>!A(this,Le,"f"),this.getBundle=()=>{const e=A(this,ge,"f"),t=A(this,xe,"f"),n=A(this,ve,"f"),i=A(this,be,"f"),l=A(this,le,"f"),d=A(this,ne,"f"),a=A(this,ae,"f"),s=A(this,re,"f"),r=A(this,de,"f"),o=A(this,ie,"f"),f=A(this,se,"f"),u=A(this,oe,"f"),c=this.splitLineLength,h=this.unifiedLineLength,m=this.fileLineLength,p=A(this,Le,"f"),g=A(this,ye,"f"),x=this.hasSomeLineCollapsed;return{hasInitRaw:e,hasInitSyntax:t,hasBuildSplit:n,hasBuildUnified:i,oldFileLines:l,oldFileDiffLines:d,oldFileSyntaxLines:a,oldFilePlaceholderLines:s,newFileLines:r,newFileDiffLines:o,newFileSyntaxLines:f,newFilePlaceholderLines:u,splitLineLength:c,unifiedLineLength:h,fileLineLength:m,splitLeftLines:A(this,fe,"f"),splitRightLines:A(this,ue,"f"),splitHunkLines:A(this,ce,"f"),unifiedLines:A(this,he,"f"),unifiedHunkLines:A(this,me,"f"),highlighterName:g,composeByDiff:p,hasSomeLineCollapsed:x,version:this._version_,isFullMerge:!1}},this.mergeBundle=e=>{M(this,ge,e.hasInitRaw),M(this,xe,e.hasInitSyntax),M(this,ve,e.hasBuildSplit),M(this,be,e.hasBuildUnified),M(this,Le,e.composeByDiff),M(this,ye,e.highlighterName),M(this,le,e.oldFileLines),M(this,ne,e.oldFileDiffLines),M(this,ae,e.oldFileSyntaxLines),M(this,re,e.oldFilePlaceholderLines),M(this,de,e.newFileLines),M(this,ie,e.newFileDiffLines),M(this,se,e.newFileSyntaxLines),M(this,oe,e.newFilePlaceholderLines),this.splitLineLength=e.splitLineLength,this.unifiedLineLength=e.unifiedLineLength,this.fileLineLength=e.fileLineLength,this.hasSomeLineCollapsed=e.hasSomeLineCollapsed,M(this,fe,e.splitLeftLines),M(this,ue,e.splitRightLines),M(this,ce,e.splitHunkLines),M(this,he,e.unifiedLines),M(this,me,e.unifiedHunkLines),M(this,Ne,!0),this.notifyAll()},this._getHighlighterName=()=>A(this,ye,"f"),this._getIsPureDiffRender=()=>A(this,Le,"f"),this._addClonedInstance=e=>{const t=()=>{this._notifyOthers(e)};t.isSyncExternal=!0;const n=e.subscribe(t);A(this,Ie,"f").set(e,n)},this._notifyOthers=e=>{A(this,Ie,"f").forEach(((t,n)=>{n!==e&&n.notifyAll(!0)}))},this._delClonedInstance=e=>{const t=A(this,Ie,"f").get(e);t&&t(),A(this,Ie,"f").delete(e)},this._getFullBundle=()=>{const e=this.getBundle(),t=A(this,Q,"f"),n=A(this,Y,"f"),i=A(this,te,"f"),l=A(this,ee,"f");return Object.assign(Object.assign({},e),{oldFileResult:t,newFileResult:n,diffLines:i,diffListResults:l,isFullMerge:!A(this,Ne,"f")||A(this,Ee,"f")})},this._mergeFullBundle=e=>{this.mergeBundle(e);try{M(this,Q,q.createInstance(e.oldFileResult)),M(this,Y,q.createInstance(e.newFileResult)),M(this,te,e.diffLines),M(this,ee,e.diffListResults),M(this,Ee,e.isFullMerge)}catch(t){}},this._destroy=()=>{this.clearId(),A(this,pe,"f").splice(0,A(this,pe,"f").length),A(this,Ie,"f").forEach((e=>e())),A(this,Ie,"f").clear()},this.clear=()=>{this._destroy(),M(this,Q,null),M(this,Y,null),M(this,te,null),M(this,ee,null),M(this,ie,null),M(this,ne,null),M(this,de,null),M(this,le,null),M(this,se,null),M(this,ae,null),M(this,ce,null),M(this,fe,null),M(this,ue,null),M(this,me,null),M(this,he,null)},Object.defineProperty(this,"__v_skip",{value:!0});let s=t,r=i;const o=Array.from(new Set(l));Object.defineProperties(this,{_oldFileName:{get:()=>e},_newFileName:{get:()=>n},_oldFileLang:{get:()=>H(d||e||a||n)||"txt"},_newFileLang:{get:()=>H(a||n||d||e)||"txt"},_oldFileContent:{get:()=>s,set:e=>s=e},_newFileContent:{get:()=>r,set:e=>r=e},_diffList:{get:()=>o}}),this.initId()}initId(){let e="--"+Math.random().toString().slice(2);for(;Re.has(e);)e="--"+Math.random().toString().slice(2);Re.add(e),M(this,ke,e)}getId(){return A(this,ke,"f")}clearId(){Re.delete(A(this,ke,"f"))}initRaw(){A(this,ge,"f")||(A(this,K,"m",Se).call(this),A(this,K,"m",We).call(this),A(this,K,"m",He).call(this),A(this,K,"m",Fe).call(this),A(this,K,"m",Ce).call(this),M(this,ge,!0))}initSyntax({registerHighlighter:e}={}){var t,n;A(this,xe,"f")||A(this,Ne,"f")&&!A(this,Ee,"f")||(A(this,K,"m",$e).call(this,{registerHighlighter:e}),M(this,ye,(null===(t=A(this,Q,"f"))||void 0===t?void 0:t.highlighterName)||(null===(n=A(this,Y,"f"))||void 0===n?void 0:n.highlighterName)||A(this,ye,"f")),M(this,xe,!0))}init(){this.initRaw(),this.initSyntax()}buildSplitDiffLines(){var e,t,n,i,l,d,a;if(A(this,ve,"f"))return;let s=1,r=1,o=!1,f=1/0;const u=(null===(e=A(this,Q,"f"))||void 0===e?void 0:e.maxLineNumber)||0,c=(null===(t=A(this,Y,"f"))||void 0===t?void 0:t.maxLineNumber)||0;for(;s<=u||r<=c;){const e=A(this,K,"m",_e).call(this,s),t=A(this,K,"m",De).call(this,r),u=A(this,K,"m",Ae).call(this,s),c=A(this,K,"m",Me).call(this,r),h=null===e||void 0===e?void 0:e.isIncludeableLine(),m=null===t||void 0===t?void 0:t.isIncludeableLine(),p=A(this,ue,"f").length,g=!e&&!t;if(e&&!t){if(e.newLineNumber&&e.newLineNumber>r){r++;continue}null!==e.newLineNumber&&void 0!==e.newLineNumber||r++}if(t&&!e){if(t.oldLineNumber&&t.oldLineNumber>s){s++;continue}null!==t.oldLineNumber&&void 0!==t.oldLineNumber||s++}if(!e&&!u&&!t&&!c)break;if(!e&&!t){if((null===(n=A(this,re,"f"))||void 0===n?void 0:n[s])&&(null===(i=A(this,oe,"f"))||void 0===i?void 0:i[r])){s++,r++;continue}if(!u&&(null===(l=A(this,oe,"f"))||void 0===l?void 0:l[r])){r++;continue}if(!c&&(null===(d=A(this,re,"f"))||void 0===d?void 0:d[s])){s++;continue}}if(h&&m||!h&&!m?(A(this,fe,"f").push({lineNumber:s++,value:u,diff:e,isHidden:g,_isHidden:g}),A(this,ue,"f").push({lineNumber:r++,value:c,diff:t,isHidden:g,_isHidden:g})):h?(A(this,fe,"f").push({lineNumber:s++,value:u,diff:e,isHidden:g,_isHidden:g}),A(this,ue,"f").push({})):m&&(A(this,fe,"f").push({}),A(this,ue,"f").push({lineNumber:r++,value:c,diff:t,isHidden:g,_isHidden:g})),!o&&g&&(f=p),g&&(this.hasSomeLineCollapsed=!0),o=g,e&&t&&!h&&!m){const e=t,n=t.index?null===(a=A(this,te,"f"))||void 0===a?void 0:a[e.index-1]:void 0;if(n&&n.type===w.Hunk){const e=n;Number.isFinite(f)&&(e.splitInfo=Object.assign(Object.assign({},e.hunkInfo),{startHiddenIndex:f,endHiddenIndex:p,plainText:e.text,_startHiddenIndex:f,_endHiddenIndex:p,_plainText:e.text}),f=1/0),M(this,ce,Object.assign(Object.assign({},A(this,ce,"f")),{[p]:e}))}}}if(Number.isFinite(f)){const e=new L("",w.Hunk,null,null,null);e.isLast=!0,e.splitInfo={startHiddenIndex:f,endHiddenIndex:A(this,ue,"f").length,_startHiddenIndex:f,_endHiddenIndex:A(this,ue,"f").length,plainText:"",oldStartIndex:0,newStartIndex:0,oldLength:0,newLength:0,_plainText:"",_oldStartIndex:0,_newStartIndex:0,_oldLength:0,_newLength:0},M(this,ce,Object.assign(Object.assign({},A(this,ce,"f")),{[A(this,ue,"f").length]:e})),f=1/0}this.splitLineLength=A(this,ue,"f").length,M(this,ve,!0),this.notifyAll()}buildUnifiedDiffLines(){var e,t,n,i,l,d,a;if(A(this,be,"f"))return;let s=1,r=1,o=!1,f=1/0;const u=(null===(e=A(this,Q,"f"))||void 0===e?void 0:e.maxLineNumber)||0,c=(null===(t=A(this,Y,"f"))||void 0===t?void 0:t.maxLineNumber)||0;for(;s<=u||r<=c;){const e=A(this,K,"m",Ae).call(this,s),t=A(this,K,"m",_e).call(this,s),u=A(this,K,"m",Me).call(this,r),c=A(this,K,"m",De).call(this,r),h=null===t||void 0===t?void 0:t.isIncludeableLine(),m=null===c||void 0===c?void 0:c.isIncludeableLine(),p=A(this,he,"f").length,g=!t&&!c;if(t&&!c){if(t.newLineNumber&&t.newLineNumber>r){r++;continue}null!==t.newLineNumber&&void 0!==t.newLineNumber||r++}if(c&&!t){if(c.oldLineNumber&&c.oldLineNumber>s){s++;continue}null!==c.oldLineNumber&&void 0!==c.oldLineNumber||s++}if(!e&&!u&&!c&&!t)break;if(!t&&!c){if((null===(n=A(this,re,"f"))||void 0===n?void 0:n[s])&&(null===(i=A(this,oe,"f"))||void 0===i?void 0:i[r])){s++,r++;continue}if(!e&&(null===(l=A(this,oe,"f"))||void 0===l?void 0:l[r])){r++;continue}if(!u&&(null===(d=A(this,re,"f"))||void 0===d?void 0:d[s])){s++;continue}}if(h||m?h?A(this,he,"f").push({oldLineNumber:s++,value:e,diff:t,isHidden:g,_isHidden:g}):m&&A(this,he,"f").push({newLineNumber:r++,value:u,diff:c,isHidden:g,_isHidden:g}):A(this,he,"f").push({oldLineNumber:s++,newLineNumber:r++,value:u,diff:c,isHidden:g,_isHidden:g}),!o&&g&&(f=p),g&&(this.hasSomeLineCollapsed=!0),o=g,t&&c&&!h&&!m){const e=c,t=e.index?null===(a=A(this,te,"f"))||void 0===a?void 0:a[e.index-1]:void 0;if(t&&t.type===w.Hunk){const e=t;Number.isFinite(f)&&(e.unifiedInfo=Object.assign(Object.assign({},e.hunkInfo),{startHiddenIndex:f,endHiddenIndex:p,plainText:e.text,_startHiddenIndex:f,_endHiddenIndex:p,_plainText:e.text}),f=1/0),M(this,me,Object.assign(Object.assign({},A(this,me,"f")),{[p]:e}))}}}if(Number.isFinite(f)){const e=new L("",w.Hunk,null,null,null);e.isLast=!0,e.unifiedInfo={startHiddenIndex:f,endHiddenIndex:A(this,he,"f").length,_startHiddenIndex:f,_endHiddenIndex:A(this,he,"f").length,plainText:"",oldStartIndex:0,newStartIndex:0,oldLength:0,newLength:0,_plainText:"",_oldStartIndex:0,_newStartIndex:0,_oldLength:0,_newLength:0},M(this,me,Object.assign(Object.assign({},A(this,me,"f")),{[A(this,he,"f").length]:e})),f=1/0}this.unifiedLineLength=A(this,he,"f").length,M(this,be,!0),this.notifyAll()}}var Te;Q=new WeakMap,Y=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,ie=new WeakMap,le=new WeakMap,de=new WeakMap,ae=new WeakMap,se=new WeakMap,re=new WeakMap,oe=new WeakMap,fe=new WeakMap,ue=new WeakMap,ce=new WeakMap,he=new WeakMap,me=new WeakMap,pe=new WeakMap,ge=new WeakMap,xe=new WeakMap,ve=new WeakMap,be=new WeakMap,we=new WeakMap,Le=new WeakMap,Ne=new WeakMap,Ee=new WeakMap,ye=new WeakMap,ke=new WeakMap,Ie=new WeakMap,K=new WeakSet,Se=function(){this._diffList&&M(this,ee,this._diffList.map((e=>D.parse(e))))},He=function(){(this._oldFileContent||this._newFileContent)&&(this._oldFileContent&&(M(this,Q,X(this._oldFileContent,this._oldFileLang,this._oldFileName)),this.fileLineLength=Math.max(this.fileLineLength,A(this,Q,"f").maxLineNumber)),this._newFileContent&&(M(this,Y,X(this._newFileContent,this._newFileLang,this._newFileName)),this.fileLineLength=Math.max(this.fileLineLength,A(this,Y,"f").maxLineNumber)))},Fe=function(){var e,t,n,i;null===(e=A(this,Q,"f"))||void 0===e||e.doRaw(),M(this,le,null===(t=A(this,Q,"f"))||void 0===t?void 0:t.rawFile),null===(n=A(this,Y,"f"))||void 0===n||n.doRaw(),M(this,de,null===(i=A(this,Y,"f"))||void 0===i?void 0:i.rawFile)},Ce=function(){if(this._oldFileContent&&this._newFileContent)return;const e={},t={};if(this._oldFileContent||this._newFileContent){if(A(this,Q,"f")){let e=1,t=1,n="",i=!1;for(;t<=A(this,Q,"f").maxLineNumber;){const l=A(this,K,"m",De).call(this,e++),d=A(this,K,"m",_e).call(this,t);l?(n+=l.text,t=l.oldLineNumber?l.oldLineNumber+1:t):(d||(n+=A(this,K,"m",Ae).call(this,t)),t++),!i&&l&&d&&(i=i||l.noTrailingNewLine!==d.noTrailingNewLine)}if(!i&&n===this._oldFileContent)return;this._newFileContent=n,M(this,Y,X(this._newFileContent,this._newFileLang,this._newFileName)),this.fileLineLength=Math.max(this.fileLineLength,A(this,Y,"f").maxLineNumber)}else if(A(this,Y,"f")){let e=1,t=1,n="",i=!1;for(;t<=A(this,Y,"f").maxLineNumber;){const l=A(this,K,"m",_e).call(this,e++),d=A(this,K,"m",De).call(this,t);l?(n+=l.text,t=l.newLineNumber?l.newLineNumber+1:t):(d||(n+=A(this,K,"m",Me).call(this,t)),t++),!i&&d&&l&&(i=i||d.noTrailingNewLine!==l.noTrailingNewLine)}if(!i&&n===this._newFileContent)return;this._oldFileContent=n,M(this,Q,X(this._oldFileContent,this._oldFileLang,this._oldFileName)),this.fileLineLength=Math.max(this.fileLineLength,A(this,Q,"f").maxLineNumber)}}else{let n=1,i=1,l="",d="",a=!1;for(;i<=this.diffLineLength||n<=this.diffLineLength;){const s=i++,r=n++,o=A(this,K,"m",_e).call(this,s),f=A(this,K,"m",De).call(this,r);o?l+=o.text:(l+="\n",e[s]=!0),f?d+=f.text:(d+="\n",t[r]=!0),!a&&o&&f&&(a=a||o.noTrailingNewLine!==f.noTrailingNewLine)}if(!a&&l===d)return;this._oldFileContent=l,this._newFileContent=d,M(this,Q,X(this._oldFileContent,this._oldFileLang,this._oldFileName)),M(this,Y,X(this._newFileContent,this._newFileLang,this._newFileName)),M(this,re,e),M(this,oe,t),this.fileLineLength=Math.max(this.fileLineLength,A(this,Q,"f").maxLineNumber,A(this,Y,"f").maxLineNumber),M(this,Le,!0)}A(this,K,"m",Fe).call(this)},We=function(){var e;if(!(null===(e=A(this,ee,"f"))||void 0===e?void 0:e.length))return;A(this,ee,"f").forEach((e=>{e.hunks.forEach((e=>{let t=[],n=[];e.lines.forEach((e=>{e.type===w.Add?t.push(e):e.type===w.Delete?n.push(e):(F(t,n),t=[],n=[])})),F(t,n)}))})),M(this,te,[]);const t=[];A(this,ee,"f").forEach((e=>{e.hunks.forEach((e=>{t.push(...e.lines)}))})),M(this,te,t.map(((e,t)=>{var n;const i=e;if(i.index=t,i.type===w.Hunk){const e=null===(n=i.text.split("@@"))||void 0===n?void 0:n[1].split(" ").filter(Boolean),t=(null===e||void 0===e?void 0:e[0])||"",l=(null===e||void 0===e?void 0:e[1])||"",[d,a]=t.split(","),[s,r]=l.split(",");i.hunkInfo={oldStartIndex:-Number(d),oldLength:Number(a),newStartIndex:+Number(s),newLength:Number(r),_oldStartIndex:-Number(d),_oldLength:Number(a),_newStartIndex:+Number(s),_newLength:Number(r)}}return i}))),M(this,ne,{}),A(this,te,"f").forEach((e=>{e.oldLineNumber&&(this.diffLineLength=Math.max(this.diffLineLength,e.oldLineNumber),A(this,ne,"f")[e.oldLineNumber]=e)})),M(this,ie,{}),A(this,te,"f").forEach((e=>{e.newLineNumber&&(this.diffLineLength=Math.max(this.diffLineLength,e.newLineNumber),A(this,ie,"f")[e.newLineNumber]=e)}))},$e=function({registerHighlighter:e}){var t,n,i,l;null===(t=A(this,Q,"f"))||void 0===t||t.doSyntax({registerHighlighter:e}),M(this,ae,null===(n=A(this,Q,"f"))||void 0===n?void 0:n.syntaxFile),null===(i=A(this,Y,"f"))||void 0===i||i.doSyntax({registerHighlighter:e}),M(this,se,null===(l=A(this,Y,"f"))||void 0===l?void 0:l.syntaxFile)},_e=function(e){var t;if(e)return null===(t=A(this,ne,"f"))||void 0===t?void 0:t[e]},De=function(e){var t;if(e)return null===(t=A(this,ie,"f"))||void 0===t?void 0:t[e]},Ae=function(e){var t;return null===(t=A(this,le,"f"))||void 0===t?void 0:t[e]},Me=function(e){var t;return null===(t=A(this,de,"f"))||void 0===t?void 0:t[e]},function(e){e[e.hunk=1]="hunk",e[e.content=2]="content",e[e.widget=3]="widget",e[e.extend=4]="extend"}(Te||(Te={}));const Ue=(e,t)=>{const n=e.splitLineLength,i=[];return S(n,(n=>{var l,d;const a=e.getSplitHunkLine(n),s=e.getSplitLeftLine(n),r=e.getSplitRightLine(n),o=(null===t||void 0===t?void 0:t.hasRenderWidget)&&(null===(l=t.widgetData)||void 0===l?void 0:l[n+1]),f=(null===t||void 0===t?void 0:t.hasRenderExtend)&&(null===(d=t.extendData)||void 0===d?void 0:d[n+1]);a&&a.splitInfo&&a.splitInfo.startHiddenIndex<a.splitInfo.endHiddenIndex&&i.push({type:Te.hunk,index:n,lineNumber:n+1,hunkLine:a}),a&&!a.splitInfo&&!a.unifiedInfo&&a.type===w.Hunk&&i.push({type:Te.hunk,index:n,lineNumber:n+1,hunkLine:a}),!(null===s||void 0===s?void 0:s.isHidden)&&!(null===r||void 0===r?void 0:r.isHidden)&&i.push({type:Te.content,index:n,lineNumber:n+1,splitLine:{left:s,right:r}}),o&&i.push({type:Te.widget,index:n,lineNumber:n+1,widgetLine:o}),f&&i.push({type:Te.extend,index:n,lineNumber:n+1,extendLine:f})})),i},Be=e=>Ue(e,{}).filter((e=>e.type===Te.content)),ze=(e,t)=>{const n=e.unifiedLineLength,i=[];return S(n,(n=>{var l,d;const a=e.getUnifiedHunkLine(n),s=e.getUnifiedLine(n),r=(null===t||void 0===t?void 0:t.hasRenderWidget)&&(null===(l=t.widgetData)||void 0===l?void 0:l[n+1]),o=(null===t||void 0===t?void 0:t.hasRenderExtend)&&(null===(d=t.extendData)||void 0===d?void 0:d[n+1]);a&&a.unifiedInfo&&a.unifiedInfo.startHiddenIndex<a.unifiedInfo.endHiddenIndex&&i.push({type:Te.hunk,index:n,lineNumber:n+1,hunkLine:a}),a&&!a.splitInfo&&!a.unifiedInfo&&a.type===w.Hunk&&i.push({type:Te.hunk,index:n,lineNumber:n+1,hunkLine:a}),!s.isHidden&&i.push({type:Te.content,index:n,lineNumber:n+1,unifiedLine:s}),r&&i.push({type:Te.widget,index:n,lineNumber:n+1,widgetLine:r}),o&&i.push({type:Te.extend,index:n,lineNumber:n+1,extendLine:o})})),i},Pe=e=>ze(e,{}).filter((e=>e.type===Te.content)),Ve="0.0.13";var Ze;!function(e){e[e.SplitGitHub=1]="SplitGitHub",e[e.SplitGitLab=2]="SplitGitLab",e[e.Split=3]="Split",e[e.Unified=4]="Unified"}(Ze||(Ze={}));const Ge=(0,s.createContext)(null);Ge.displayName="DiffViewContext";const qe=()=>(0,s.useContext)(Ge),Xe="undefined"!==typeof window?s.useLayoutEffect:s.useEffect;var Je,Ke,Qe,Ye;let et=null;Ke=new WeakMap,Qe=new WeakMap,Je=new WeakSet,Ye=function(){return et=et||document.createElement("canvas").getContext("2d"),et};const tt=new class{constructor(){Je.add(this),Ke.set(this,""),Qe.set(this,{})}measure(e,t){const n=`${null===t||void 0===t?void 0:t.fontFamily}-${null===t||void 0===t?void 0:t.fontStyle}-${null===t||void 0===t?void 0:t.fontSize}-${e}`;if(c(this,Qe,"f")[n])return c(this,Qe,"f")[n];const i=c(this,Je,"m",Ye).call(this);if(t){const e=`${t.fontFamily}-${t.fontStyle}-${t.fontSize}`;c(this,Ke,"f")!==e&&(!function(e,t,n,i,l){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!l:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===i?l.call(e,n):l?l.value=n:t.set(e,n)}(this,Ke,e,"f"),i.font=`${t.fontStyle||""} ${t.fontSize||""} ${t.fontFamily||""}`)}else i.font="";return i.measureText(e).width}},nt=({text:e,font:t})=>{const[n,i]=(0,s.useState)(0);return Xe((()=>{const n=tt.measure(e,t);i(n)}),[e,t]),n},it=({selector:e,enable:t})=>{const[n,i]=(0,s.useState)(0),{useDiffContext:l}=qe(),d=l((0,s.useCallback)((e=>e.id),[]));return(0,s.useEffect)((()=>{if(t){const t=document.querySelector(`#diff-root${d}`),n=null===t||void 0===t?void 0:t.querySelector(e);if(!n)return;const l=n,a=()=>{var e;const t=null===n||void 0===n?void 0:n.getBoundingClientRect();i(null!==(e=null===t||void 0===t?void 0:t.width)&&void 0!==e?e:0)};a();const s=()=>{var e;l.__observeCallback.delete(a),0===l.__observeCallback.size&&(null===(e=l.__observeInstance)||void 0===e||e.disconnect(),l.removeAttribute("data-observe"),delete l.__observeCallback,delete l.__observeInstance)};if(l.__observeCallback)return l.__observeCallback.add(a),()=>s();l.__observeCallback=new Set,l.__observeCallback.add(a);const r=new ResizeObserver((()=>l.__observeCallback.forEach((e=>e()))));return l.__observeInstance=r,r.observe(l),l.setAttribute("data-observe","height"),()=>s()}}),[e,t,d]),n},lt=({selector:e,side:t,enable:n})=>{const{useDiffContext:i}=qe(),l=i((0,s.useCallback)((e=>e.id),[]));Xe((()=>{if(n){const n=document.querySelector(`#diff-root${l}`),i=Array.from((null===n||void 0===n?void 0:n.querySelectorAll(e))||[]);if(2===i.length){const e=i[0],n=i[1],l=()=>{e.style.height="auto",n.style.height="auto";const t=e.getBoundingClientRect(),i=n.getBoundingClientRect();if(t.height!==i.height){const l=Math.max(t.height,i.height);e.style.height=l+"px",n.style.height=l+"px",e.setAttribute("data-sync-height",String(l)),n.setAttribute("data-sync-height",String(l))}else e.removeAttribute("data-sync-height"),n.removeAttribute("data-sync-height")};l();const d=new ResizeObserver(l),a=e.getAttribute("data-side")===t?e:n;return d.observe(a),a.setAttribute("data-observe","height"),()=>{d.disconnect(),null===a||void 0===a||a.removeAttribute("data-observe")}}}}),[e,n,t,l])},dt="--diff-add-content--",at="--diff-del-content--",st="--diff-add-lineNumber--",rt="--diff-del-lineNumber--",ot="--diff-plain-content--",ft="--diff-expand-content--",ut="--diff-plain-lineNumber-color--",ct="--diff-plain-lineNumber--",ht="--diff-hunk-content--",mt="--diff-hunk-content-color--",pt="--diff-hunk-lineNumber--",gt="--diff-add-content-highlight--",xt="--diff-del-content-highlight--",vt="--diff-add-widget--",bt="--diff-add-widget-color--",wt="--diff-empty-content--",Lt=(e,t,n)=>e?`var(${dt})`:t?`var(${at})`:n?`var(${ot})`:`var(${ft})`,Nt=(e,t,n)=>e?`var(${st})`:t?`var(${rt})`:n?`var(${ct})`:`var(${ft})`,Et=({index:e,diffFile:t,oldLineExtend:n,newLineExtend:i,side:l,lineNumber:d})=>{const{useDiffContext:a}=qe(),r=t.getSplitLeftLine(e),o=t.getSplitRightLine(e),f=a(s.useCallback((e=>e.renderExtendLine),[])),u=l===En.old?n:i,c=l===En.old?r.lineNumber:o.lineNumber,h=l===En.old?En.new:En.old;lt({selector:`tr[data-line="${d}-extend"]`,side:u?En[l]:En[h],enable:l===En.new&&"function"===typeof f});const m=it({selector:l===En.old?".old-diff-table-wrapper":".new-diff-table-wrapper",enable:!!u&&"function"===typeof f});return f?s.createElement("tr",{"data-line":`${d}-extend`,"data-state":"extend","data-side":En[l],className:"diff-line diff-line-extend"},u?s.createElement("td",{className:`diff-line-extend-${En[l]}-content p-0`,colSpan:2},s.createElement("div",{className:"diff-line-extend-wrapper sticky left-0",style:{width:m}},m>0&&(null===u||void 0===u?void 0:u.data)&&(null===f||void 0===f?void 0:f({diffFile:t,side:l,lineNumber:c,data:u.data,onUpdate:t.notifyAll})))):s.createElement("td",{className:`diff-line-extend-${En[l]}-placeholder p-0 select-none`,style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002"))):null},yt=({index:e,diffFile:t,side:n,lineNumber:i})=>{const{useDiffContext:l}=qe(),d=t.getSplitLeftLine(e),a=t.getSplitRightLine(e),{oldLineExtend:r,newLineExtend:o}=l(s.useCallback((e=>{var t,n,i,l;return{oldLineExtend:null===(n=null===(t=e.extendData)||void 0===t?void 0:t.oldFile)||void 0===n?void 0:n[null===d||void 0===d?void 0:d.lineNumber],newLineExtend:null===(l=null===(i=e.extendData)||void 0===i?void 0:i.newFile)||void 0===l?void 0:l[null===a||void 0===a?void 0:a.lineNumber]}}),[null===d||void 0===d?void 0:d.lineNumber,null===a||void 0===a?void 0:a.lineNumber])),f=(null===r||void 0===r?void 0:r.data)||(null===o||void 0===o?void 0:o.data),u=t.getExpandEnabled(),c=n===En.old?d:a;return f&&(!c.isHidden||!u)?s.createElement(Et,{side:n,index:e,diffFile:t,lineNumber:i,oldLineExtend:r,newLineExtend:o}):null},kt=({className:e})=>s.createElement("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16",className:e},s.createElement("path",{d:"m8.177 14.323 2.896-2.896a.25.25 0 0 0-.177-.427H8.75V7.764a.75.75 0 1 0-1.5 0V11H5.104a.25.25 0 0 0-.177.427l2.896 2.896a.25.25 0 0 0 .354 0ZM2.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75ZM8.25 5a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 4.25a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5a.75.75 0 0 1 .75.75Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z"})),It=({className:e})=>s.createElement("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16",className:e},s.createElement("path",{d:"M7.823 1.677 4.927 4.573A.25.25 0 0 0 5.104 5H7.25v3.236a.75.75 0 1 0 1.5 0V5h2.146a.25.25 0 0 0 .177-.427L8.177 1.677a.25.25 0 0 0-.354 0ZM13.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm-3.75.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM7.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM4 11.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM1.75 11a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"})),St=({className:e})=>s.createElement("svg",{"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16",className:e},s.createElement("path",{d:"m8.177.677 2.896 2.896a.25.25 0 0 1-.177.427H8.75v1.25a.75.75 0 0 1-1.5 0V4H5.104a.25.25 0 0 1-.177-.427L7.823.677a.25.25 0 0 1 .354 0ZM7.25 10.75a.75.75 0 0 1 1.5 0V12h2.146a.25.25 0 0 1 .177.427l-2.896 2.896a.25.25 0 0 1-.354 0l-2.896-2.896A.25.25 0 0 1 5.104 12H7.25v-1.25Zm-5-2a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM6 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 6 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5ZM12 8a.75.75 0 0 1-.75.75h-.5a.75.75 0 0 1 0-1.5h.5A.75.75 0 0 1 12 8Zm2.25.75a.75.75 0 0 0 0-1.5h-.5a.75.75 0 0 0 0 1.5h.5Z"})),Ht=()=>{const e=window.getSelection();for(let t=0;t<e.rangeCount;t++)e.removeRange(e.getRangeAt(t))},Ft="--diff-aside-width--",Ct=({index:e,diffFile:t,side:n,lineNumber:i})=>{var l;const d=t.getSplitHunkLine(e),a=t.getExpandEnabled();lt({selector:`tr[data-line="${i}-hunk"]`,side:En[En.old],enable:n===En.new});const r=n===En.old,o=a&&d&&d.splitInfo,f=d&&d.splitInfo&&d.splitInfo.endHiddenIndex-d.splitInfo.startHiddenIndex<je,u=d&&0===d.index,c=d&&d.isLast;return s.createElement("tr",{"data-line":`${i}-hunk`,"data-state":"hunk","data-side":En[n],className:"diff-line diff-line-hunk"},r?s.createElement(s.Fragment,null,s.createElement("td",{className:"diff-line-hunk-action sticky left-0 p-[1px] w-[1%] min-w-[40px] select-none",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`,width:`var(${Ft})`,minWidth:`var(${Ft})`,maxWidth:`var(${Ft})`}},o?u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):c?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px] relative",title:"Expand Down","data-title":"Expand Down",onClick:()=>{t.onSplitHunkExpand("down",e)}},s.createElement(kt,{className:"fill-current"})):f?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onSplitHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"pl-[1.5em]",style:{color:`var(${mt})`}},(null===(l=d.splitInfo)||void 0===l?void 0:l.plainText)||d.text))):s.createElement("td",{className:"diff-line-hunk-placeholder select-none",colSpan:2,style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"min-h-[28px]"},"\u2002")))},Wt=({index:e,diffFile:t,side:n,lineNumber:i})=>{var l;const d=t.getSplitHunkLine(e),a=t.getExpandEnabled();lt({selector:`tr[data-line="${i}-hunk"]`,side:En[En.old],enable:n===En.new});const r=a&&d&&d.splitInfo,o=d&&d.splitInfo&&d.splitInfo.endHiddenIndex-d.splitInfo.startHiddenIndex<je,f=d&&0===d.index,u=d&&d.isLast;return s.createElement("tr",{"data-line":`${i}-hunk`,"data-state":"hunk","data-side":En[n],className:"diff-line diff-line-hunk"},s.createElement("td",{className:"diff-line-hunk-action sticky left-0 p-[1px] w-[1%] min-w-[40px] select-none",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`,width:`var(${Ft})`,minWidth:`var(${Ft})`,maxWidth:`var(${Ft})`}},r?f?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px] relative",title:"Expand Down","data-title":"Expand Down",onClick:()=>{t.onSplitHunkExpand("down",e)}},s.createElement(kt,{className:"fill-current"})):o?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onSplitHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"pl-[1.5em]",style:{color:`var(${mt})`}},(null===(l=d.splitInfo)||void 0===l?void 0:l.plainText)||d.text)))},$t=({index:e,diffFile:t,side:n,lineNumber:i})=>{const{useDiffContext:l}=qe(),d=l(s.useCallback((e=>e.mode),[]));return d===Ze.SplitGitHub||d===Ze.Split||d===Ze.Unified?s.createElement(Ct,{index:e,diffFile:t,side:n,lineNumber:i}):s.createElement(Wt,{index:e,diffFile:t,side:n,lineNumber:i})},_t=({index:e,diffFile:t,side:n,lineNumber:i})=>{const l=t.getSplitHunkLine(e),d=l&&l.splitInfo&&l.splitInfo.startHiddenIndex<l.splitInfo.endHiddenIndex,a=l&&t._getIsPureDiffRender()&&!l.splitInfo;return d||a?s.createElement($t,{index:e,diffFile:t,side:n,lineNumber:i}):null},Dt=({side:e,className:t,lineNumber:n,onWidgetClick:i,onOpenAddWidget:l})=>s.createElement("div",{className:"diff-add-widget-wrapper"+(t?" "+t:""),style:{width:`calc(var(${Nn}) * 1.4)`,height:`calc(var(${Nn}) * 1.4)`}},s.createElement("button",{className:"diff-add-widget w-full h-full invisible cursor-pointer rounded-md flex items-center justify-center transition-transform origin-center group-hover:visible hover:scale-110",style:{color:`var(${bt})`,zIndex:1,fontSize:"1.2em",backgroundColor:`var(${vt})`},onClick:()=>{l(n,e),null===i||void 0===i||i(n,e)}},"+")),At=({lineNumber:e,side:t,onWidgetClick:n,onOpenAddWidget:i})=>s.createElement("div",{className:"diff-add-widget-wrapper absolute left-[100%] top-[1px] translate-x-[-50%]",style:{width:`calc(var(${Nn}) * 1.4)`,height:`calc(var(${Nn}) * 1.4)`}},s.createElement("button",{className:"diff-add-widget w-full h-full invisible cursor-pointer rounded-md flex items-center justify-center transition-transform origin-center group-hover:visible hover:scale-110",style:{color:`var(${bt})`,zIndex:1,fontSize:"1.2em",backgroundColor:`var(${vt})`},onClick:()=>{i(e,t),null===n||void 0===n||n(e,t)}},"+")),Mt=()=>s.createElement("svg",{"aria-label":"No newline at end of file",role:"img",viewBox:"0 0 16 16",version:"1.1",fill:"currentColor"},s.createElement("path",{d:"M4.25 7.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z"}),s.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"})),jt={},Rt=(e=>{const t={};return n=>{if(t[n])return t[n];const i=e(n);return t[n]=i,i}})((e=>{if(!e)return jt;const t={};return e.split(";").forEach((e=>{const[n,i]=e.split(":");if(!n)return;const l=(e=>{const t=e.split("-");return 1===t.length?t[0]:t[0]+t.slice(1).map((e=>e[0].toUpperCase()+e.slice(1))).join("")})(n.trim());t[l]=i.trim()})),t})),Ot=({rawLine:e,diffLine:t,operator:n,enableWrap:i})=>{const d=null===t||void 0===t?void 0:t.range;if(d){const a=e.slice(0,d.location),r=e.slice(d.location,d.location+d.length),o=e.slice(d.location+d.length),f=r.includes("\n"),u=f?r.replace("\n",""):r,c=d.newLineSymbol;return s.createElement("span",{className:"diff-line-content-raw"},s.createElement("span",{"data-range-start":d.location,"data-range-end":d.location+d.length},a,s.createElement("span",{"data-diff-highlight":!0,className:"rounded-[0.2em]",style:{backgroundColor:"add"===n?`var(${gt})`:`var(${xt})`}},f?`${u}${c===l.LF?"\u240a":c===l.CR?"\u240d":c===l.CRLF?"\u240d\u240a":""}`:r),o),c===l.NEWLINE&&t.noTrailingNewLine&&s.createElement("span",{"data-no-newline-at-end-of-file":!0,className:i?"block text-red-500":"inline-block align-middle text-red-500",style:{width:`var(${Nn})`,height:`var(${Nn})`}},s.createElement(Mt,null)))}return s.createElement("span",{className:"diff-line-content-raw"},e)},Tt=({rawLine:e,diffLine:t,operator:n,syntaxLine:i,enableWrap:d})=>{var a,r;if(!i)return s.createElement(Ot,{rawLine:e,diffLine:t,operator:n});const o=null===t||void 0===t?void 0:t.range;if(o){const e=o.newLineSymbol;return s.createElement("span",{className:"diff-line-syntax-raw"},s.createElement("span",{"data-range-start":o.location,"data-range-end":o.location+o.length},null===(a=i.nodeList)||void 0===a?void 0:a.map((({node:t,wrapper:i},d)=>{var a,r,f,u,c,h;if(t.endIndex<o.location||o.location+o.length<t.startIndex)return s.createElement("span",{key:d,"data-start":t.startIndex,"data-end":t.endIndex,className:null===(r=null===(a=null===i||void 0===i?void 0:i.properties)||void 0===a?void 0:a.className)||void 0===r?void 0:r.join(" "),style:Rt((null===(f=null===i||void 0===i?void 0:i.properties)||void 0===f?void 0:f.style)||"")},t.value);{const a=o.location-t.startIndex,r=a<0?0:a,f=t.value.slice(0,r),m=t.value.slice(r,a+o.length),p=t.value.slice(a+o.length),g=f.length||o.location===t.startIndex,x=p.length||t.endIndex===o.location+o.length-1,v=m.includes("\n"),b=v?m.replace("\n",""):m;return s.createElement("span",{key:d,"data-start":t.startIndex,"data-end":t.endIndex,className:null===(c=null===(u=null===i||void 0===i?void 0:i.properties)||void 0===u?void 0:u.className)||void 0===c?void 0:c.join(" "),style:Rt((null===(h=null===i||void 0===i?void 0:i.properties)||void 0===h?void 0:h.style)||"")},f,s.createElement("span",{"data-diff-highlight":!0,style:{backgroundColor:"add"===n?`var(${gt})`:`var(${xt})`,borderTopLeftRadius:g?"0.2em":void 0,borderBottomLeftRadius:g?"0.2em":void 0,borderTopRightRadius:x||v?"0.2em":void 0,borderBottomRightRadius:x||v?"0.2em":void 0}},v?`${b}${e===l.LF?"\u240a":e===l.CR?"\u240d":e===l.CRLF?"\u240d\u240a":""}`:m),p)}}))),e===l.NEWLINE&&t.noTrailingNewLine&&s.createElement("span",{"data-no-newline-at-end-of-file":!0,className:d?"block text-red-500":"inline-block align-middle text-red-500",style:{width:`var(${Nn})`,height:`var(${Nn})`}},s.createElement(Mt,null)))}return s.createElement("span",{className:"diff-line-syntax-raw"},null===(r=null===i||void 0===i?void 0:i.nodeList)||void 0===r?void 0:r.map((({node:e,wrapper:t},n)=>{var i,l,d;return s.createElement("span",{key:n,"data-start":e.startIndex,"data-end":e.endIndex,className:null===(l=null===(i=null===t||void 0===t?void 0:t.properties)||void 0===i?void 0:i.className)||void 0===l?void 0:l.join(" "),style:Rt((null===(d=null===t||void 0===t?void 0:t.properties)||void 0===d?void 0:d.style)||"")},e.value)})))},Ut=({diffLine:e,rawLine:t,syntaxLine:n,enableWrap:i,enableHighlight:l})=>{var d;const a=(null===e||void 0===e?void 0:e.type)===w.Add,r=(null===e||void 0===e?void 0:e.type)===w.Delete,o=(null===(d=null===n||void 0===n?void 0:n.nodeList)||void 0===d?void 0:d.length)>150;return s.createElement("div",{className:"diff-line-content-item pl-[2.0em]","data-val":t,style:{whiteSpace:i?"pre-wrap":"pre",wordBreak:i?"break-all":"initial"}},s.createElement("span",{"data-operator":a?"+":r?"-":void 0,className:"diff-line-content-operator inline-block w-[1.5em] ml-[-1.5em] indent-[0.2em] select-none"},a?"+":r?"-":" "),l&&n&&!o?s.createElement(Tt,{operator:a?"add":r?"del":void 0,rawLine:t,diffLine:e,syntaxLine:n,enableWrap:i}):s.createElement(Ot,{operator:a?"add":r?"del":void 0,rawLine:t,diffLine:e,enableWrap:i}))},Bt=(0,s.createContext)(null);Bt.displayName="DiffWidgetContext";const zt=()=>(0,s.useContext)(Bt),Pt=({index:e,diffFile:t,lineNumber:n,side:i})=>{var l,d;const a=i===En.old?t.getOldSyntaxLine:t.getNewSyntaxLine,r=t.getSplitLeftLine(e),o=t.getSplitRightLine(e),f=i===En.old?r:o,u=!!(null===f||void 0===f?void 0:f.diff),c=!!f.lineNumber,h=N(null===f||void 0===f?void 0:f.diff),m=(null===(l=null===f||void 0===f?void 0:f.diff)||void 0===l?void 0:l.type)===w.Add,p=(null===(d=null===f||void 0===f?void 0:f.diff)||void 0===d?void 0:d.type)===w.Delete,{useDiffContext:g}=qe(),{enableHighlight:x,enableAddWidget:v,onAddWidgetClick:b}=g(s.useCallback((e=>({enableHighlight:e.enableHighlight,enableAddWidget:e.enableAddWidget,onAddWidgetClick:e.onAddWidgetClick})),[])),{useWidget:L}=zt(),E=L.getReadonlyState().setWidget,y=Lt(m,p,u),k=Nt(m,p,u),I=a(f.lineNumber);return s.createElement("tr",{"data-line":n,"data-state":u||!c?"diff":"plain","data-side":En[i],className:"diff-line"+(c?" group":"")},c?s.createElement(s.Fragment,null,s.createElement("td",{className:`diff-line-${En[i]}-num sticky left-0 pl-[10px] pr-[10px] text-right align-top select-none w-[1%] min-w-[40px]`,style:{backgroundColor:k,color:`var(${ut})`,width:`var(${Ft})`,minWidth:`var(${Ft})`,maxWidth:`var(${Ft})`}},u&&v&&s.createElement(Dt,{index:e,lineNumber:f.lineNumber,side:i,diffFile:t,onWidgetClick:(...e)=>{var t;return null===(t=b.current)||void 0===t?void 0:t.call(b,...e)},className:"absolute left-[100%] translate-x-[-50%] z-[1]",onOpenAddWidget:(e,t)=>E({lineNumber:e,side:t})}),s.createElement("span",{"data-line-num":f.lineNumber,style:{opacity:h?void 0:.5}},f.lineNumber)),s.createElement("td",{className:`diff-line-${En[i]}-content pr-[10px] align-top`,style:{backgroundColor:y}},s.createElement(Ut,{enableWrap:!1,diffFile:t,rawLine:f.value,diffLine:f.diff,syntaxLine:I,enableHighlight:x}))):s.createElement("td",{className:`diff-line-${En[i]}-placeholder select-none`,style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002")))},Vt=({index:e,diffFile:t,lineNumber:n,side:i})=>{const l=(i===En.old?t.getSplitLeftLine:t.getSplitRightLine)(e);return(null===l||void 0===l?void 0:l.isHidden)?null:s.createElement(Pt,{index:e,diffFile:t,lineNumber:n,side:i})},Zt=({diffFile:e,side:t,lineNumber:n,currentLine:i,setWidget:l,currentWidget:d})=>{const a=t===En.old?En.new:En.old,{useDiffContext:r}=qe(),o=r(s.useCallback((e=>e.renderWidgetLine),[]));lt({selector:`tr[data-line="${n}-widget"]`,side:d?En[t]:En[a],enable:t===En.new&&"function"===typeof o});const f=it({selector:t===En.old?".old-diff-table-wrapper":".new-diff-table-wrapper",enable:!!d&&"function"===typeof o});return o?s.createElement("tr",{"data-line":`${n}-widget`,"data-state":"widget","data-side":En[t],className:"diff-line diff-line-widget"},d?s.createElement("td",{className:`diff-line-widget-${En[t]}-content p-0`,colSpan:2},s.createElement("div",{className:"diff-line-widget-wrapper sticky left-0",style:{width:f}},f>0&&(null===o||void 0===o?void 0:o({diffFile:e,side:t,lineNumber:i.lineNumber,onClose:()=>l({})})))):s.createElement("td",{className:`diff-line-widget-${En[t]}-placeholder p-0`,style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002"))):null},Gt=({index:e,diffFile:t,side:n,lineNumber:i})=>{const{useWidget:l}=zt(),{widgetLineNumber:d,widgetSide:a,setWidget:r}=l(s.useCallback((e=>({widgetLineNumber:e.widgetLineNumber,widgetSide:e.widgetSide,setWidget:e.setWidget})),[])),o=t.getSplitLeftLine(e),f=t.getSplitRightLine(e),u=o.lineNumber&&a===En.old&&d===o.lineNumber,c=f.lineNumber&&a===En.new&&d===f.lineNumber,h=n===En.old?o:f,m=n===En.old?u:c;return u||c?s.createElement(Zt,{index:e,diffFile:t,side:n,lineNumber:i,currentLine:h,setWidget:r,currentWidget:m}):null},qt=e=>{const t=e.target;t&&t instanceof HTMLElement&&"BUTTON"===t.nodeName&&Ht()},Xt=({side:e,diffFile:t})=>{const n=e===En.new?"new-diff-table":"old-diff-table",i=Be(t);return s.createElement("table",{className:n+" border-collapse w-full","data-mode":En[e]},s.createElement("colgroup",null,s.createElement("col",{className:`diff-table-${En[e]}-num-col`}),s.createElement("col",{className:`diff-table-${En[e]}-content-col`})),s.createElement("thead",{className:"hidden"},s.createElement("tr",null,s.createElement("th",{scope:"col"},En[e]," line number"),s.createElement("th",{scope:"col"},En[e]," line content"))),s.createElement("tbody",{className:"diff-table-body leading-[1.4]",onMouseDownCapture:qt},i.map((n=>s.createElement(s.Fragment,{key:n.index},s.createElement(_t,{index:n.index,side:e,lineNumber:n.lineNumber,diffFile:t}),s.createElement(Vt,{index:n.index,side:e,lineNumber:n.lineNumber,diffFile:t}),s.createElement(Gt,{index:n.index,side:e,lineNumber:n.lineNumber,diffFile:t}),s.createElement(yt,{index:n.index,side:e,lineNumber:n.lineNumber,diffFile:t})))),s.createElement(_t,{side:e,index:t.splitLineLength,lineNumber:t.splitLineLength,diffFile:t})))},Jt=(0,s.memo)((({diffFile:e})=>{const t=(0,s.useRef)(null),n=(0,s.useRef)(null),i=Math.max(e.splitLineLength,e.fileLineLength),{useDiffContext:l}=qe(),d=l((0,s.useCallback)((e=>e.fontSize),[]));(0,f.useSyncExternalStore)(e.subscribe,e.getUpdateCount),(0,s.useEffect)((()=>{const e=t.current,i=n.current;if(e&&i)return((e,t)=>{const n=function(n){null!==n&&null!==n.target&&(n.target===e?(t.scrollTop=e.scrollTop,t.scrollLeft=e.scrollLeft):(e.scrollTop=t.scrollTop,e.scrollLeft=t.scrollLeft))};return e.onscroll||(e.onscroll=n),t.onscroll||(t.onscroll=n),()=>{e.onscroll=null,t.onscroll=null}})(e,i)}),[]);const a=s.useMemo((()=>({fontSize:d+"px",fontFamily:"Menlo, Consolas, monospace"})),[d]),r=nt({text:i.toString(),font:a}),o=Math.max(40,r+25);return s.createElement("div",{className:"split-diff-view split-diff-view-wrap w-full flex basis-[50%]"},s.createElement("div",{className:"old-diff-table-wrapper overflow-x-auto overflow-y-hidden w-full scrollbar-hide scrollbar-disable",ref:t,style:{[Ft]:`${Math.round(o)}px`,overscrollBehaviorX:"none",fontFamily:"Menlo, Consolas, monospace",fontSize:`var(${Nn})`}},s.createElement(Xt,{side:En.old,diffFile:e})),s.createElement("div",{className:"diff-split-line w-[1.5px] bg-[rgb(222,222,222)]"}),s.createElement("div",{className:"new-diff-table-wrapper overflow-x-auto overflow-y-hidden w-full scrollbar-hide scrollbar-disable",ref:n,style:{[Ft]:`${Math.round(o)}px`,overscrollBehaviorX:"none",fontFamily:"Menlo, Consolas, monospace",fontSize:`var(${Nn})`}},s.createElement(Xt,{side:En.new,diffFile:e})))}));Jt.displayName="DiffSplitViewNormal";const Kt=({index:e,diffFile:t,lineNumber:n,oldLineExtend:i,newLineExtend:l})=>{const{useDiffContext:d}=qe(),a=t.getSplitLeftLine(e),r=t.getSplitRightLine(e),o=d(s.useCallback((e=>e.renderExtendLine),[]));return o?s.createElement("tr",{"data-line":`${n}-extend`,"data-state":"extend",className:"diff-line diff-line-extend"},i?s.createElement("td",{className:"diff-line-extend-old-content p-0",colSpan:2},s.createElement("div",{className:"diff-line-extend-wrapper"},(null===i||void 0===i?void 0:i.data)&&(null===o||void 0===o?void 0:o({diffFile:t,side:En.old,lineNumber:a.lineNumber,data:i.data,onUpdate:t.notifyAll})))):s.createElement("td",{className:"diff-line-extend-old-placeholder p-0 select-none",style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002")),l?s.createElement("td",{className:"diff-line-extend-new-content p-0 border-l-[1px] border-l-[rgb(222,222,222)]",colSpan:2},s.createElement("div",{className:"diff-line-extend-wrapper"},(null===l||void 0===l?void 0:l.data)&&(null===o||void 0===o?void 0:o({diffFile:t,side:En.new,lineNumber:r.lineNumber,data:l.data,onUpdate:t.notifyAll})))):s.createElement("td",{className:"diff-line-extend-new-placeholder p-0 border-l-[1px] border-l-[rgb(222,222,222)] select-none",style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002"))):null},Qt=({index:e,diffFile:t,lineNumber:n})=>{const{useDiffContext:i}=qe(),l=t.getSplitLeftLine(e),d=t.getSplitRightLine(e),{oldLineExtend:a,newLineExtend:r}=i(s.useCallback((e=>{var t,n,i,a;return{oldLineExtend:null===(n=null===(t=e.extendData)||void 0===t?void 0:t.oldFile)||void 0===n?void 0:n[null===l||void 0===l?void 0:l.lineNumber],newLineExtend:null===(a=null===(i=e.extendData)||void 0===i?void 0:i.newFile)||void 0===a?void 0:a[null===d||void 0===d?void 0:d.lineNumber]}}),[null===l||void 0===l?void 0:l.lineNumber,null===d||void 0===d?void 0:d.lineNumber])),o=(null===a||void 0===a?void 0:a.data)||(null===r||void 0===r?void 0:r.data),f=t.getExpandEnabled();return o&&(!(null===l||void 0===l?void 0:l.isHidden)&&!(null===d||void 0===d?void 0:d.isHidden)||!f)?s.createElement(Kt,{index:e,diffFile:t,lineNumber:n,oldLineExtend:a,newLineExtend:r}):null},Yt=({index:e,diffFile:t,lineNumber:n})=>{var i;const l=t.getSplitHunkLine(e),d=t.getExpandEnabled()&&l&&l.splitInfo,a=l&&l.splitInfo&&l.splitInfo.endHiddenIndex-l.splitInfo.startHiddenIndex<je,r=l&&l.splitInfo&&l.splitInfo.startHiddenIndex<l.splitInfo.endHiddenIndex,o=l&&t._getIsPureDiffRender()&&!l.splitInfo,f=l&&0===l.index,u=l&&l.isLast;return r||o?s.createElement("tr",{"data-line":`${n}-hunk`,"data-state":"hunk",className:"diff-line diff-line-hunk"},s.createElement("td",{className:"diff-line-hunk-action p-[1px] w-[1%] min-w-[40px] select-none relative",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`}},d?f?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})):a?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onSplitHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`},colSpan:3},s.createElement("div",{className:"pl-[1.5em]",style:{color:`var(${mt})`}},(null===(i=l.splitInfo)||void 0===i?void 0:i.plainText)||l.text))):null},en=({index:e,diffFile:t,lineNumber:n})=>{var i,l;const d=t.getSplitHunkLine(e),a=t.getExpandEnabled()&&d&&d.splitInfo,r=d&&d.splitInfo&&d.splitInfo.endHiddenIndex-d.splitInfo.startHiddenIndex<je,o=d&&d.splitInfo&&d.splitInfo.startHiddenIndex<d.splitInfo.endHiddenIndex,f=d&&t._getIsPureDiffRender()&&!d.splitInfo,u=d&&0===d.index,c=d&&d.isLast;return o||f?s.createElement("tr",{"data-line":`${n}-hunk`,"data-state":"hunk",className:"diff-line diff-line-hunk"},s.createElement("td",{className:"diff-line-hunk-action p-[1px] w-[1%] min-w-[40px] select-none relative",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`}},a?u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):c?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})):r?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onSplitHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"pl-[1.5em]",style:{color:`var(${mt})`}},(null===(i=d.splitInfo)||void 0===i?void 0:i.plainText)||d.text)),s.createElement("td",{className:"diff-line-hunk-action p-[1px] w-[1%] min-w-[40px] select-none relative border-l-[1px] border-l-[rgb(222,222,222)]",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`}},a?u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):c?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})):r?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onSplitHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onSplitHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onSplitHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"pl-[1.5em]",style:{color:`var(${mt})`}},(null===(l=d.splitInfo)||void 0===l?void 0:l.plainText)||d.text))):null},tn=({index:e,diffFile:t,lineNumber:n})=>{const{useDiffContext:i}=qe(),l=i(s.useCallback((e=>e.mode),[]));return l===Ze.SplitGitHub||l===Ze.Split||l===Ze.Unified?s.createElement(Yt,{index:e,diffFile:t,lineNumber:n}):s.createElement(en,{index:e,diffFile:t,lineNumber:n})},nn=({index:e,diffFile:t,lineNumber:n})=>{var i,l;const d=t.getSplitLeftLine(e),a=t.getSplitRightLine(e),r=t.getOldSyntaxLine(null===d||void 0===d?void 0:d.lineNumber),o=t.getNewSyntaxLine(null===a||void 0===a?void 0:a.lineNumber),f=!!(null===d||void 0===d?void 0:d.diff)||!!(null===a||void 0===a?void 0:a.diff),u=N(null===d||void 0===d?void 0:d.diff)||N(null===a||void 0===a?void 0:a.diff),c=(null===(i=null===d||void 0===d?void 0:d.diff)||void 0===i?void 0:i.type)===w.Delete,h=(null===(l=null===a||void 0===a?void 0:a.diff)||void 0===l?void 0:l.type)===w.Add,{useDiffContext:m}=qe(),{enableHighlight:p,enableAddWidget:g,onAddWidgetClick:x}=m(s.useCallback((e=>({enableHighlight:e.enableHighlight,enableAddWidget:e.enableAddWidget,onAddWidgetClick:e.onAddWidgetClick})),[])),{useWidget:v}=zt(),b=v.getReadonlyState().setWidget,L=!!d.lineNumber,E=!!a.lineNumber,y=Lt(!1,c,f),k=Nt(!1,c,f),I=Lt(h,!1,f),S=Nt(h,!1,f);return s.createElement("tr",{"data-line":n,"data-state":f?"diff":"plain",className:"diff-line"},L?s.createElement(s.Fragment,null,s.createElement("td",{className:"diff-line-old-num group relative pl-[10px] pr-[10px] text-right align-top select-none w-[1%] min-w-[40px]","data-side":En[En.old],style:{backgroundColor:k,color:`var(${ut})`}},f&&g&&s.createElement(Dt,{index:e,lineNumber:d.lineNumber,side:En.old,diffFile:t,onWidgetClick:(...e)=>{var t;return null===(t=x.current)||void 0===t?void 0:t.call(x,...e)},className:"absolute left-[100%] translate-x-[-50%] z-[1]",onOpenAddWidget:(e,t)=>b({lineNumber:e,side:t})}),s.createElement("span",{"data-line-num":d.lineNumber,style:{opacity:u?void 0:.5}},d.lineNumber)),s.createElement("td",{className:"diff-line-old-content group relative pr-[10px] align-top","data-side":En[En.old],style:{backgroundColor:y}},f&&g&&s.createElement(Dt,{index:e,lineNumber:d.lineNumber,side:En.old,diffFile:t,onWidgetClick:(...e)=>{var t;return null===(t=x.current)||void 0===t?void 0:t.call(x,...e)},className:"absolute right-[100%] translate-x-[50%] z-[1] select-none",onOpenAddWidget:(e,t)=>b({lineNumber:e,side:t})}),s.createElement(Ut,{enableWrap:!0,diffFile:t,rawLine:d.value,diffLine:d.diff,syntaxLine:r,enableHighlight:p}))):s.createElement("td",{className:"diff-line-old-placeholder select-none","data-side":En[En.old],style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002")),E?s.createElement(s.Fragment,null,s.createElement("td",{className:"diff-line-new-num group relative pl-[10px] pr-[10px] text-right align-top select-none w-[1%] min-w-[40px] border-l-[1px] border-l-[rgb(222,222,222)]","data-side":En[En.new],style:{backgroundColor:S,color:`var(${ut})`}},f&&g&&s.createElement(Dt,{index:e,lineNumber:a.lineNumber,side:En.new,diffFile:t,onWidgetClick:(...e)=>{var t;return null===(t=x.current)||void 0===t?void 0:t.call(x,...e)},className:"absolute left-[100%] translate-x-[-50%] z-[1]",onOpenAddWidget:(e,t)=>b({lineNumber:e,side:t})}),s.createElement("span",{"data-line-num":a.lineNumber,style:{opacity:u?void 0:.5}},a.lineNumber)),s.createElement("td",{className:"diff-line-new-content group relative pr-[10px] align-top","data-side":En[En.new],style:{backgroundColor:I}},f&&g&&s.createElement(Dt,{index:e,lineNumber:a.lineNumber,side:En.new,diffFile:t,onWidgetClick:(...e)=>{var t;return null===(t=x.current)||void 0===t?void 0:t.call(x,...e)},className:"absolute right-[100%] translate-x-[50%] z-[1] select-none",onOpenAddWidget:(e,t)=>b({lineNumber:e,side:t})}),s.createElement(Ut,{enableWrap:!0,diffFile:t,rawLine:a.value||"",diffLine:a.diff,syntaxLine:o,enableHighlight:p}))):s.createElement("td",{className:"diff-line-new-placeholder select-none border-l-[1px] border-l-[rgb(222,222,222)]",style:{backgroundColor:`var(${wt})`},"data-side":En[En.new],colSpan:2},s.createElement("span",null,"\u2002")))},ln=({index:e,diffFile:t,lineNumber:n})=>{const i=t.getSplitLeftLine(e),l=t.getSplitRightLine(e);return(null===i||void 0===i?void 0:i.isHidden)&&(null===l||void 0===l?void 0:l.isHidden)?null:s.createElement(nn,{index:e,diffFile:t,lineNumber:n})},dn=({index:e,diffFile:t,lineNumber:n,oldLineWidget:i,newLineWidget:l})=>{const{useWidget:d}=zt(),a=d.getReadonlyState().setWidget,{useDiffContext:r}=qe(),o=r(s.useCallback((e=>e.renderWidgetLine),[])),f=t.getSplitLeftLine(e),u=t.getSplitRightLine(e);return o?s.createElement("tr",{"data-line":`${n}-widget`,"data-state":"widget",className:"diff-line diff-line-widget"},i?s.createElement("td",{className:"diff-line-widget-old-content p-0",colSpan:2},s.createElement("div",{className:"diff-line-widget-wrapper"},null===o||void 0===o?void 0:o({diffFile:t,side:En.old,lineNumber:f.lineNumber,onClose:()=>a({})}))):s.createElement("td",{className:"diff-line-widget-old-placeholder p-0 select-none",style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002")),l?s.createElement("td",{className:"diff-line-widget-new-content p-0 border-l-[1px] border-l-[rgb(222,222,222)]",colSpan:2},s.createElement("div",{className:"diff-line-widget-wrapper"},null===o||void 0===o?void 0:o({diffFile:t,side:En.new,lineNumber:u.lineNumber,onClose:()=>a({})}))):s.createElement("td",{className:"diff-line-widget-new-placeholder p-0 border-l-[1px] border-l-[rgb(222,222,222)] select-none",style:{backgroundColor:`var(${wt})`},colSpan:2},s.createElement("span",null,"\u2002"))):null},an=({index:e,diffFile:t,lineNumber:n})=>{const{useWidget:i}=zt(),{widgetLineNumber:l,widgetSide:d}=i(s.useCallback((e=>({widgetLineNumber:e.widgetLineNumber,widgetSide:e.widgetSide})),[])),a=t.getSplitLeftLine(e),r=t.getSplitRightLine(e),o=a.lineNumber&&d===En.old&&l===a.lineNumber,f=r.lineNumber&&d===En.new&&l===r.lineNumber;return o||f?s.createElement(dn,{index:e,diffFile:t,lineNumber:n,oldLineWidget:o,newLineWidget:f}):null},sn=({useSelector:e,id:t})=>{const n=e((e=>e.splitRef));return s.createElement("style",{"data-select-style":!0},n===En.old?`#${t} td[data-side="${En[En.new]}"] {user-select: none}`:n===En.new?`#${t} td[data-side="${En[En.old]}"] {user-select: none}`:"")},rn=(0,s.memo)((({diffFile:e})=>{const t=Math.max(e.splitLineLength,e.fileLineLength),{useDiffContext:n}=qe(),i=(0,s.useMemo)((()=>(0,r.MT)((()=>{const e=(0,o.iH)(void 0);return{splitRef:e,setSplit:t=>{(0,u.flushSync)((()=>{e.value=t}))}}}))),[]),l=i.getReadonlyState().setSplit,d=n((0,s.useCallback)((e=>e.fontSize),[]));(0,f.useSyncExternalStore)(e.subscribe,e.getUpdateCount);const a=(0,s.useCallback)((e=>{let t=e.target;if(t&&t instanceof HTMLElement&&"BUTTON"===t.nodeName)Ht();else{for(;t&&t instanceof HTMLElement&&"TD"!==t.nodeName;)t=t.parentElement;if(t instanceof HTMLElement){const e=t.getAttribute("data-side");e&&(l(En[e]),Ht())}}}),[l]),c=(0,s.useMemo)((()=>({fontSize:d+"px",fontFamily:"Menlo, Consolas, monospace"})),[d]),h=nt({text:t.toString(),font:c}),m=Math.max(40,h+25),p=Be(e);return s.createElement("div",{className:"split-diff-view split-diff-view-normal w-full"},s.createElement("div",{className:"diff-table-wrapper w-full",style:{fontFamily:"Menlo, Consolas, monospace",fontSize:`var(${Nn})`}},s.createElement(sn,{useSelector:i,id:`diff-root${e.getId()}`}),s.createElement("table",{className:"diff-table border-collapse table-fixed w-full"},s.createElement("colgroup",null,s.createElement("col",{className:"diff-table-old-num-col",width:Math.round(m)}),s.createElement("col",{className:"diff-table-old-content-col"}),s.createElement("col",{className:"diff-table-new-num-col",width:Math.round(m)}),s.createElement("col",{className:"diff-table-new-content-col"})),s.createElement("thead",{className:"hidden"},s.createElement("tr",null,s.createElement("th",{scope:"col"},"old line number"),s.createElement("th",{scope:"col"},"old line content"),s.createElement("th",{scope:"col"},"new line number"),s.createElement("th",{scope:"col"},"new line content"))),s.createElement("tbody",{className:"diff-table-body leading-[1.4]",onMouseDownCapture:a},p.map((t=>s.createElement(s.Fragment,{key:t.index},s.createElement(tn,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(ln,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(an,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(Qt,{index:t.index,lineNumber:t.lineNumber,diffFile:e})))),s.createElement(tn,{index:e.splitLineLength,lineNumber:e.splitLineLength,diffFile:e})))))}));rn.displayName="DiffSplitViewWrap";const on=(0,s.memo)((({diffFile:e})=>{const{useDiffContext:t}=qe(),n=t(s.useCallback((e=>e.enableWrap),[])),i=(0,s.useMemo)((()=>(0,r.MT)((()=>{const e=(0,o.iH)(void 0),n=(0,o.iH)(void 0);return{widgetSide:e,widgetLineNumber:n,setWidget:({side:i,lineNumber:l})=>{const{renderWidgetLine:d}=t.getReadonlyState();"function"===typeof d&&(e.value=i,n.value=l)}}}))),[t]),l=(0,s.useMemo)((()=>({useWidget:i})),[i]);return(0,s.useEffect)((()=>{const{setWidget:e}=i.getReadonlyState();e({})}),[e,i]),s.createElement(Bt.Provider,{value:l},n?s.createElement(rn,{diffFile:e}):s.createElement(Jt,{diffFile:e}))}));on.displayName="DiffSplitView";const fn=({index:e,diffFile:t,lineNumber:n,oldLineExtend:i,newLineExtend:l})=>{const{useDiffContext:d}=qe(),a=d((0,s.useCallback)((e=>e.renderExtendLine),[])),r=t.getUnifiedLine(e),o=it({selector:".unified-diff-table-wrapper",enable:"function"===typeof a});return a?s.createElement("tr",{"data-line":`${n}-extend`,"data-state":"extend",className:"diff-line diff-line-extend"},s.createElement("td",{className:"diff-line-extend-content align-top p-0",colSpan:2},s.createElement("div",{className:"diff-line-extend-wrapper sticky left-0",style:{width:o}},o>0&&(null===i||void 0===i?void 0:i.data)&&(null===a||void 0===a?void 0:a({diffFile:t,side:En.old,lineNumber:r.oldLineNumber,data:i.data,onUpdate:t.notifyAll})),o>0&&(null===l||void 0===l?void 0:l.data)&&(null===a||void 0===a?void 0:a({diffFile:t,side:En.new,lineNumber:r.newLineNumber,data:l.data,onUpdate:t.notifyAll}))))):null},un=({index:e,diffFile:t,lineNumber:n})=>{const{useDiffContext:i}=qe(),l=t.getUnifiedLine(e),{oldLineExtend:d,newLineExtend:a}=i((0,s.useCallback)((e=>{var t,n,i,d;return{oldLineExtend:null===(n=null===(t=e.extendData)||void 0===t?void 0:t.oldFile)||void 0===n?void 0:n[null===l||void 0===l?void 0:l.oldLineNumber],newLineExtend:null===(d=null===(i=e.extendData)||void 0===i?void 0:i.newFile)||void 0===d?void 0:d[null===l||void 0===l?void 0:l.newLineNumber]}}),[l.oldLineNumber,l.newLineNumber]));return((null===d||void 0===d?void 0:d.data)||(null===a||void 0===a?void 0:a.data))&&l&&!l.isHidden&&l.diff?s.createElement(fn,{index:e,diffFile:t,lineNumber:n,oldLineExtend:d,newLineExtend:a}):null},cn=({index:e,diffFile:t,lineNumber:n})=>{var i;const l=t.getUnifiedHunkLine(e),d=t.getExpandEnabled(),{useDiffContext:a}=qe(),r=a((0,s.useCallback)((e=>e.enableWrap),[])),o=d&&l&&l.unifiedInfo,f=l&&l.unifiedInfo&&l.unifiedInfo.endHiddenIndex-l.unifiedInfo.startHiddenIndex<je,u=l&&0===l.index,c=l&&l.isLast;return s.createElement("tr",{"data-line":`${n}-hunk`,"data-state":"hunk",className:"diff-line diff-line-hunk"},s.createElement("td",{className:"diff-line-hunk-action sticky left-0 p-[1px] w-[1%] min-w-[100px] select-none",style:{backgroundColor:`var(${pt})`,color:`var(${ut})`,width:`calc(calc(var(${Ft}) + 5px) * 2)`,maxWidth:`calc(calc(var(${Ft}) + 5px) * 2)`,minWidth:`calc(calc(var(${Ft}) + 5px) * 2)`}},o?u?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onUnifiedHunkExpand("up",e)},s.createElement(It,{className:"fill-current"})):c?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onUnifiedHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})):f?s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[6px] cursor-pointer rounded-[2px]",title:"Expand All","data-title":"Expand All",onClick:()=>t.onUnifiedHunkExpand("all",e)},s.createElement(St,{className:"fill-current"})):s.createElement(s.Fragment,null,s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Down","data-title":"Expand Down",onClick:()=>t.onUnifiedHunkExpand("down",e)},s.createElement(kt,{className:"fill-current"})),s.createElement("button",{className:"w-full diff-widget-tooltip hover:bg-blue-300 flex justify-center items-center py-[2px] cursor-pointer rounded-[2px]",title:"Expand Up","data-title":"Expand Up",onClick:()=>t.onUnifiedHunkExpand("up",e)},s.createElement(It,{className:"fill-current"}))):s.createElement("div",{className:"min-h-[28px]"},"\u2002")),s.createElement("td",{className:"diff-line-hunk-content pr-[10px] align-middle",style:{backgroundColor:`var(${ht})`}},s.createElement("div",{className:"pl-[1.5em]",style:{whiteSpace:r?"pre-wrap":"pre",wordBreak:r?"break-all":"initial",color:`var(${mt})`}},(null===(i=l.unifiedInfo)||void 0===i?void 0:i.plainText)||l.text)))},hn=({index:e,diffFile:t,lineNumber:n})=>{const i=t.getUnifiedHunkLine(e),l=i&&i.unifiedInfo&&i.unifiedInfo.startHiddenIndex<i.unifiedInfo.endHiddenIndex,d=i&&t._getIsPureDiffRender()&&!i.unifiedInfo;return l||d?s.createElement(cn,{index:e,diffFile:t,lineNumber:n}):null},mn=({index:e,diffLine:t,rawLine:n,syntaxLine:i,lineNumber:l,diffFile:d,setWidget:a,enableWrap:r,enableAddWidget:o,enableHighlight:f,onAddWidgetClick:u})=>s.createElement("tr",{"data-line":e,"data-state":"diff",className:"diff-line group"},s.createElement("td",{className:"diff-line-num sticky left-0 pl-[10px] pr-[10px] text-right select-none w-[1%] min-w-[100px] whitespace-nowrap align-top",style:{color:`var(${ut})`,backgroundColor:`var(${rt})`,width:`calc(calc(var(${Ft}) + 5px) * 2)`,maxWidth:`calc(calc(var(${Ft}) + 5px) * 2)`,minWidth:`calc(calc(var(${Ft}) + 5px) * 2)`}},o&&s.createElement(At,{index:e-1,lineNumber:l,diffFile:d,side:En.old,onWidgetClick:u,onOpenAddWidget:(e,t)=>a({lineNumber:e,side:t})}),s.createElement("div",{className:"flex"},s.createElement("span",{"data-line-old-num":l,className:"inline-block w-[50%]"},l),s.createElement("span",{className:"w-[10px] shrink-0"}),s.createElement("span",{className:"inline-block w-[50%]"}))),s.createElement("td",{className:"diff-line-content pr-[10px] align-top",style:{backgroundColor:`var(${at})`}},s.createElement(Ut,{enableWrap:r,diffFile:d,enableHighlight:f,rawLine:n,diffLine:t,syntaxLine:i}))),pn=({index:e,diffLine:t,rawLine:n,syntaxLine:i,lineNumber:l,diffFile:d,setWidget:a,enableWrap:r,enableAddWidget:o,enableHighlight:f,onAddWidgetClick:u})=>s.createElement("tr",{"data-line":e,"data-state":"diff",className:"diff-line group"},s.createElement("td",{className:"diff-line-num sticky left-0 pl-[10px] pr-[10px] text-right select-none w-[1%] min-w-[100px] whitespace-nowrap align-top",style:{color:`var(${ut})`,backgroundColor:`var(${st})`,width:`calc(calc(var(${Ft}) + 5px) * 2)`,maxWidth:`calc(calc(var(${Ft}) + 5px) * 2)`,minWidth:`calc(calc(var(${Ft}) + 5px) * 2)`}},o&&s.createElement(At,{index:e-1,lineNumber:l,diffFile:d,side:En.new,onWidgetClick:u,onOpenAddWidget:(e,t)=>a({lineNumber:e,side:t})}),s.createElement("div",{className:"flex"},s.createElement("span",{className:"inline-block w-[50%]"}),s.createElement("span",{className:"shrink-0 w-[10px]"}),s.createElement("span",{"data-line-new-num":l,className:"inline-block w-[50%]"},l))),s.createElement("td",{className:"diff-line-content pr-[10px] align-top",style:{backgroundColor:`var(${dt})`}},s.createElement(Ut,{enableWrap:r,diffFile:d,enableHighlight:f,rawLine:n,diffLine:t,syntaxLine:i}))),gn=(0,s.memo)((({index:e,diffFile:t,lineNumber:n})=>{const i=t.getUnifiedLine(e),{useDiffContext:l}=qe(),{enableWrap:d,enableHighlight:a,enableAddWidget:r,onAddWidgetClick:o}=l(s.useCallback((e=>({enableWrap:e.enableWrap,enableHighlight:e.enableHighlight,enableAddWidget:e.enableAddWidget,onAddWidgetClick:e.onAddWidgetClick})),[])),{useWidget:f}=zt(),u=f.getReadonlyState().setWidget,c=i.diff,h=N(i.diff),m=i.value||"",p=i.diff,g=i.newLineNumber,x=i.oldLineNumber,v=g?t.getNewSyntaxLine(g):x?t.getOldSyntaxLine(x):void 0;return h?i.oldLineNumber?s.createElement(mn,{index:n,enableWrap:d,diffFile:t,rawLine:m,diffLine:p,setWidget:u,syntaxLine:v,enableHighlight:a,enableAddWidget:r,lineNumber:i.oldLineNumber,onAddWidgetClick:(...e)=>{var t;return null===(t=o.current)||void 0===t?void 0:t.call(o,...e)}}):s.createElement(pn,{index:n,enableWrap:d,rawLine:m,diffLine:p,diffFile:t,setWidget:u,syntaxLine:v,enableHighlight:a,enableAddWidget:r,lineNumber:i.newLineNumber,onAddWidgetClick:(...e)=>{var t;return null===(t=o.current)||void 0===t?void 0:t.call(o,...e)}}):s.createElement("tr",{"data-line":n,"data-state":i.diff?"diff":"plain",className:"diff-line group"},s.createElement("td",{className:"diff-line-num sticky left-0 pl-[10px] pr-[10px] text-right select-none w-[1%] min-w-[100px] whitespace-nowrap align-top",style:{color:`var(${ut})`,width:`calc(calc(var(${Ft}) + 5px) * 2)`,maxWidth:`calc(calc(var(${Ft}) + 5px) * 2)`,minWidth:`calc(calc(var(${Ft}) + 5px) * 2)`,backgroundColor:c?`var(${ct})`:`var(${ft})`}},r&&c&&s.createElement(At,{index:e,diffFile:t,lineNumber:i.newLineNumber,side:En.new,onWidgetClick:(...e)=>{var t;return null===(t=o.current)||void 0===t?void 0:t.call(o,...e)},onOpenAddWidget:(e,t)=>u({lineNumber:e,side:t})}),s.createElement("div",{className:"flex opacity-[0.5]"},s.createElement("span",{"data-line-old-num":i.oldLineNumber,className:"inline-block w-[50%]"},i.oldLineNumber),s.createElement("span",{className:"w-[10px] shrink-0"}),s.createElement("span",{"data-line-new-num":i.newLineNumber,className:"inline-block w-[50%]"},i.newLineNumber))),s.createElement("td",{className:"diff-line-content pr-[10px] align-top",style:{backgroundColor:c?`var(${ot})`:`var(${ft})`}},s.createElement(Ut,{enableWrap:d,diffFile:t,enableHighlight:a,rawLine:m,diffLine:p,syntaxLine:v})))}));gn.displayName="_DiffUnifiedLine";const xn=({index:e,diffFile:t,lineNumber:n})=>{const i=t.getUnifiedLine(e);return(null===i||void 0===i?void 0:i.isHidden)?null:s.createElement(gn,{index:e,diffFile:t,lineNumber:n})},vn=({index:e,diffFile:t,oldWidget:n,newWidget:i,lineNumber:l,setWidget:d})=>{const a=t.getUnifiedLine(e),r=()=>d({}),{useDiffContext:o}=qe(),f=o((0,s.useCallback)((e=>e.renderWidgetLine),[])),u=it({selector:".unified-diff-table-wrapper",enable:"function"===typeof f});return f?s.createElement("tr",{"data-line":`${l}-widget`,"data-state":"widget",className:"diff-line diff-line-widget"},s.createElement("td",{className:"diff-line-widget-content p-0",colSpan:2},s.createElement("div",{className:"diff-line-widget-wrapper sticky left-0",style:{width:u}},u>0&&n&&(null===f||void 0===f?void 0:f({diffFile:t,side:En.old,lineNumber:a.oldLineNumber,onClose:r})),u>0&&i&&(null===f||void 0===f?void 0:f({diffFile:t,side:En.new,lineNumber:a.newLineNumber,onClose:r}))))):null},bn=({index:e,diffFile:t,lineNumber:n})=>{const{useWidget:i}=zt(),{widgetSide:l,widgetLineNumber:d,setWidget:a}=i(s.useCallback((e=>({widgetLineNumber:e.widgetLineNumber,widgetSide:e.widgetSide,setWidget:e.setWidget})),[])),r=t.getUnifiedLine(e),o=r.oldLineNumber&&l===En.old&&d===r.oldLineNumber,f=r.newLineNumber&&l===En.new&&d===r.newLineNumber;return o||f?s.createElement(vn,{index:e,diffFile:t,lineNumber:n,oldWidget:o,newWidget:f,setWidget:a}):null},wn=e=>{const t=e.target;t&&t instanceof HTMLElement&&"BUTTON"===t.nodeName&&Ht()},Ln=(0,s.memo)((({diffFile:e})=>{const{useDiffContext:t}=qe(),n=(0,s.useMemo)((()=>(0,r.MT)((()=>{const e=(0,o.iH)(void 0),n=(0,o.iH)(void 0);return{widgetSide:e,widgetLineNumber:n,setWidget:({side:i,lineNumber:l})=>{const{renderWidgetLine:d}=t.getReadonlyState();"function"===typeof d&&(e.value=i,n.value=l)}}}))),[t]),i=(0,s.useMemo)((()=>({useWidget:n})),[n]),l=t((0,s.useCallback)((e=>e.fontSize),[]));(0,f.useSyncExternalStore)(e.subscribe,e.getUpdateCount),(0,s.useEffect)((()=>{const{setWidget:e}=n.getReadonlyState();e({})}),[e,n]);const d=Math.max(e.unifiedLineLength,e.fileLineLength),a=nt({text:d.toString(),font:{fontSize:l+"px",fontFamily:"Menlo, Consolas, monospace"}}),u=Math.max(40,a+25),c=Pe(e);return s.createElement(Bt.Provider,{value:i},s.createElement("div",{className:"unified-diff-view w-full"},s.createElement("div",{className:"unified-diff-table-wrapper overflow-x-auto overflow-y-hidden w-full scrollbar-hide scrollbar-disable",style:{[Ft]:`${Math.round(u)}px`,fontFamily:"Menlo, Consolas, monospace",fontSize:`var(${Nn})`}},s.createElement("table",{className:"unified-diff-table border-collapse w-full"},s.createElement("colgroup",null,s.createElement("col",{className:"unified-diff-table-num-col"}),s.createElement("col",{className:"unified-diff-table-content-col"})),s.createElement("thead",{className:"hidden"},s.createElement("tr",null,s.createElement("th",{scope:"col"},"line number"),s.createElement("th",{scope:"col"},"line content"))),s.createElement("tbody",{className:"diff-table-body leading-[1.4]",onMouseDownCapture:wn},c.map((t=>s.createElement(s.Fragment,{key:t.index},s.createElement(hn,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(xn,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(bn,{index:t.index,lineNumber:t.lineNumber,diffFile:e}),s.createElement(un,{index:t.index,lineNumber:t.lineNumber,diffFile:e})))),s.createElement(hn,{index:e.unifiedLineLength,lineNumber:e.unifiedLineLength,diffFile:e}))))))}));Ln.displayName="DiffUnifiedView";const Nn="--diff-font-size--";var En;J.name="@git-diff-view/react",function(e){e[e.old=1]="old",e[e.new=2]="new"}(En||(En={}));const yn=(0,s.memo)((e=>{const{diffFile:t,className:n,style:i,diffViewMode:l,diffViewWrap:d,diffViewFontSize:a,diffViewHighlight:f,renderWidgetLine:u,renderExtendLine:c,extendData:h,diffViewAddWidget:m,onAddWidgetClick:p}=e,g=(0,s.useMemo)((()=>t.getId()),[t]),x=(0,s.useMemo)((()=>(0,r.MT)((()=>{var t,n;const i=(0,o.iH)(g),l=(0,o.iH)(e.diffViewMode),d=(0,o.iH)(e.diffViewWrap),a=(0,o.iH)(e.diffViewAddWidget),s=(0,o.iH)(e.diffViewHighlight),r=(0,o.iH)(e.diffViewFontSize),f=(0,o.iH)({oldFile:Object.assign({},null===(t=e.extendData)||void 0===t?void 0:t.oldFile),newFile:Object.assign({},null===(n=e.extendData)||void 0===n?void 0:n.newFile)}),u=(0,o.iH)(e.renderWidgetLine),c=(0,o.iH)(e.renderExtendLine),h=(0,o.iH)((0,o.Xl)({current:e.onAddWidgetClick}));return{id:i,setId:e=>i.value=e,mode:l,setMode:e=>l.value=e,enableWrap:d,setEnableWrap:e=>d.value=e,enableAddWidget:a,setEnableAddWidget:e=>a.value=e,enableHighlight:s,setEnableHighlight:e=>s.value=e,fontSize:r,setFontSize:e=>r.value=e,extendData:f,setExtendData:e=>{const t=Object.keys(f.value.oldFile||{}),n=Object.keys(e.oldFile||{});for(const d of t)n.includes(d)||delete f.value.oldFile[d];for(const d of n)f.value.oldFile[d]=e.oldFile[d];const i=Object.keys(f.value.newFile||{}),l=Object.keys(e.newFile||{});for(const d of i)l.includes(d)||delete f.value.newFile[d];for(const d of l)f.value.newFile[d]=e.newFile[d]},renderWidgetLine:u,setRenderWidgetLine:e=>u.value=e,renderExtendLine:c,setRenderExtendLine:e=>c.value=e,onAddWidgetClick:h,setOnAddWidgetClick:e=>h.value.current=e.current}}))),[]);(0,s.useEffect)((()=>{const{id:e,setId:t,mode:n,setMode:i,enableAddWidget:s,setEnableAddWidget:r,enableHighlight:o,setEnableHighlight:v,enableWrap:b,setEnableWrap:w,setExtendData:L,fontSize:N,setFontSize:E,onAddWidgetClick:y,setOnAddWidgetClick:k,renderExtendLine:I,setRenderExtendLine:S,renderWidgetLine:H,setRenderWidgetLine:F}=x.getReadonlyState();g&&g!==e&&t(g),l&&l!==n&&i(l),m!==s&&r(m),f!==o&&v(f),d!==b&&w(d),h&&L(h),a&&a!==N&&E(a),p!==y.current&&k({current:p}),c!==I&&S(c),u!==H&&F(u)}),[x,a,f,l,d,m,g,u,c,h,p]);const v=(0,s.useMemo)((()=>({useDiffContext:x})),[x]);return s.createElement(Ge.Provider,{value:v},s.createElement("div",{className:"diff-tailwindcss-wrapper","data-component":"git-diff-view","data-version":"0.0.13","data-highlighter":t._getHighlighterName()},s.createElement("div",{className:"diff-style-root",style:{[Nn]:a+"px"}},s.createElement("div",{id:`diff-root${g}`,className:"diff-view-wrapper"+(n?` ${n}`:""),style:i},l&Ze.Split?s.createElement(on,{diffFile:t}):s.createElement(Ln,{diffFile:t})))))})),kn=(0,s.forwardRef)(((e,t)=>{const{registerHighlighter:n,data:i,diffFile:l}=e,d=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(n[i[l]]=e[i[l]])}return n}(e,["registerHighlighter","data","diffFile"]),a=(0,s.useMemo)((()=>{var e,t,n,d,a,s;if(l){const e=Oe.createInstance({});return e._mergeFullBundle(l._getFullBundle()),e}return i?new Oe((null===(e=null===i||void 0===i?void 0:i.oldFile)||void 0===e?void 0:e.fileName)||"",(null===(t=null===i||void 0===i?void 0:i.oldFile)||void 0===t?void 0:t.content)||"",(null===(n=null===i||void 0===i?void 0:i.newFile)||void 0===n?void 0:n.fileName)||"",(null===(d=null===i||void 0===i?void 0:i.newFile)||void 0===d?void 0:d.content)||"",(null===i||void 0===i?void 0:i.hunks)||[],(null===(a=null===i||void 0===i?void 0:i.oldFile)||void 0===a?void 0:a.fileLang)||"",(null===(s=null===i||void 0===i?void 0:i.newFile)||void 0===s?void 0:s.fileLang)||""):null}),[i,l]);return(0,s.useEffect)((()=>{a&&(a.initRaw(),a.buildSplitDiffLines(),a.buildUnifiedDiffLines())}),[a]),(0,s.useEffect)((()=>{a&&e.diffViewHighlight&&(a.initSyntax({registerHighlighter:n}),a.notifyAll())}),[a,e.diffViewHighlight,n]),(0,s.useEffect)((()=>{if(l&&a)return l._addClonedInstance(a),()=>{l._delClonedInstance(a)}}),[a,l]),((e,t)=>{const n=(0,s.useRef)(e);n.current=e,(0,s.useEffect)((()=>n.current),t)})((()=>a._destroy()),[a]),(0,s.useImperativeHandle)(t,(()=>({getDiffFileInstance:()=>a})),[a]),a?s.createElement(yn,Object.assign({key:a.getId()},d,{diffFile:a,diffViewMode:d.diffViewMode||Ze.SplitGitHub,diffViewFontSize:d.diffViewFontSize||14})):null}));kn.displayName="DiffView";const In="0.0.13"}}]);