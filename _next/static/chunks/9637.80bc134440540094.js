"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9637],{99637:function(e,t,n){n.r(t),n.d(t,{COMMENT_ACTION_ID:function(){return m},HIGHLIGHT_MODE:function(){return h},HIGHLIGHT_TYPE:function(){return l},JSXCommentContexts:function(){return d},JSXTypes:function(){return c},configureLocToMonacoRange:function(){return s},default:function(){return S},makeBabelParse:function(){return g},makeJSXTraverse:function(){return r},prepareOptions:function(){return a}});!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".JSXElement.JSXIdentifier{color:#4169e1}.JSXElement.JSXBracket{color:#ff8c00}.JSXElement.JSXText{color:#b8860b}.JSXElement.JSXGlyph{background:cyan;opacity:.25}.JSXClosingFragment.JSXBracket,.JSXOpeningElement.JSXBracket,.JSXOpeningFragment.JSXBracket{color:#ff8c00;font-weight:700}.JSXOpeningElement.JSXIdentifier{color:#4169e1}.JSXClosingElement.JSXBracket{color:#ff8c00;font-weight:lighter}.JSXClosingElement.JSXIdentifier{color:#4169e1;font-weight:lighter}.JSXAttribute.JSXIdentifier{color:#4682b4}.JSXExpressionContainer.JSXBracket,.JSXSpreadAttribute.JSXBracket,.JSXSpreadChild.JSXBracket{color:#ff8c00}");let o=null;const i={parser:"babel",isHighlightGlyph:!1,iShowHover:!1,isUseSeparateElementStyles:!1,isThrowJSXParseErrors:!1},s=(e=o,t="babel")=>(t,n=0,o=0,i=0,s=0)=>t?.start?new e.Range(n+t.start.line,o+t.start.column+1,i+t.end?t.end.line:t.start.line,s+t.end?t.end.column+1:t.start.column+1):new e.Range(1,1,1,1);function r(){const e=[],t=t=>e.filter((e=>e.type===t));return{jsxExpressions:e,find:t,findJSXElements:()=>t("JSXElement"),jsxTraverse:t=>{t.type.toUpperCase().includes("JSX")&&e.push(t)}}}function a(e,t={},n={}){return n.iShowHover?{...t,hoverMessage:`(${e.type})`}:t}const l={ELEMENT:"ELEMENT",ALL:"ALL",IDENTIFIER:"IDENTIFIER",EDGE:"EDGE",STYLE:"STYLE"},h={[l.ELEMENT]:(e,t,n=[],o,i)=>{const s=e.node.loc,r=e.node.openingElement;let a=null;if(r){a=r.name.name;const e={start:{...r.loc.start},end:{...r.name.loc.start}},t={start:{...r.loc.end},end:{...r.loc.end}};t.start.column--,r.selfClosing&&t.start.column--,n.push({range:i(e),options:o.isUseSeparateElementStyles?c.JSXBracket.openingElementOptions:c.JSXBracket.options}),n.push({range:i(t),options:o.isUseSeparateElementStyles?c.JSXBracket.openingElementOptions:c.JSXBracket.options})}const l=e.node.closingElement;if(l){const e={start:{...l.loc.start},end:{...l.name.loc.start}},t={start:{...l.loc.end},end:{...l.loc.end}};t.start.column--,n.push({range:i(e),options:o.isUseSeparateElementStyles?c.JSXBracket.closingElementOptions:c.JSXBracket.options}),n.push({range:i(t),options:o.isUseSeparateElementStyles?c.JSXBracket.closingElementOptions:c.JSXBracket.options})}o.isHighlightGlyph&&n.push({range:i(s),options:c.JSXElement.options(a)})},[l.ALL]:(e,t,n=[],o,i)=>{const s={start:{...e.node.loc.start},end:{...e.node.loc.end}};return"object"===e.key&&(s.end={...e.container.property.loc.start}),i&&n.push({range:i(s),options:a(e,t,o)}),n},[l.IDENTIFIER]:(e,t={},n=[],o={},i)=>("object"!==e.key&&"property"!==e.key&&"name"!==e.key&&"namespace"!==e.key||h[l.ALL](e,e.parentPath?.isJSXAttribute()?c.JSXAttribute.options:t,n,o,i),n),[l.EDGE]:(e,t,n=[],o,i)=>{const s=a(e,t,o),r=e.node.loc,l=e.isJSXSpreadChild()?"expression":e.isJSXSpreadAttribute()?"argument":null;let h=null;if(l){const t=e.node[l];h={start:{...t.loc.start},end:{...t.loc.end}},t.extra?.parenthesized&&(h.start.column--,h.end.column++)}else h={start:{...r.start},end:{...r.end}},h.start.column++,h.end.column--;const c={start:{...r.start},end:{...h.start}},d={start:{...h.end},end:{...r.end}};return n.push({range:i(c),options:s}),n.push({range:i(d),options:s}),n},[l.STYLE]:()=>[]},c={JSXIdentifier:{highlightScope:l.IDENTIFIER,options:{inlineClassName:"JSXElement.JSXIdentifier"}},JSXOpeningFragment:{highlightScope:l.ALL,options:{inlineClassName:"JSXOpeningFragment.JSXBracket"}},JSXClosingFragment:{highlightScope:l.ALL,options:{inlineClassName:"JSXClosingFragment.JSXBracket"}},JSXText:{highlightScope:l.ALL,options:{inlineClassName:"JSXElement.JSXText"}},JSXExpressionContainer:{highlightScope:l.EDGE,options:{inlineClassName:"JSXExpressionContainer.JSXBracket"}},JSXSpreadChild:{highlightScope:l.EDGE,options:{inlineClassName:"JSXSpreadChild.JSXBracket"}},JSXSpreadAttribute:{highlightScope:l.EDGE,options:{inlineClassName:"JSXSpreadAttribute.JSXBracket"}},JSXElement:{highlightScope:l.STYLE,options:e=>({glyphMarginClassName:"JSXElement.JSXGlyph",glyphMarginHoverMessage:"JSX Element"+(e?": "+e:"")})},JSXBracket:{highlightScope:l.STYLE,options:{inlineClassName:"JSXElement.JSXBracket"},openingElementOptions:{inlineClassName:"JSXOpeningElement.JSXBracket"},closingElementOptions:{inlineClassName:"JSXClosingElement.JSXBracket"}},JSXOpeningElement:{highlightScope:l.STYLE,options:{inlineClassName:"JSXOpeningElement.JSXIdentifier"}},JSXClosingElement:{highlightScope:l.STYLE,options:{inlineClassName:"JSXClosingElement.JSXIdentifier"}},JSXAttribute:{highlightScope:l.STYLE,options:{inlineClassName:"JSXAttribute.JSXIdentifier"}}},d={JS:"JS",JSX:"JSX"},m="editor.action.commentLine",g=(e,t)=>(n,o={})=>e(n,{sourceType:"module",plugins:["jsx",...t?["typescript"]:[]],errorRecovery:!0,...o});class S{constructor(e,t,n,r,a={}){o=e,this.monaco=o,this.parse=t,this.traverse=n,this.monacoEditor=r,this.options={...i,...a},this.locToMonacoRange=s(o,this.options.parser),this.highLightOnDidChangeModelContent=this.highlightOnDidChangeModelContent,this.bindMethods(),this._isHighlightBoundToModelContentChanges=!1,this._isJSXCommentCommandActive=!1,this.resetState()}bindMethods(){["resetState","resetDeltaDecorations","getAstPromise","highlightOnDidChangeModelContent","highlight","highlightCode","createDecoratorsByType","createJSXElementDecorators","extractAllDecorators","jsxTraverseAst","getJSXContext","runJSXCommentContextAndAction","addJSXCommentCommand","highLightOnDidChangeModelContent"].forEach((e=>this[e]=this[e].bind(this)))}resetState(){this.prevEditorValue=null,this.editorValue=null,this.ast=null,this.jsxManager=null}resetDeltaDecorations(){const e=this.monacoEditor?.getModel();this.JSXDecoratorIds=e?.deltaDecorations?e.deltaDecorations(this.JSXDecoratorIds??[],[]):[]}async getAstPromise(e){return await new Promise((t=>{if(e||!this.editorValue||this.editorValue!==this.prevEditorValue){this.prevEditorValue=this.editorValue,this.editorValue=this.monacoEditor.getValue();try{this.ast=this.parse(this.editorValue)}catch(n){if(n instanceof SyntaxError&&!n.message.includes("JSX"))throw this.resetState(),n;if(this.options.isThrowJSXParseErrors)throw n;t(this.ast)}}t(this.ast)}))}highlightOnDidChangeModelContent(e=100,t=(e=>e),n=(e=>{console.error(e)}),o,i=(e=>{console.log(e)})){o=o??this.getAstPromise;const s=()=>{this.highlightCode(t,n,o,i)};s();const r=null;let a={onDidChangeModelContentDisposer:this.monacoEditor.onDidChangeModelContent((()=>{clearTimeout(r),setTimeout(s,e)})),onDidChangeModelDisposer:this.monacoEditor.onDidChangeModel((()=>{s()})),dispose:()=>{a.onDidChangeModelContentDisposer.dispose(),a.onDidChangeModelDisposer.dispose()}};this._isHighlightBoundToModelContentChanges=!0;return this.monacoEditor.onDidDispose((()=>{clearTimeout(r),this.resetDeltaDecorations(),a=null,this._isHighlightBoundToModelContentChanges=!1})),()=>{clearTimeout(r),this.resetState(),this.resetDeltaDecorations(),this._isHighlightBoundToModelContentChanges&&(this._isHighlightBoundToModelContentChanges=!1,a?.dispose(),a=null)}}highlightCode(e=(e=>e),t=(e=>{console.error(e)}),n,o=(e=>e)){return(n=n??this.getAstPromise)().then((async e=>await this.highlight(e))).catch(o).then(e).catch(t)}jsxTraverseAst(e,t){t=t??this.traverse;const n=r();return t(e,{enter:n.jsxTraverse}),n}async highlight(e,t){return t=t??this.jsxTraverseAst,await new Promise((n=>{e&&(this.jsxManager=t(e),this.decorators=this.extractAllDecorators(this.jsxManager)),n(e)}))}createDecoratorsByType(e,t,n,o,i=[],s,r){return s=s??this.options,r=r??this.locToMonacoRange,e?.find(t).forEach((e=>h[o](e,n,i,s,r))),i}createJSXElementDecorators(e,t=[],n,o){return n=n??this.options,o=o??this.locToMonacoRange,e?.findJSXElements().forEach((e=>h.ELEMENT(e,null,t,n,o))),t}extractAllDecorators(e){e=e??this.jsxManager;const t=this.createJSXElementDecorators(e);for(const n in c)this.createDecoratorsByType(e,n,c[n].options,c[n].highlightScope,t);return this.JSXDecoratorIds=this.monacoEditor.getModel().deltaDecorations(this.JSXDecoratorIds??[],t),t}getJSXContext(e,t,n,i,s){n=n??this.monacoEditor,i=i??this.locToMonacoRange,s=s??this.jsxTraverseAst;let r=t?this.jsxManager:null;if(this._isHighlightBoundToModelContentChanges||(r=t?s(t):null),!r)return d.JS;let a=n.getModel().getLineFirstNonWhitespaceColumn(e.startLineNumber);const l=new o.Range(e.startLineNumber,a,e.startLineNumber,a);a=a?a-1:0;const h=new o.Range(e.startLineNumber,a,e.startLineNumber,a);let c=null,m=null,g=null,S=null;return r.jsxExpressions.forEach((e=>{const t=i(e.node.loc);("name"===e.key||"property"===e.key)&&e.isJSXIdentifier()&&t.intersectRanges(l)&&(m&&!m.containsRange(t)||(m=t,S=e)),t.intersectRanges(h)&&(c&&!c.containsRange(t)||(c=t,g=e))})),!g||g.isJSXExpressionContainer()||S?d.JS:d.JSX}async runJSXCommentContextAndAction(e,t,n=(e=>e),o,i){return t=t??this.getAstPromise,o=o??this.monacoEditor,await new Promise((s=>{this._isHighlightBoundToModelContentChanges?s(i(this.getJSXContext(e,this.ast,o))):t().then((t=>{s(i(this.getJSXContext(e,t,o)))})).catch((t=>s(i(this.getJSXContext(e,null,o)))??n(t)))})).catch((t=>i(this.getJSXContext(e,null,o))??n(t)))}addJSXCommentCommand(e,t=(e=>e),n){return e=e??this.getAstPromise,n=n??this.monacoEditor,this._editorCommandId?(this._isJSXCommentCommandActive=!0,this.editorCommandOnDispose):(this._editorCommandId=n.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.US_SLASH,(()=>{if(!this._isJSXCommentCommandActive)return void n.getAction(m).run();const i=n.getSelection(),s=n.getModel(),r=new o.Range(i.startLineNumber,s.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.startLineNumber,s.getLineMaxColumn(i.startLineNumber));if(s.getValueInRange(r).match(/^\s*\/[/*]/))return n.getAction(m).run(),void this.resetState();this.runJSXCommentContextAndAction(i,e,t,n,(e=>{let t=!0;const r=[];for(let n=i.startLineNumber;n<=i.endLineNumber;n++){const e=new o.Range(n,s.getLineFirstNonWhitespaceColumn(n),n,s.getLineMaxColumn(n)),i=s.getValueInRange(e);r.push({commentRange:e,commentText:i}),t=t&&!!i.match(/{\/\*/)}if(e!==d.JSX&&!t)return n.getAction(m).run(),void this.resetState();const a=[];let l=0;for(let n=i.startLineNumber;n<=i.endLineNumber;n++){let{commentText:e,commentRange:n}=r[l++];t?(e=e.replace(/{\/\*/,""),e=e.replace(/\*\/}/,"")):e=`{/*${e}*/}`,a.push({identifier:{major:1,minor:1},range:n,text:e,forceMoveMarkers:!0})}a.length>0&&n.executeEdits(this._editorCommandId,a)})).catch(t)})),this.editorCommandOnDispose=()=>{this._isJSXCommentCommandActive=!1},this._isJSXCommentCommandActive=!0,n.onDidDispose(this.editorCommandOnDispose),this.editorCommandOnDispose)}}}}]);