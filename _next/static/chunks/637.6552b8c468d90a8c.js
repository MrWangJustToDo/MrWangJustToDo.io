"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{99637:function(e,t,n){n.d(t,{default:function(){return g}}),function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".JSXElement.JSXIdentifier{color:#4169e1}.JSXElement.JSXBracket{color:#ff8c00}.JSXElement.JSXText{color:#b8860b}.JSXElement.JSXGlyph{background:cyan;opacity:.25}.JSXClosingFragment.JSXBracket,.JSXOpeningElement.JSXBracket,.JSXOpeningFragment.JSXBracket{color:#ff8c00;font-weight:700}.JSXOpeningElement.JSXIdentifier{color:#4169e1}.JSXClosingElement.JSXBracket{color:#ff8c00;font-weight:lighter}.JSXClosingElement.JSXIdentifier{color:#4169e1;font-weight:lighter}.JSXAttribute.JSXIdentifier{color:#4682b4}.JSXExpressionContainer.JSXBracket,.JSXSpreadAttribute.JSXBracket,.JSXSpreadChild.JSXBracket{color:#ff8c00}");let i=null,o={parser:"babel",isHighlightGlyph:!1,iShowHover:!1,isUseSeparateElementStyles:!1,isThrowJSXParseErrors:!1},s=(e=i,t="babel")=>(t,n=0,i=0,o=0,s=0)=>t?.start?new e.Range(n+t.start.line,i+t.start.column+1,o+t.end?t.end.line:t.start.line,s+t.end?t.end.column+1:t.start.column+1):new e.Range(1,1,1,1);function r(e,t={},n={}){return n.iShowHover?{...t,hoverMessage:`(${e.type})`}:t}let a={ELEMENT:"ELEMENT",ALL:"ALL",IDENTIFIER:"IDENTIFIER",EDGE:"EDGE",STYLE:"STYLE"},l={[a.ELEMENT]:(e,t,n=[],i,o)=>{let s=e.node.loc,r=e.node.openingElement,a=null;if(r){a=r.name.name;let e={start:{...r.loc.start},end:{...r.name.loc.start}},t={start:{...r.loc.end},end:{...r.loc.end}};t.start.column--,r.selfClosing&&t.start.column--,n.push({range:o(e),options:i.isUseSeparateElementStyles?h.JSXBracket.openingElementOptions:h.JSXBracket.options}),n.push({range:o(t),options:i.isUseSeparateElementStyles?h.JSXBracket.openingElementOptions:h.JSXBracket.options})}let l=e.node.closingElement;if(l){let e={start:{...l.loc.start},end:{...l.name.loc.start}},t={start:{...l.loc.end},end:{...l.loc.end}};t.start.column--,n.push({range:o(e),options:i.isUseSeparateElementStyles?h.JSXBracket.closingElementOptions:h.JSXBracket.options}),n.push({range:o(t),options:i.isUseSeparateElementStyles?h.JSXBracket.closingElementOptions:h.JSXBracket.options})}i.isHighlightGlyph&&n.push({range:o(s),options:h.JSXElement.options(a)})},[a.ALL]:(e,t,n=[],i,o)=>{let s={start:{...e.node.loc.start},end:{...e.node.loc.end}};return"object"===e.key&&(s.end={...e.container.property.loc.start}),o&&n.push({range:o(s),options:r(e,t,i)}),n},[a.IDENTIFIER]:(e,t={},n=[],i={},o)=>(("object"===e.key||"property"===e.key||"name"===e.key||"namespace"===e.key)&&l[a.ALL](e,e.parentPath?.isJSXAttribute()?h.JSXAttribute.options:t,n,i,o),n),[a.EDGE]:(e,t,n=[],i,o)=>{let s=r(e,t,i),a=e.node.loc,l=e.isJSXSpreadChild()?"expression":e.isJSXSpreadAttribute()?"argument":null,h=null;if(l){let t=e.node[l];h={start:{...t.loc.start},end:{...t.loc.end}},t.extra?.parenthesized&&(h.start.column--,h.end.column++)}else h={start:{...a.start},end:{...a.end}},h.start.column++,h.end.column--;let c={start:{...a.start},end:{...h.start}},d={start:{...h.end},end:{...a.end}};return n.push({range:o(c),options:s}),n.push({range:o(d),options:s}),n},[a.STYLE]:()=>[]},h={JSXIdentifier:{highlightScope:a.IDENTIFIER,options:{inlineClassName:"JSXElement.JSXIdentifier"}},JSXOpeningFragment:{highlightScope:a.ALL,options:{inlineClassName:"JSXOpeningFragment.JSXBracket"}},JSXClosingFragment:{highlightScope:a.ALL,options:{inlineClassName:"JSXClosingFragment.JSXBracket"}},JSXText:{highlightScope:a.ALL,options:{inlineClassName:"JSXElement.JSXText"}},JSXExpressionContainer:{highlightScope:a.EDGE,options:{inlineClassName:"JSXExpressionContainer.JSXBracket"}},JSXSpreadChild:{highlightScope:a.EDGE,options:{inlineClassName:"JSXSpreadChild.JSXBracket"}},JSXSpreadAttribute:{highlightScope:a.EDGE,options:{inlineClassName:"JSXSpreadAttribute.JSXBracket"}},JSXElement:{highlightScope:a.STYLE,options:e=>({glyphMarginClassName:"JSXElement.JSXGlyph",glyphMarginHoverMessage:`JSX Element${e?": "+e:""}`})},JSXBracket:{highlightScope:a.STYLE,options:{inlineClassName:"JSXElement.JSXBracket"},openingElementOptions:{inlineClassName:"JSXOpeningElement.JSXBracket"},closingElementOptions:{inlineClassName:"JSXClosingElement.JSXBracket"}},JSXOpeningElement:{highlightScope:a.STYLE,options:{inlineClassName:"JSXOpeningElement.JSXIdentifier"}},JSXClosingElement:{highlightScope:a.STYLE,options:{inlineClassName:"JSXClosingElement.JSXIdentifier"}},JSXAttribute:{highlightScope:a.STYLE,options:{inlineClassName:"JSXAttribute.JSXIdentifier"}}},c={JS:"JS",JSX:"JSX"},d="editor.action.commentLine";class g{constructor(e,t,n,r,a={}){i=e,this.monaco=i,this.parse=t,this.traverse=n,this.monacoEditor=r,this.options={...o,...a},this.locToMonacoRange=s(i,this.options.parser),this.highLightOnDidChangeModelContent=this.highlightOnDidChangeModelContent,this.bindMethods(),this._isHighlightBoundToModelContentChanges=!1,this._isJSXCommentCommandActive=!1,this.resetState()}bindMethods(){["resetState","resetDeltaDecorations","getAstPromise","highlightOnDidChangeModelContent","highlight","highlightCode","createDecoratorsByType","createJSXElementDecorators","extractAllDecorators","jsxTraverseAst","getJSXContext","runJSXCommentContextAndAction","addJSXCommentCommand","highLightOnDidChangeModelContent"].forEach(e=>this[e]=this[e].bind(this))}resetState(){this.prevEditorValue=null,this.editorValue=null,this.ast=null,this.jsxManager=null}resetDeltaDecorations(){let e=this.monacoEditor?.getModel();e?.deltaDecorations?this.JSXDecoratorIds=e.deltaDecorations(this.JSXDecoratorIds??[],[]):this.JSXDecoratorIds=[]}async getAstPromise(e){return await new Promise(t=>{if(e||!this.editorValue||this.editorValue!==this.prevEditorValue){this.prevEditorValue=this.editorValue,this.editorValue=this.monacoEditor.getValue();try{this.ast=this.parse(this.editorValue)}catch(e){if(e instanceof SyntaxError&&!e.message.includes("JSX"))throw this.resetState(),e;if(this.options.isThrowJSXParseErrors)throw e;t(this.ast)}}t(this.ast)})}highlightOnDidChangeModelContent(e=100,t=e=>e,n=e=>{console.error(e)},i,o=e=>{console.log(e)}){i=i??this.getAstPromise;let s=()=>{this.highlightCode(t,n,i,o)};s();let r={onDidChangeModelContentDisposer:this.monacoEditor.onDidChangeModelContent(()=>{clearTimeout(null),setTimeout(s,e)}),onDidChangeModelDisposer:this.monacoEditor.onDidChangeModel(()=>{s()})};return r.dispose=()=>{r.onDidChangeModelContentDisposer.dispose(),r.onDidChangeModelDisposer.dispose()},this._isHighlightBoundToModelContentChanges=!0,this.monacoEditor.onDidDispose(()=>{clearTimeout(null),this.resetDeltaDecorations(),r=null,this._isHighlightBoundToModelContentChanges=!1}),()=>{clearTimeout(null),this.resetState(),this.resetDeltaDecorations(),this._isHighlightBoundToModelContentChanges&&(this._isHighlightBoundToModelContentChanges=!1,r?.dispose(),r=null)}}highlightCode(e=e=>e,t=e=>{console.error(e)},n,i=e=>e){return(n=n??this.getAstPromise)().then(async e=>await this.highlight(e)).catch(i).then(e).catch(t)}jsxTraverseAst(e,t){t=t??this.traverse;let n=function(){let e=[],t=t=>e.filter(e=>e.type===t);return{jsxExpressions:e,find:t,findJSXElements:()=>t("JSXElement"),jsxTraverse:t=>{t.type.toUpperCase().includes("JSX")&&e.push(t)}}}();return t(e,{enter:n.jsxTraverse}),n}async highlight(e,t){return t=t??this.jsxTraverseAst,await new Promise(n=>{e&&(this.jsxManager=t(e),this.decorators=this.extractAllDecorators(this.jsxManager)),n(e)})}createDecoratorsByType(e,t,n,i,o=[],s,r){return s=s??this.options,r=r??this.locToMonacoRange,e?.find(t).forEach(e=>l[i](e,n,o,s,r)),o}createJSXElementDecorators(e,t=[],n,i){return n=n??this.options,i=i??this.locToMonacoRange,e?.findJSXElements().forEach(e=>l.ELEMENT(e,null,t,n,i)),t}extractAllDecorators(e){e=e??this.jsxManager;let t=this.createJSXElementDecorators(e);for(let n in h)this.createDecoratorsByType(e,n,h[n].options,h[n].highlightScope,t);return this.JSXDecoratorIds=this.monacoEditor.getModel().deltaDecorations(this.JSXDecoratorIds??[],t),t}getJSXContext(e,t,n,o,s){n=n??this.monacoEditor,o=o??this.locToMonacoRange,s=s??this.jsxTraverseAst;let r=t?this.jsxManager:null;if(this._isHighlightBoundToModelContentChanges||(r=t?s(t):null),!r)return c.JS;let a=n.getModel().getLineFirstNonWhitespaceColumn(e.startLineNumber),l=new i.Range(e.startLineNumber,a,e.startLineNumber,a);a=a?a-1:0;let h=new i.Range(e.startLineNumber,a,e.startLineNumber,a),d=null,g=null,m=null,S=null;return(r.jsxExpressions.forEach(e=>{let t=o(e.node.loc);("name"===e.key||"property"===e.key)&&e.isJSXIdentifier()&&t.intersectRanges(l)&&(!g||g.containsRange(t))&&(g=t,S=e),t.intersectRanges(h)&&(!d||d.containsRange(t))&&(d=t,m=e)}),!m||m.isJSXExpressionContainer()||S)?c.JS:c.JSX}async runJSXCommentContextAndAction(e,t,n=e=>e,i,o){return t=t??this.getAstPromise,i=i??this.monacoEditor,await new Promise(s=>{this._isHighlightBoundToModelContentChanges?s(o(this.getJSXContext(e,this.ast,i))):t().then(t=>{s(o(this.getJSXContext(e,t,i)))}).catch(t=>s(o(this.getJSXContext(e,null,i)))??n(t))}).catch(t=>o(this.getJSXContext(e,null,i))??n(t))}addJSXCommentCommand(e,t=e=>e,n){return(e=e??this.getAstPromise,n=n??this.monacoEditor,this._editorCommandId)?this._isJSXCommentCommandActive=!0:(this._editorCommandId=n.addCommand(i.KeyMod.CtrlCmd|i.KeyCode.US_SLASH,()=>{if(!this._isJSXCommentCommandActive){n.getAction(d).run();return}let o=n.getSelection(),s=n.getModel(),r=new i.Range(o.startLineNumber,s.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.startLineNumber,s.getLineMaxColumn(o.startLineNumber));if(s.getValueInRange(r).match(/^\s*\/[/*]/)){n.getAction(d).run(),this.resetState();return}this.runJSXCommentContextAndAction(o,e,t,n,e=>{let t=!0,r=[];for(let e=o.startLineNumber;e<=o.endLineNumber;e++){let n=new i.Range(e,s.getLineFirstNonWhitespaceColumn(e),e,s.getLineMaxColumn(e)),o=s.getValueInRange(n);r.push({commentRange:n,commentText:o}),t=t&&!!o.match(/{\/\*/)}if(e!==c.JSX&&!t){n.getAction(d).run(),this.resetState();return}let a=[],l=0;for(let e=o.startLineNumber;e<=o.endLineNumber;e++){let{commentText:e,commentRange:n}=r[l++];e=t?(e=e.replace(/{\/\*/,"")).replace(/\*\/}/,""):`{/*${e}*/}`,a.push({identifier:{major:1,minor:1},range:n,text:e,forceMoveMarkers:!0})}a.length>0&&n.executeEdits(this._editorCommandId,a)}).catch(t)}),this.editorCommandOnDispose=()=>{this._isJSXCommentCommandActive=!1},this._isJSXCommentCommandActive=!0,n.onDidDispose(this.editorCommandOnDispose)),this.editorCommandOnDispose}}}}]);